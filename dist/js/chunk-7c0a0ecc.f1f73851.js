(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c0a0ecc"],{b55a:function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"e",(function(){return a})),o.d(t,"d",(function(){return i})),o.d(t,"h",(function(){return s})),o.d(t,"c",(function(){return l})),o.d(t,"a",(function(){return c})),o.d(t,"f",(function(){return u})),o.d(t,"i",(function(){return m})),o.d(t,"j",(function(){return d})),o.d(t,"g",(function(){return f}));var n=o("b775");function r(e){return Object(n["b"])({url:"/RepairLog/Create",method:"post",data:e})}function a(e){return Object(n["b"])({url:"/RepairLog/Edit",method:"post",data:e})}function i(e){return Object(n["b"])({url:"/RepairLog/Del",method:"post",data:e})}function s(e){return Object(n["b"])({url:"/RepairLog/Feedback",method:"post",data:e})}function l(e){return Object(n["b"])({url:"/RepairLog/Deal",method:"post",data:e})}function c(e){return Object(n["b"])({url:"/RepairLog/Complete",method:"post",data:e})}function u(e){return Object(n["b"])({url:"/RepairLog/Examine",method:"post",data:e})}function m(e){return Object(n["b"])({url:"/RepairLog/Get",method:"get",params:e})}function d(e){return Object(n["b"])({url:"/RepairLog/Detail",method:"get",params:e})}function f(e){return Object(n["b"])({url:"/RepairLog/Export",method:"post",data:e,responseType:"blob"})}},ed7f:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("a-modal",{attrs:{title:e.title,width:700,footer:null},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[o("a-form-model",{ref:"ruleForm",attrs:{model:e.formContent,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules}},[o("a-form-model-item",{attrs:{label:"维修时间"}},[o("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss"},model:{value:e.formContent.solve_time,callback:function(t){e.$set(e.formContent,"solve_time",t)},expression:"formContent.solve_time"}})],1),o("a-form-model-item",{attrs:{label:"维修人员"}},[o("a-input",{attrs:{placeholder:"请输入",allowClear:!0},model:{value:e.formContent.implement_person,callback:function(t){e.$set(e.formContent,"implement_person",t)},expression:"formContent.implement_person"}})],1),o("a-form-model-item",{attrs:{label:"维修说明"}},[o("a-textarea",{attrs:{placeholder:"请输入",allowClear:!0,"auto-size":{minRows:2}},model:{value:e.formContent.solve_describe,callback:function(t){e.$set(e.formContent,"solve_describe",t)},expression:"formContent.solve_describe"}})],1),o("a-form-model-item",{attrs:{label:"维修费用",prop:"maintenance_costs"}},[o("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",allowClear:!0},model:{value:e.formContent.maintenance_costs,callback:function(t){e.$set(e.formContent,"maintenance_costs",t)},expression:"formContent.maintenance_costs"}})],1),o("a-form-model-item",{attrs:{label:"费用申请"}},[o("a-radio-group",{attrs:{disabled:e.isApplied},on:{change:e.onChangeYesOrNo},model:{value:e.formContent.yes_or_no,callback:function(t){e.$set(e.formContent,"yes_or_no",t)},expression:"formContent.yes_or_no"}},[o("a-radio",{attrs:{value:"1"}},[e._v("是")]),o("a-radio",{attrs:{value:"2"}},[e._v("否")])],1)],1),"1"===e.formContent.yes_or_no?o("a-form-model-item",{attrs:{label:"申请理由",prop:"application_reason"}},[o("a-textarea",{attrs:{placeholder:"请输入",allowClear:!0,"auto-size":{minRows:2},disabled:e.isApplied},model:{value:e.formContent.application_reason,callback:function(t){e.$set(e.formContent,"application_reason",t)},expression:"formContent.application_reason"}})],1):e._e(),"1"===e.formContent.yes_or_no?o("a-form-model-item",{attrs:{label:"审核人",prop:"reviewed_by"}},[o("a-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isApplied,placeholder:"请选择",allowClear:!0},model:{value:e.formContent.reviewed_by,callback:function(t){e.$set(e.formContent,"reviewed_by",t)},expression:"formContent.reviewed_by"}},e._l(e.formData.reviewed_by,(function(t){return o("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1):e._e()],1),o("div",{staticClass:"flex jscenter"},[o("h-button",{on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),o("div",{staticClass:"wt20"}),o("h-button",{attrs:{type:"info"},on:{click:e.handleOk}},[e._v("保存处置")]),"1"!==e.formContent.repair_examine_state?o("div",{staticClass:"wt20"}):e._e(),e.showCompleteSubmitBtn?o("h-button",{attrs:{type:"success"},on:{click:e.handleOk2}},[e._v(" 完成提交 ")]):e._e()],1)],1)],1)},r=[],a=o("0901"),i=o("b55a"),s=o("ca00"),l={data:function(){return{visible:!1,title:"维修处理",labelCol:{span:4},wrapperCol:{span:18},rules:{maintenance_costs:[{required:!0,message:"请输入维修费用",trigger:"blur"}],application_reason:[{required:!0,message:"请输入申请理由",trigger:"blur"}],reviewed_by:[{required:!0,message:"请选择审核人",trigger:"change"}]},formData:{solve_state:[],reviewed_by:[]},formContent:{solve_state:"2",yes_or_no:"2",maintenance_costs:0},isApplied:!1}},computed:{showCompleteSubmitBtn:function(){var e=this.formContent,t=null;return t="1"!==e.repair_examine_state&&!(!e.repair_examine_state&&"1"===e.yes_or_no),t}},methods:{dictTypeDropDown:function(){var e=this;Object(a["a"])({pageSize:20,sysRoleCode:"maintenance_audit"}).then((function(t){t.success&&(e.formData.reviewed_by=t.data.rows||[])}))},onChangeYesOrNo:function(e){e.target.value},solve:function(e){this.visible=!0,this.formContent=Object.assign({},this.$options.data().formContent),this.editPage(e.id),this.dictTypeDropDown()},editPage:function(e){var t=this;Object(i["j"])({id:e}).then((function(e){if(e.success){var o=e.data||{};t.formContent=Object(s["e"])(o),t.isApplied=!("1"!==t.formContent.yes_or_no)}}))},handleOk:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var o=JSON.parse(JSON.stringify(e.formContent));Object(i["c"])(o).then((function(t){t.success?(e.visible=!1,e.$message.success("保存成功！"),e.$emit("ok")):e.$message.error(JSON.stringify(t.message))}))}))},handleOk2:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var o=JSON.parse(JSON.stringify(e.formContent));Object(i["a"])(o).then((function(t){t.success?(e.visible=!1,e.$message.success("提交成功！"),e.$emit("ok")):e.$message.error(JSON.stringify(t.message))}))}))}}},c=l,u=o("0c7c"),m=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=m.exports}}]);