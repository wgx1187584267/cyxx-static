(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76765712"],{"507a2":function(e,t,a){},bbd7:function(e,t,a){"use strict";a("507a2")},e85f:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.hasPerm("sysVisLog:page")?a("x-card",[a("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"日志名称"}},[a("a-input",{attrs:{"allow-clear":"",placeholder:"请输入日志名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"访问类型"}},[a("a-select",{attrs:{"allow-clear":"",placeholder:"请选择访问类型"},model:{value:e.queryParam.visType,callback:function(t){e.$set(e.queryParam,"visType",t)},expression:"queryParam.visType"}},e._l(e.visTypeDict,(function(t,s){return a("a-select-option",{key:s,attrs:{value:t.code}},[e._v(e._s(t.value)+" ")])})),1)],1)],1),e.advanced?[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"是否成功"}},[a("a-select",{attrs:{placeholder:"请选择是否成功"},model:{value:e.queryParam.success,callback:function(t){e.$set(e.queryParam,"success",t)},expression:"queryParam.success"}},e._l(e.successDict,(function(t,s){return a("a-select-option",{key:s,attrs:{value:t.code}},[e._v(" "+e._s(t.value))])})),1)],1)],1),a("a-col",{attrs:{md:10,sm:24}},[a("a-form-item",{attrs:{label:"访问时间"}},[a("a-range-picker",{attrs:{"show-time":{hideDisabledOptions:!0,defaultValue:[e.moment("00:00:00","HH:mm:ss"),e.moment("23:59:59","HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"},model:{value:e.queryParam.dates,callback:function(t){e.$set(e.queryParam,"dates",t)},expression:"queryParam.dates"}})],1)],1)]:e._e(),a("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")]),a("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),a("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1)]):e._e(),a("a-card",{attrs:{bordered:!1}},[a("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"name",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"visTime",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"visType",fn:function(t){return a("span",{},[e._v(" "+e._s(e.visTypeFilter(t))+" ")])}},{key:"success",fn:function(t){return a("span",{},[e._v(" "+e._s(e.successFilter(t))+" ")])}},{key:"action",fn:function(t,s){return a("span",{},[a("span",{attrs:{slot:"action"},slot:"action"},[a("a",{on:{click:function(t){return e.$refs.detailsVislog.details(s)}}},[e._v("查看详情")])])])}}])},[e.hasPerm("sysVisLog:sysVisLog")?a("template",{slot:"operator"},[e.hasPerm("sysVisLog:delete")?a("a-popconfirm",{attrs:{placement:"top",title:"确认清空日志？"},on:{confirm:function(){return e.sysVisLogDelete()}}},[a("a-button",[e._v("清空日志")])],1):e._e()],1):e._e()],2),a("details-vislog",{ref:"detailsVislog"})],1)],1)},n=[],r=(a("4de4"),a("2af9")),c=a("487a"),i=a("fed3"),o=a("da95"),l=a("c1df"),u=a.n(l),d={components:{XCard:r["w"],STable:r["r"],Ellipsis:r["h"],detailsVislog:i["default"]},data:function(){var e=this;return{advanced:!1,queryParam:{},columns:[{title:"日志名称",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"访问类型",dataIndex:"visType",scopedSlots:{customRender:"visType"}},{title:"是否成功",dataIndex:"success",scopedSlots:{customRender:"success"}},{title:"IP",dataIndex:"ip"},{title:"浏览器",dataIndex:"browser"},{title:"时间",dataIndex:"visTime",scopedSlots:{customRender:"visTime"}},{title:"访问者",dataIndex:"account"},{title:"详情",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(c["f"])(Object.assign(t,e.switchingDate())).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],defaultExpandedKeys:[],visTypeDict:[],successDict:[]}},created:function(){this.sysEnumDataList()},methods:{moment:u.a,visTypeFilter:function(e){var t=this.visTypeDict.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},successFilter:function(e){var t=this.successDict.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},sysEnumDataList:function(){var e=this;Object(o["b"])({enumName:"LoginType"}).then((function(t){e.visTypeDict=t.data})),Object(o["b"])({enumName:"YesOrNot"}).then((function(t){e.successDict=t.data}))},switchingDate:function(){var e=this.queryParam.dates;null!=e&&(this.queryParam.searchBeginTime=u()(e[0]).format("YYYY-MM-DD HH:mm:ss"),this.queryParam.searchEndTime=u()(e[1]).format("YYYY-MM-DD HH:mm:ss"),e.length<1&&(delete this.queryParam.searchBeginTime,delete this.queryParam.searchEndTime));var t=JSON.parse(JSON.stringify(this.queryParam));return delete t.dates,t},sysVisLogDelete:function(){var e=this;Object(c["e"])().then((function(t){t.success?(e.$message.success("清空成功"),e.$refs.table.refresh(!0)):e.$message.error("清空失败："+t.message)}))},toggleAdvanced:function(){this.advanced=!this.advanced},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},m=d,f=(a("bbd7"),a("0c7c")),p=Object(f["a"])(m,s,n,!1,null,null,null);t["default"]=p.exports}}]);