(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5446be68"],{"4fb0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.hasPerm("sysApp:page")?s("x-card",[s("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[s("a-form",{attrs:{layout:"inline"}},[s("a-row",{attrs:{gutter:48}},[s("a-col",{attrs:{md:8,sm:24}},[s("a-form-item",{attrs:{label:"应用名称"}},[s("a-input",{attrs:{"allow-clear":"",placeholder:"请输入应用名称"},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}})],1)],1),s("a-col",{attrs:{md:8,sm:24}},[s("a-form-item",{attrs:{label:"唯一编码"}},[s("a-input",{attrs:{"allow-clear":"",placeholder:"请输入唯一编码"},model:{value:t.queryParam.code,callback:function(e){t.$set(t.queryParam,"code",e)},expression:"queryParam.code"}})],1)],1),s("a-col",{attrs:{md:8,sm:24}},[s("span",{staticClass:"table-page-search-submitButtons"},[s("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),s("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return t.queryParam={}}}},[t._v("重置")])],1)])],1)],1)],1)]):t._e(),s("a-card",{attrs:{bordered:!1}},[s("a-spin",{attrs:{spinning:t.loading}},[s("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loadData,alert:!0,rowKey:function(t){return t.id},rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onChange}},scopedSlots:t._u([{key:"active",fn:function(e){return s("span",{},[t._v(" "+t._s(t.activeFilter(e))+" ")])}},{key:"status",fn:function(e,a){return s("span",{},[s("a-popconfirm",{attrs:{placement:"top",title:0===e?"确定停用该应用？":"确定启用该应用？"},on:{confirm:function(){return t.editAppStatus(e,a)}}},[s("a",[t._v(t._s(t.statusFilter(e)))])])],1)}},{key:"action",fn:function(e,a){return s("span",{},[t.hasPerm("sysApp:edit")?s("a",{on:{click:function(e){return t.$refs.editForm.edit(a)}}},[t._v("编辑")]):t._e(),t.hasPerm("sysApp:edit")&t.hasPerm("sysApp:delete")?s("a-divider",{attrs:{type:"vertical"}}):t._e(),t.hasPerm("sysApp:delete")?s("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？"},on:{confirm:function(){return t.sysAppDelete(a)}}},[s("a",[t._v("删除")])]):t._e(),t.hasPerm("sysApp:setAsDefault")&t.hasPerm("sysApp:delete")&"N"==a.active||t.hasPerm("sysApp:edit")&t.hasPerm("sysApp:setAsDefault")&"N"==a.active?s("a-divider",{attrs:{type:"vertical"}}):t._e(),t.hasPerm("sysApp:setAsDefault")&"N"==a.active?s("a-popconfirm",{attrs:{placement:"topRight",title:"设置为默认应用？"},on:{confirm:function(){return t.sysDefault(a)}}},[s("a",[t._v("设为默认")])]):t._e()],1)}}])},[t.hasPerm("sysApp:add")?s("template",{slot:"operator"},[t.hasPerm("sysApp:add")?s("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:function(e){return t.$refs.addForm.add()}}},[t._v("新增应用")]):t._e()],1):t._e()],2),s("add-form",{ref:"addForm",on:{ok:t.handleOk}}),s("edit-form",{ref:"editForm",on:{ok:t.handleOk}})],1)],1)],1)},r=[],n=(s("4de4"),s("2af9")),o=s("2316"),i=s("126f"),c=s("6b52f"),l=s("316e"),u={components:{XCard:n["w"],STable:n["r"],editForm:c["default"],addForm:l["default"]},data:function(){var t=this;return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},queryParam:{},columns:[{title:"应用名称",dataIndex:"name"},{title:"唯一编码",dataIndex:"code"},{title:"是否默认",dataIndex:"active",scopedSlots:{customRender:"active"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort"}],loadData:function(e){return Object(o["b"])(Object.assign(e,t.queryParam)).then((function(t){return t.data}))},loading:!1,selectedRowKeys:[],selectedRows:[],statusDict:[],activeDict:[]}},created:function(){this.sysDictTypeDropDown(),(this.hasPerm("sysApp:edit")||this.hasPerm("sysApp:delete")||this.hasPerm("sysApp:setAsDefault"))&&this.columns.push({title:"操作",width:"200px",dataIndex:"action",scopedSlots:{customRender:"action"}})},methods:{activeFilter:function(t){var e=this.activeDict.filter((function(e){return e.code==t}));if(e.length>0)return e[0].value},statusFilter:function(t){var e=this.statusDict.filter((function(e){return e.code==t}));if(e.length>0)return e[0].value},sysDictTypeDropDown:function(){var t=this;Object(i["c"])({code:"yes_or_no"}).then((function(e){t.activeDict=e.data})),Object(i["c"])({code:"common_status"}).then((function(e){t.statusDict=e.data}))},handleOk:function(){this.$refs.table.refresh()},sysDefault:function(t){var e=this;this.loading=!0,Object(o["g"])({id:t.id}).then((function(t){e.loading=!1,t.success?(e.$message.success("设置成功"),e.$refs.table.refresh()):e.$message.error("设置失败："+t.message)}))},sysAppDelete:function(t){var e=this;this.loading=!0,Object(o["e"])(t).then((function(t){e.loading=!1,t.success?(e.$message.success("删除成功"),e.$refs.table.refresh()):e.$message.error("删除失败："+t.message)})).catch((function(t){e.$message.error("删除错误："+t.message)}))},editAppStatus:function(t,e){var s=this;0==t?this.status=1:1==t&&(this.status=0),Object(o["d"])({id:e.id,status:this.status}).then((function(t){t.success?(s.$message.success("操作成功"),s.$refs.table.refresh()):s.$message.error("操作失败："+t.message)}))},onChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e}}},d=u,p=(s("7c89"),s("0c7c")),f=Object(p["a"])(d,a,r,!1,null,"4944d898",null);e["default"]=f.exports},"77f6f":function(t,e,s){},"7c89":function(t,e,s){"use strict";s("77f6f")}}]);