(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a512e006"],{4015:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.hasPerm("sysOnlineUser:list")?s("x-card",[s("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[s("a-form",{attrs:{layout:"inline"}},[s("a-row",{attrs:{gutter:48}},[s("a-col",{attrs:{md:8,sm:24}},[s("a-form-item",{attrs:{label:"关键词"}},[s("a-input",{attrs:{"allow-clear":"",placeholder:"请输入姓名、账号"},model:{value:e.queryParam.searchValue,callback:function(t){e.$set(e.queryParam,"searchValue",t)},expression:"queryParam.searchValue"}})],1)],1),s("a-col",{attrs:{md:8,sm:24}},[s("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),s("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)],1)],1)],1)]):e._e(),s("a-card",{attrs:{bordered:!1}},[s("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"lastLoginAddress",fn:function(t){return s("span",{},[s("ellipsis",{attrs:{length:20,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"lastLoginBrowser",fn:function(t){return s("span",{},[s("ellipsis",{attrs:{length:20,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"action",fn:function(t,a){return s("span",{},[e.hasPerm("sysOnlineUser:forceExist")?s("a-popconfirm",{attrs:{placement:"topRight",title:"是否强制下线该用户？"},on:{confirm:function(){return e.forceExist(a)}}},[s("a",[e._v("强制下线")])]):e._e()],1)}}])})],1)],1)},n=[],r=s("2af9"),o=s("b775");function c(e){return Object(o["b"])({url:"/sysOnlineUser/list",method:"get",params:e})}function i(e){return Object(o["b"])({url:"/sysOnlineUser/forceExist",method:"post",data:e})}var l={components:{XCard:r["w"],STable:r["r"],Ellipsis:r["h"]},data:function(){var e=this;return{queryParam:{},columns:[{title:"用户Id",dataIndex:"userId"},{title:"账号",dataIndex:"account"},{title:"昵称",dataIndex:"name"},{title:"登录IP",dataIndex:"lastLoginIp"},{title:"登录时间",dataIndex:"lastTime"}],loading:!0,loadData:function(t){return c(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[]}},created:function(){this.hasPerm("sysOnlineUser:forceExist")&&this.columns.push({title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}})},mounted:function(){var e=this;setTimeout((function(){e.$refs.table.refresh(!0)}),1e3)},methods:{forceExist:function(e){var t=this,s=this;i(e).then((function(e){e.success?(t.$message.success("强制下线成功"),setTimeout((function(){s.$refs.table.refresh(!1)}),1e3)):t.$message.error("强制下线失败："+e.message)})).catch((function(e){t.$message.error("强制下线错误："+e.message)}))},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},u=l,d=(s("72ad"),s("0c7c")),f=Object(d["a"])(u,a,n,!1,null,null,null);t["default"]=f.exports},"72ad":function(e,t,s){"use strict";s("941d")},"941d":function(e,t,s){}}]);