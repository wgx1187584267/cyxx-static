(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f48da4b"],{"15b6":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"h",(function(){return r})),n.d(e,"d",(function(){return d})),n.d(e,"i",(function(){return l})),n.d(e,"g",(function(){return f}));var i=n("b775");function s(t){return Object(i["b"])({url:"/psychologicalQuestionnaire/questionnaireAdd",method:"post",data:t})}function a(t){return Object(i["b"])({url:"/psychologicalQuestionnaire/questionnaireEdit",method:"post",data:t})}function o(t){return Object(i["b"])({url:"/psychologicalQuestionnaire/questionnairePage",method:"post",data:t})}function u(t){return Object(i["b"])({url:"/psychologicalQuestionnaire/questionnaireList",method:"post",data:t})}function c(t){return Object(i["b"])({url:"/psychologicalQuestionnaire/questionnaireDelete",method:"post",data:t})}function r(t){return Object(i["b"])({url:"/psychologicalQuestionnaire/questionnaireState",method:"post",data:t})}function d(t){return Object(i["b"])({url:"/psychologicalQuestionnaire/questionnaireGet",method:"post",data:t})}function l(t){return Object(i["b"])({url:"/psychologicalQuestionnaire/questionnaireSubmit",method:"post",data:t})}function f(t){return Object(i["b"])({url:"/psychologicalQuestionnaire/questionnaireResultPage",method:"post",data:t})}},"2c34":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-modal",{attrs:{title:"从题库添加",width:900},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("a-row",{attrs:{gutter:20}},[n("a-col",{attrs:{span:9}},[n("a-input-search",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"输入问卷名称"},on:{search:t.onSearchQuestionnaire}}),n("a-menu",{attrs:{mode:"vertical"},on:{click:t.handleMenuClick},model:{value:t.defaultSelectedKeys,callback:function(e){t.defaultSelectedKeys=e},expression:"defaultSelectedKeys"}},t._l(t.list,(function(e){return n("a-menu-item",{key:e.id},[n("a-icon",{attrs:{type:"mail"}}),t._v(t._s(e.questionnaire_title))],1)})),1)],1),n("a-col",{attrs:{span:15}},[n("p",[t._v("请选择题块和题目")]),n("a-tree",{attrs:{"tree-data":t.treeData,checkable:"","checked-keys":t.checkedKeys,"expanded-keys":t.expandedKeys,"auto-expand-parent":t.autoExpandParent},on:{check:t.onCheck,expand:t.onExpand},scopedSlots:t._u([{key:"block",fn:function(e){return["root"==e.key?n("div",{staticClass:"root-item"},[t._v(" 全选 ")]):e.isLeaf?n("div",{staticClass:"question-item"},[n("div",{staticClass:"question-header"},[n("div",{class:e.data.must_answer?"starr":"",staticStyle:{width:"10%"}},[t._v(" "+t._s(t.getQuestionIndex(e.blcokId,e.key))+"、 ")]),n("div",{staticStyle:{width:"90%"}},[n("span",{domProps:{innerHTML:t._s(e.data.stem)}})])]),1==e.data.question_type||2==e.data.question_type?n("div",{staticClass:"question-options"},t._l(e.data.questionnaire_question_option,(function(i){return n("div",{key:i.id||i.sort,staticClass:"question-option"},[n("span",{class:1==e.data.question_type?e.data.question_answer==i.sort?"selCircular":"circular":e.data.question_answer.split("|").map(Number).includes(i.sort)?"selSquare":"square"}),n("span",{domProps:{innerHTML:t._s(i.content)}}),"1"==i.is_fill?n("span",[t._v("___")]):t._e()])})),0):t._e(),3==e.data.question_type?n("div",{staticClass:"question-judge-options"},[n("p",[n("span",{class:"true"==e.data.question_answer?"selCircular":"circular"}),t._v(" 正确 ")]),n("p",[n("span",{class:"false"==e.data.question_answer?"selCircular":"circular"}),t._v(" 错误 ")])]):t._e(),5==e.data.question_type?n("div",{staticClass:"question-essay-box"},[n("div",{staticClass:"rectangle"})]):t._e(),n("div",{staticClass:"question-meta"},[n("div",[t._v("问题分值："+t._s(e.data.score)+" 分")]),3===e.data.question_type?n("div",[t._v("问题答案："+t._s("false"==e.data.question_answer?"错误":"true"==e.data.question_answer?"正确":"")+" ")]):t._e(),4===e.data.question_type?n("div",{staticStyle:{display:"flex","flex-direction":"row","flex-wrap":"nowrap","justify-content":"flex-start","align-items":"flex-start"}},[n("div",{staticStyle:{width:"60px"}},[t._v("问题答案：")]),n("div",t._l(e.data.questionnaire_question_option,(function(e){return n("div",{key:e.id||e.key},[n("span",{staticClass:"answerContent",domProps:{innerHTML:t._s(e.content)}})])})),0)]):t._e(),5===e.data.question_type?n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{width:"60px"}},[t._v("问题答案：")]),n("span",{staticClass:"answerContent",domProps:{innerHTML:t._s(e.data.question_answer)}})]):t._e(),n("div",{staticStyle:{display:"inline-flex"}},[n("div",{staticStyle:{width:"60px"}},[t._v("问题解析：")]),n("span",{domProps:{innerHTML:t._s(e.data.analysis)}})])])]):n("div",{staticClass:"subject-item"},[t._v(" "+t._s(e.title)+" ")])]}}])})],1)],1)],1)],1)},s=[],a=n("d0ff"),o=n("54f8"),u=n("f3f3"),c=(n("159b"),n("4de4"),n("caad"),n("2532"),n("d3b7"),n("25f0"),n("7db0"),n("d81d"),n("2ca0"),n("ac1f"),n("5319"),n("99af"),n("c740"),n("13d5"),n("15b6")),r={data:function(){return{visible:!1,list:[],defaultSelectedKeys:[],treeData:[],checkedKeys:[],expandedKeys:[],autoExpandParent:!0,checkAll:!1,selectedQuestions:{},selectQuestionnaireQuestion:[]}},created:function(){},methods:{showModal:function(){this.getQuestionnaireList(),this.visible=!0,this.resetState()},resetState:function(){this.checkedKeys=[],this.expandedKeys=[],this.selectedQuestions={},this.checkAll=!1},handleOk:function(){var t=this,e=this.defaultSelectedKeys[0],n=[];if(!e||!this.selectedQuestions[e])return this.$emit("ok",[]),void(this.visible=!1);this.selectQuestionnaireQuestion.forEach((function(i){var s=t.selectedQuestions[e],a=i.questionnaire_question.filter((function(t){return s.includes(t.id.toString())}));a.length>0&&n.push(Object(u["a"])(Object(u["a"])({},i),{},{questionnaire_question:a}))})),this.$emit("ok",n),this.visible=!1},handleMenuClick:function(t){var e=t.key;this.defaultSelectedKeys=[e],this.resetState();var n=this.list.find((function(t){return t.id==e}));n&&(this.selectQuestionnaireQuestion=n.question_block||[]),this.generateTreeData(e)},onCheck:function(t,e){this.checkedKeys=t;var n=this.defaultSelectedKeys[0];this.selectedQuestions[n]=t.filter((function(t){return t.startsWith("question_")})).map((function(t){return t.replace("question_","")})),this.updateCheckAllStatus()},onExpand:function(t){this.expandedKeys=t},onSearchQuestionnaire:function(t){this.getQuestionnaireList(t)},getQuestionnaireList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(c["e"])({questionnaire_title:e}).then((function(e){var n,i;e.success&&(t.list=e.data,t.defaultSelectedKeys=[(null===(n=t.list[0])||void 0===n?void 0:n.id)||0],t.selectQuestionnaireQuestion=(null===(i=t.list[0])||void 0===i?void 0:i.question_block)||[],t.generateTreeData(t.defaultSelectedKeys[0]))}))},generateTreeData:function(t){var e=this,n=this.list.find((function(e){return e.id==t}));if(n&&n.question_block){var i={title:"全选",key:"root",isLeaf:!1,scopedSlots:{title:"block"},children:n.question_block.map((function(t){return{title:t.question_block_name,key:"subject_".concat(t.id),isLeaf:!1,scopedSlots:{title:"block"},children:t.questionnaire_question.map((function(n){return{title:"".concat(n.must_answer?"*":"").concat(e.getQuestionIndexInSubject(t.id,n.id),"、").concat(n.stem),key:"question_".concat(n.id),isLeaf:!0,scopedSlots:{title:"block"},blcokId:t.id,data:n}}))}}))};this.treeData=[i],this.expandedKeys=["root"],n.question_block.length>0&&this.expandedKeys.push("subject_".concat(n.question_block[0].id))}else this.treeData=[]},getQuestionIndexInSubject:function(t,e){var n=this.selectQuestionnaireQuestion.find((function(e){return e.id==t}));if(!n||!n.questionnaire_question)return"";var i=n.questionnaire_question.findIndex((function(t){return t.id==e}));return i>=0?i+1:""},getQuestionIndex:function(t,e){var n=e.replace("question_","");return this.getQuestionIndexInSubject(t,n)},findQuestionById:function(t){var e,n=Object(o["a"])(this.selectQuestionnaireQuestion);try{for(n.s();!(e=n.n()).done;){var i=e.value,s=i.questionnaire_question.find((function(e){return e.id==parseInt(t)}));if(s)return s}}catch(a){n.e(a)}finally{n.f()}return null},updateCheckAllStatus:function(){var t,e=this.defaultSelectedKeys[0],n=this.selectQuestionnaireQuestion.reduce((function(t,e){return[].concat(Object(a["a"])(t),Object(a["a"])(e.questionnaire_question.map((function(t){return t.id}))))}),[]);this.checkAll=n.length>0&&(null===(t=this.selectedQuestions[e])||void 0===t?void 0:t.length)==n.length}}},d=r,l=(n("b291"),n("d73d"),n("0c7c")),f=Object(l["a"])(d,i,s,!1,null,"8b4b2e68",null);e["default"]=f.exports},b291:function(t,e,n){"use strict";n("cad4")},cad4:function(t,e,n){},d73d:function(t,e,n){"use strict";n("e2ab")},e2ab:function(t,e,n){}}]);