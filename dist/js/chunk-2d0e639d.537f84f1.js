(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e639d"],{"989a":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-row",{attrs:{gutter:15}},[t("a-col",{attrs:{span:24}},[t("x-card",[t("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48,type:"flex",justify:"start"}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"学年学期"}},[t("SelYearSemesterCascader",{attrs:{changeOnSelect:!0,placeholder:"请选择"},model:{value:e.queryParam.year_semester,callback:function(a){e.$set(e.queryParam,"year_semester",a)},expression:"queryParam.year_semester"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"学段"}},[t("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.academic_stage,callback:function(a){e.$set(e.queryParam,"academic_stage",a)},expression:"queryParam.academic_stage"}},e._l(e.queryContent.academic_stage,(function(a){return t("a-select-option",{key:a.code,attrs:{value:a.code}},[e._v(e._s(a.value))])})),1)],1)],1),e.advanced?[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"获奖类型"}},[t("TypeTreeSelect",{model:{value:e.queryParam.develop_type_id,callback:function(a){e.$set(e.queryParam,"develop_type_id",a)},expression:"queryParam.develop_type_id"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"证书领域"}},[t("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.award_field,callback:function(a){e.$set(e.queryParam,"award_field",a)},expression:"queryParam.award_field"}},e._l(e.queryContent.award_field,(function(a){return t("a-select-option",{key:a.code,attrs:{value:a.code}},[e._v(e._s(a.value))])})),1)],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"发证单位"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:e.queryParam.organizer,callback:function(a){e.$set(e.queryParam,"organizer",a)},expression:"queryParam.organizer"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"学校组织科室"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:e.queryParam.organizational,callback:function(a){e.$set(e.queryParam,"organizational",a)},expression:"queryParam.organizational"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"获奖人"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:e.queryParam.publish_person,callback:function(a){e.$set(e.queryParam,"publish_person",a)},expression:"queryParam.publish_person"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"活动名称"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:e.queryParam.publish_name,callback:function(a){e.$set(e.queryParam,"publish_name",a)},expression:"queryParam.publish_name"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"作品名称"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:e.queryParam.title_of_work,callback:function(a){e.$set(e.queryParam,"title_of_work",a)},expression:"queryParam.title_of_work"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"获奖时间"}},[t("a-range-picker",{staticStyle:{width:"100%"},attrs:{valueFormat:"YYYY-MM-DD"},model:{value:e.queryParam.dates,callback:function(a){e.$set(e.queryParam,"dates",a)},expression:"queryParam.dates"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"获奖级别"}},[t("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.award_level,callback:function(a){e.$set(e.queryParam,"award_level",a)},expression:"queryParam.award_level"}},e._l(e.queryContent.award_level,(function(a){return t("a-select-option",{key:a.code,attrs:{value:a.code}},[e._v(e._s(a.value))])})),1)],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"获奖等级"}},[t("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.award_rank,callback:function(a){e.$set(e.queryParam,"award_rank",a)},expression:"queryParam.award_rank"}},e._l(e.queryContent.award_rank,(function(a){return t("a-select-option",{key:a.code,attrs:{value:a.code}},[e._v(e._s(a.value))])})),1)],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"审核状态"}},[t("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.examine_state,callback:function(a){e.$set(e.queryParam,"examine_state",a)},expression:"queryParam.examine_state"}},e._l(e.queryContent.examine_state,(function(a){return t("a-select-option",{key:a.code,attrs:{value:a.code}},[e._v(e._s(a.value))])})),1)],1)],1)]:e._e(),t("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[t("h-search-button",{on:{click:function(a){return e.$refs.table.refresh(!0)}}}),t("h-reset-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}}),t("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),t("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1)]),t("a-card",{attrs:{bordered:!1}},[t("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!1,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"examine_state",fn:function(a){return t("span",{},["0"===a?t("a-tag",{attrs:{color:"orange"}},[e._v("未审核")]):e._e(),"1"===a?t("a-tag",{attrs:{color:"cyan"}},[e._v("审核中")]):e._e(),"2"===a?t("a-tag",{attrs:{color:"green"}},[e._v("审核通过")]):e._e(),"3"===a?t("a-tag",{attrs:{color:"red"}},[e._v("不通过")]):e._e()],1)}},{key:"action",fn:function(a,r){return t("span",{},[t("h-link",{attrs:{type:"warning",disabled:!(["0","3"].includes(r.examine_state)&&r.add_person_id===e.$userInfo.id)},on:{click:function(a){return e.$refs.addEditForm.edit(r)}}},[e._v(" 编辑 ")]),t("a-divider",{attrs:{type:"vertical"}}),t("h-link",{attrs:{type:"success"},on:{click:function(a){return e.$refs.detaileModal.show(r)}}},[e._v("详细")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？",disabled:!(["0","3"].includes(r.examine_state)&&r.add_person_id===e.$userInfo.id)},on:{confirm:function(){return e.handleDelete([r.id])}}},[t("h-link",{attrs:{type:"danger",disabled:!(["0","3"].includes(r.examine_state)&&r.add_person_id===e.$userInfo.id)}},[e._v(" 删除 ")])],1),t("a-divider",{attrs:{type:"vertical"}}),t("a-popconfirm",{attrs:{lacement:"topRight",title:"确认提交审核？"},on:{confirm:function(){return e.postRecord([r.id])}}},[t("a",{attrs:{disabled:!(["0","3"].includes(r.examine_state)&&r.add_person_id===e.$userInfo.id)}},[e._v("送审")])]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{attrs:{disabled:!(["1"].includes(r.examine_state)&&r.examine_permission)},on:{click:function(a){return e.$refs.examineForm.examine([r.id])}}},[e._v(" 审核 ")])],1)}}])},[t("template",{slot:"operator"},[t("a-space",[t("h-button",{attrs:{type:"success",icon:"plus"},on:{click:function(a){return e.$refs.addEditForm.add()}}},[e._v("添加")]),e.hasPerm("BatchDelete:SchoolDevelopData")?t("a-popconfirm",{attrs:{placement:"topRight",title:"确认批量删除？"},on:{confirm:function(){return e.handleDelete(e.selectedRowKeys)}}},[t("a-button",{attrs:{type:"danger",icon:"delete"}},[e._v("批量删除")])],1):e._e(),t("a-button",{attrs:{icon:"down-circle",loading:e.exportLoading},on:{click:e.exportFile}},[e._v("导出")])],1)],1)],2)],1)],1)],1),t("AddEditForm",{ref:"addEditForm",on:{ok:e.handleOk}}),t("ExamineForm",{ref:"examineForm",on:{ok:e.handleOk}}),t("DetaileModal",{ref:"detaileModal"})],1)},n=[],s=(t("7db0"),t("caad"),t("a15b"),t("2af9")),l=t("126f"),o=t("1429"),i=t("a4c7"),c=t("ca00"),d=t("aed0"),m=t("a9f4"),u=t("4354"),_=t("7ea5"),f={components:{STable:s["r"],XCard:s["w"],AddEditForm:m["default"],DetaileModal:u["default"],ExamineForm:_["default"],TypeTreeSelect:d["default"]},data:function(){var e=this;return{exportLoading:!1,advanced:!1,queryParam:{},queryContent:{award_rank:[],award_level:[],examine_state:[],academic_stage:[],award_field:[]},columns:[{title:"学年学期",align:"center",dataIndex:"school_year_semester",customRender:function(e,a){return a.school_year_name+a.semester_name}},{title:"获奖类型",align:"center",dataIndex:"develop_type_name"},{title:"证书领域",align:"center",dataIndex:"award_field_name"},{title:"发证单位",align:"center",dataIndex:"organizer"},{title:"学校组织科室",align:"center",dataIndex:"organizational"},{title:"获奖人",align:"center",dataIndex:"publish_person"},{title:"活动名称",align:"center",dataIndex:"publish_name"},{title:"作品名称",align:"center",dataIndex:"title_of_work"},{title:"获奖级别",align:"center",dataIndex:"award_level_name"},{title:"获奖等级",align:"center",dataIndex:"award_rank_name"},{title:"获奖时间",align:"center",dataIndex:"award_time",customRender:function(a,t){return e.$formatDateHy(a)}},{title:"审核状态",align:"center",dataIndex:"examine_state",scopedSlots:{customRender:"examine_state"}},{title:"操作",width:"240px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(a){return Object(i["f"])(Object.assign(a,e.formatParameters())).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[]}},created:function(){this.dictTypeDropDown()},methods:{dictTypeDropDown:function(){var e=this;Object(l["c"])({code:"award_rank"}).then((function(a){e.queryContent.award_rank=a.data})),Object(l["c"])({code:"award_level"}).then((function(a){e.queryContent.award_level=a.data})),Object(l["c"])({code:"examine_state"}).then((function(a){e.queryContent.examine_state=a.data})),Object(l["c"])({code:"award_field"}).then((function(a){e.queryContent.award_field=a.data})),Object(o["c"])({code:"academic_stage"}).then((function(a){e.queryContent.academic_stage=a.data}))},formatParameters:function(){var e=JSON.parse(JSON.stringify(this.queryParam));return e.year_semester&&e.year_semester.length&&e.year_semester[0]?e.school_year=e.year_semester[0]:delete e.school_year,e.year_semester&&e.year_semester.length&&e.year_semester[1]?e.semester=e.year_semester[1]:delete e.semester,delete e.year_semester,e.dates&&e.dates.length?e.award_time_start=e.dates[0]:delete e.award_time_start,e.dates&&e.dates.length?e.award_time_end=e.dates[1]:delete e.award_time_end,delete e.dates,e},handleDelete:function(e){var a=this,t=this.selectedRows.find((function(e){return["1","2"].includes(e.examine_state)}));if(t)return this.$message.warning("有审核中或审核通过的数据，不能删除！"),!1;var r={ids:e.join("|")};Object(i["b"])(r).then((function(e){e.success?(a.$message.success("删除成功"),a.$refs.table.refresh()):a.$message.error("删除失败")}))},postRecord:function(e){var a=this,t={ids:e.join("|")};Object(i["h"])(t).then((function(e){e.success?(a.$message.success("提交成功"),a.$refs.table.refresh()):a.$message.error("提交失败")}))},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},toggleAdvanced:function(){this.advanced=!this.advanced},handleOk:function(){this.$refs.table.refresh()},exportFile:function(){var e=this,a=this.formatParameters();this.exportLoading=!0,Object(i["e"])(a).then((function(a){Object(c["b"])(a),e.exportLoading=!1})).catch((function(){e.$message.error("接口报错")}))}}},p=f,y=t("0c7c"),h=Object(y["a"])(p,r,n,!1,null,"7ce6f812",null);a["default"]=h.exports}}]);