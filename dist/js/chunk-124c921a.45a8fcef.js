(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-124c921a"],{"095f":function(e,t,i){},cbf1:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-spin",{attrs:{spinning:e.cardLoading}},[e.hasPerm("sysFileInfo:page")?i("x-card",[i("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[i("a-form",{attrs:{layout:"inline"}},[i("a-row",{attrs:{gutter:48}},[i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"存储位置"}},[i("a-select",{attrs:{placeholder:"请选择存储位置"},model:{value:e.queryParam.fileLocation,callback:function(t){e.$set(e.queryParam,"fileLocation",t)},expression:"queryParam.fileLocation"}},e._l(e.fileLocationDictTypeDropDown,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.code}},[e._v(" "+e._s(t.value))])})),1)],1)],1),i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"文件仓库"}},[i("a-input",{attrs:{placeholder:"请输入文件仓库"},model:{value:e.queryParam.fileBucket,callback:function(t){e.$set(e.queryParam,"fileBucket",t)},expression:"queryParam.fileBucket"}})],1)],1),e.advanced?[i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"文件名称"}},[i("a-input",{attrs:{placeholder:"请输入文件名称（上传时候的文件名）"},model:{value:e.queryParam.fileOriginName,callback:function(t){e.$set(e.queryParam,"fileOriginName",t)},expression:"queryParam.fileOriginName"}})],1)],1)]:e._e(),i("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[i("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[i("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),i("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")]),i("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),i("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1)]):e._e(),i("a-card",{attrs:{bordered:!1}},[i("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"fileOriginName",fn:function(t){return i("span",{},[i("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"fileObjectName",fn:function(t){return i("span",{},[i("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"fileLocation",fn:function(t){return i("span",{},[e._v(" "+e._s(e.fileLocationFilter(t))+" ")])}},{key:"fileSuffix",fn:function(t){return i("span",{},[i("a-tag",{attrs:{color:"blue"}},[e._v(e._s(t))])],1)}},{key:"action",fn:function(t,a){return i("span",{},[e.hasPerm("sysFileInfo:download")?i("a",{on:{click:function(t){return e.sysFileInfoDownload(a)}}},[e._v("下载")]):e._e(),e.hasPerm("sysFileInfo:download")&e.hasPerm("sysFileInfo:detail")?i("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:detail")?i("a",{on:{click:function(t){return e.$refs.detailForm.detail(a)}}},[e._v("详情")]):e._e(),e.hasPerm("sysFileInfo:detail")&e.hasPerm("sysFileInfo:delete")?i("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:delete")?i("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？"},on:{confirm:function(){return e.sysFileInfoDelete(a)}}},[i("a",[e._v("删除")])]):e._e(),(e.hasPerm("sysFileInfo:preview")&"png"===a.fileSuffix||"jpeg"===a.fileSuffix||"jpg"===a.fileSuffix||"gif"===a.fileSuffix||"tif"===a.fileSuffix||"bmp"===a.fileSuffix)&e.hasPerm("sysFileInfo:delete")?i("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:preview")&"png"===a.fileSuffix||"jpeg"===a.fileSuffix||"jpg"===a.fileSuffix||"gif"===a.fileSuffix||"tif"===a.fileSuffix||"bmp"===a.fileSuffix?i("a",{on:{click:function(t){return e.$refs.previewForm.preview(a)}}},[e._v("预览")]):e._e(),(e.hasPerm("sysFileInfo:preview")&"doc"===a.fileSuffix||"docx"===a.fileSuffix||"xls"===a.fileSuffix||"xlsx"===a.fileSuffix)&e.hasPerm("sysFileInfo:delete")?i("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:preview")&"doc"===a.fileSuffix||"docx"===a.fileSuffix||"xls"===a.fileSuffix||"xlsx"===a.fileSuffix?i("a",{on:{click:function(t){return e.previewMicrosoft(a)}}},[e._v("预览")]):e._e()],1)}}])},[e.hasPerm("sysFileInfo:upload")?i("template",{slot:"operator"},[e.hasPerm("sysFileInfo:upload")?i("a-upload",{attrs:{customRequest:e.customRequest,multiple:!0,showUploadList:!1,name:"file"}},[i("a-button",[i("a-icon",{attrs:{type:"upload"}}),e._v("上传文件 ")],1),e.isUpload?i("a-progress",{attrs:{percent:e.percent}}):e._e()],1):e._e()],1):e._e()],2),e.hasPerm("sysFileInfo:detail")?i("detail-form",{ref:"detailForm",on:{ok:e.handleOk}}):e._e(),e.hasPerm("sysFileInfo:preview")?i("preview-form",{ref:"previewForm"}):e._e()],1)],1)},s=[],n=(i("4de4"),i("2af9")),o=i("126f"),r=i("6597"),l=i("7e37"),c=i("f66a"),f=i("ca00"),d={components:{XCard:n["w"],STable:n["r"],Ellipsis:n["h"],detailForm:l["default"],previewForm:c["default"]},data:function(){var e=this;return{advanced:!1,queryParam:{},columns:[{title:"存储位置",dataIndex:"fileLocation",scopedSlots:{customRender:"fileLocation"}},{title:"文件仓库",dataIndex:"fileBucket"},{title:"文件名称",dataIndex:"fileOriginName",scopedSlots:{customRender:"fileOriginName"}},{title:"文件后缀",dataIndex:"fileSuffix",scopedSlots:{customRender:"fileSuffix"}},{title:"文件大小",dataIndex:"fileSizeInfo"},{title:"唯一标识id",dataIndex:"fileObjectName",scopedSlots:{customRender:"fileObjectName"}}],loadData:function(t){return Object(r["c"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},cardLoading:!1,fileLocationDictTypeDropDown:[],selectedRowKeys:[],selectedRows:[],isUpload:!1,percent:0}},created:function(){this.sysDictTypeDropDown(),(this.hasPerm("sysPos:edit")||this.hasPerm("sysPos:delete"))&&this.columns.push({title:"操作",width:"200px",dataIndex:"action",scopedSlots:{customRender:"action"}})},methods:{fileLocationFilter:function(e){var t=this.fileLocationDictTypeDropDown.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},previewMicrosoft:function(e){window.open("https://view.officeapps.live.com/op/view.aspx?src=http://182.40.103.156:5573//sysFileInfo/download?id="+e.id)},sysDictTypeDropDown:function(){var e=this;Object(o["c"])({code:"file_storage_location"}).then((function(t){e.fileLocationDictTypeDropDown=t.data}))},sysFileInfoDownload:function(e){var t=this;this.cardLoading=!0,Object(r["b"])({id:e.id}).then((function(e){t.cardLoading=!1,Object(f["c"])(e)})).catch((function(e){t.cardLoading=!1,t.$message.error("下载错误：获取文件流错误")}))},sysFileInfoDelete:function(e){var t=this;Object(r["a"])(e).then((function(e){e.success?(t.$message.success("删除成功"),t.$refs.table.refresh()):t.$message.error("删除失败："+e.message)})).catch((function(e){t.$message.error("删除错误："+e.message)}))},toggleAdvanced:function(){this.advanced=!this.advanced},setUploadProcess:function(e){this.percent=e,100==this.percent&&(this.percent=0,this.isUpload=!1)},customRequest:function(e){var t=this;this.isUpload=!0,this.percent=0;var i=new FormData;i.append("file",e.file),Object(r["e"])(i,(function(e){return t.setUploadProcess(e)})).then((function(e){e.success?(t.$message.success("上传成功"),t.$refs.table.refresh()):t.$message.error("上传失败："+e.message)}))},handleOk:function(){this.$refs.table.refresh()},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},u=d,p=(i("eedc"),i("0c7c")),m=Object(p["a"])(u,a,s,!1,null,null,null);t["default"]=m.exports},eedc:function(e,t,i){"use strict";i("095f")}}]);