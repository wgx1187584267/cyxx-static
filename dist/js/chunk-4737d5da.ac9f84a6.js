(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4737d5da","chunk-2d0e22e8","chunk-2d22d071"],{"095f":function(e,t,i){},"7e37":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{attrs:{title:"文件信息详情",footer:null,width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[i("a-spin",{attrs:{spinning:e.confirmLoading}},[i("a-form",{attrs:{form:e.form}},[i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),i("a-form-item",{attrs:{label:"文件存储位置",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.fileDetail.fileLocation)+" ")]),i("a-form-item",{attrs:{label:"文件仓库",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.fileDetail.fileBucket)+" ")]),i("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"文件名称"}},[e._v(" "+e._s(e.fileDetail.fileOriginName)+" ")]),i("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"文件后缀"}},[e._v(" "+e._s(e.fileDetail.fileSuffix)+" ")]),i("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"文件大小"}},[e._v(" "+e._s(e.fileDetail.fileSizeKb)+" ")]),i("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"唯一标识"}},[e._v(" "+e._s(e.fileDetail.fileObjectName)+" ")]),i("a-form-item",{attrs:{label:"存储路径",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.fileDetail.filePath)+" ")])],1)],1)],1)},l=[],s={data:function(){return{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:15}},fileDetail:[],visible:!1,confirmLoading:!1,form:this.$form.createForm(this)}},methods:{detail:function(e){this.fileDetail=e,this.visible=!0},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},n=s,o=i("0c7c"),r=Object(o["a"])(n,a,l,!1,null,null,null);t["default"]=r.exports},cbf1:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-spin",{attrs:{spinning:e.cardLoading}},[e.hasPerm("sysFileInfo:page")?i("x-card",[i("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[i("a-form",{attrs:{layout:"inline"}},[i("a-row",{attrs:{gutter:48}},[i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"存储位置"}},[i("a-select",{attrs:{placeholder:"请选择存储位置"},model:{value:e.queryParam.fileLocation,callback:function(t){e.$set(e.queryParam,"fileLocation",t)},expression:"queryParam.fileLocation"}},e._l(e.fileLocationDictTypeDropDown,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.code}},[e._v(" "+e._s(t.value))])})),1)],1)],1),i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"文件仓库"}},[i("a-input",{attrs:{placeholder:"请输入文件仓库"},model:{value:e.queryParam.fileBucket,callback:function(t){e.$set(e.queryParam,"fileBucket",t)},expression:"queryParam.fileBucket"}})],1)],1),e.advanced?[i("a-col",{attrs:{md:8,sm:24}},[i("a-form-item",{attrs:{label:"文件名称"}},[i("a-input",{attrs:{placeholder:"请输入文件名称（上传时候的文件名）"},model:{value:e.queryParam.fileOriginName,callback:function(t){e.$set(e.queryParam,"fileOriginName",t)},expression:"queryParam.fileOriginName"}})],1)],1)]:e._e(),i("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[i("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[i("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),i("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")]),i("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),i("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1)]):e._e(),i("a-card",{attrs:{bordered:!1}},[i("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"fileOriginName",fn:function(t){return i("span",{},[i("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"fileObjectName",fn:function(t){return i("span",{},[i("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"fileLocation",fn:function(t){return i("span",{},[e._v(" "+e._s(e.fileLocationFilter(t))+" ")])}},{key:"fileSuffix",fn:function(t){return i("span",{},[i("a-tag",{attrs:{color:"blue"}},[e._v(e._s(t))])],1)}},{key:"action",fn:function(t,a){return i("span",{},[e.hasPerm("sysFileInfo:download")?i("a",{on:{click:function(t){return e.sysFileInfoDownload(a)}}},[e._v("下载")]):e._e(),e.hasPerm("sysFileInfo:download")&e.hasPerm("sysFileInfo:detail")?i("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:detail")?i("a",{on:{click:function(t){return e.$refs.detailForm.detail(a)}}},[e._v("详情")]):e._e(),e.hasPerm("sysFileInfo:detail")&e.hasPerm("sysFileInfo:delete")?i("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:delete")?i("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？"},on:{confirm:function(){return e.sysFileInfoDelete(a)}}},[i("a",[e._v("删除")])]):e._e(),(e.hasPerm("sysFileInfo:preview")&"png"===a.fileSuffix||"jpeg"===a.fileSuffix||"jpg"===a.fileSuffix||"gif"===a.fileSuffix||"tif"===a.fileSuffix||"bmp"===a.fileSuffix)&e.hasPerm("sysFileInfo:delete")?i("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:preview")&"png"===a.fileSuffix||"jpeg"===a.fileSuffix||"jpg"===a.fileSuffix||"gif"===a.fileSuffix||"tif"===a.fileSuffix||"bmp"===a.fileSuffix?i("a",{on:{click:function(t){return e.$refs.previewForm.preview(a)}}},[e._v("预览")]):e._e(),(e.hasPerm("sysFileInfo:preview")&"doc"===a.fileSuffix||"docx"===a.fileSuffix||"xls"===a.fileSuffix||"xlsx"===a.fileSuffix)&e.hasPerm("sysFileInfo:delete")?i("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:preview")&"doc"===a.fileSuffix||"docx"===a.fileSuffix||"xls"===a.fileSuffix||"xlsx"===a.fileSuffix?i("a",{on:{click:function(t){return e.previewMicrosoft(a)}}},[e._v("预览")]):e._e()],1)}}])},[e.hasPerm("sysFileInfo:upload")?i("template",{slot:"operator"},[e.hasPerm("sysFileInfo:upload")?i("a-upload",{attrs:{customRequest:e.customRequest,multiple:!0,showUploadList:!1,name:"file"}},[i("a-button",[i("a-icon",{attrs:{type:"upload"}}),e._v("上传文件 ")],1),e.isUpload?i("a-progress",{attrs:{percent:e.percent}}):e._e()],1):e._e()],1):e._e()],2),e.hasPerm("sysFileInfo:detail")?i("detail-form",{ref:"detailForm",on:{ok:e.handleOk}}):e._e(),e.hasPerm("sysFileInfo:preview")?i("preview-form",{ref:"previewForm"}):e._e()],1)],1)},l=[],s=(i("4de4"),i("2af9")),n=i("126f"),o=i("6597"),r=i("7e37"),c=i("f66a"),f=i("ca00"),d={components:{XCard:s["w"],STable:s["r"],Ellipsis:s["h"],detailForm:r["default"],previewForm:c["default"]},data:function(){var e=this;return{advanced:!1,queryParam:{},columns:[{title:"存储位置",dataIndex:"fileLocation",scopedSlots:{customRender:"fileLocation"}},{title:"文件仓库",dataIndex:"fileBucket"},{title:"文件名称",dataIndex:"fileOriginName",scopedSlots:{customRender:"fileOriginName"}},{title:"文件后缀",dataIndex:"fileSuffix",scopedSlots:{customRender:"fileSuffix"}},{title:"文件大小",dataIndex:"fileSizeInfo"},{title:"唯一标识id",dataIndex:"fileObjectName",scopedSlots:{customRender:"fileObjectName"}}],loadData:function(t){return Object(o["c"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},cardLoading:!1,fileLocationDictTypeDropDown:[],selectedRowKeys:[],selectedRows:[],isUpload:!1,percent:0}},created:function(){this.sysDictTypeDropDown(),(this.hasPerm("sysPos:edit")||this.hasPerm("sysPos:delete"))&&this.columns.push({title:"操作",width:"200px",dataIndex:"action",scopedSlots:{customRender:"action"}})},methods:{fileLocationFilter:function(e){var t=this.fileLocationDictTypeDropDown.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},previewMicrosoft:function(e){window.open("https://view.officeapps.live.com/op/view.aspx?src=http://182.40.103.156:5573//sysFileInfo/download?id="+e.id)},sysDictTypeDropDown:function(){var e=this;Object(n["c"])({code:"file_storage_location"}).then((function(t){e.fileLocationDictTypeDropDown=t.data}))},sysFileInfoDownload:function(e){var t=this;this.cardLoading=!0,Object(o["b"])({id:e.id}).then((function(e){t.cardLoading=!1,Object(f["c"])(e)})).catch((function(e){t.cardLoading=!1,t.$message.error("下载错误：获取文件流错误")}))},sysFileInfoDelete:function(e){var t=this;Object(o["a"])(e).then((function(e){e.success?(t.$message.success("删除成功"),t.$refs.table.refresh()):t.$message.error("删除失败："+e.message)})).catch((function(e){t.$message.error("删除错误："+e.message)}))},toggleAdvanced:function(){this.advanced=!this.advanced},setUploadProcess:function(e){this.percent=e,100==this.percent&&(this.percent=0,this.isUpload=!1)},customRequest:function(e){var t=this;this.isUpload=!0,this.percent=0;var i=new FormData;i.append("file",e.file),Object(o["e"])(i,(function(e){return t.setUploadProcess(e)})).then((function(e){e.success?(t.$message.success("上传成功"),t.$refs.table.refresh()):t.$message.error("上传失败："+e.message)}))},handleOk:function(){this.$refs.table.refresh()},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},u=d,p=(i("eedc"),i("0c7c")),m=Object(p["a"])(u,a,l,!1,null,null,null);t["default"]=m.exports},eedc:function(e,t,i){"use strict";i("095f")},f66a:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{attrs:{title:"预览图片",footer:null,width:900,visible:e.visible},on:{cancel:e.handleCancel}},[i("a-spin",{attrs:{spinning:e.divLoading}},[i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{"max-width":"99%"},attrs:{src:e.src}})])])],1)},l=[],s=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("6597")),n={data:function(){return{visible:!1,src:"",divLoading:!1}},methods:{preview:function(e){this.visible=!0,this.divLoading=!0,this.sysFileInfoPreview(e)},sysFileInfoPreview:function(e){var t=this;Object(s["d"])({id:e.id}).then((function(e){t.divLoading=!1,t.downloadfile(e)})).catch((function(e){t.divLoading=!1,t.$message.error("预览错误："+e.message)}))},downloadfile:function(e){var t=new Blob([e]);this.src=window.URL.createObjectURL(t)},handleCancel:function(){this.src="",this.visible=!1}}},o=n,r=i("0c7c"),c=Object(r["a"])(o,a,l,!1,null,null,null);t["default"]=c.exports}}]);