(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3984d86c"],{7783:function(e,a,t){"use strict";t.d(a,"a",(function(){return l})),t.d(a,"d",(function(){return s})),t.d(a,"b",(function(){return o})),t.d(a,"g",(function(){return i})),t.d(a,"c",(function(){return n})),t.d(a,"h",(function(){return d})),t.d(a,"e",(function(){return c})),t.d(a,"f",(function(){return u}));var r=t("b775");function l(e){return Object(r["b"])({url:"/ClassAwardRecord/Create",method:"post",data:e})}function s(e){return Object(r["b"])({url:"/ClassAwardRecord/Edit",method:"post",data:e})}function o(e){return Object(r["b"])({url:"/ClassAwardRecord/Del",method:"post",data:e})}function i(e){return Object(r["b"])({url:"/ClassAwardRecord/Get",method:"get",params:e})}function n(e){return Object(r["b"])({url:"/ClassAwardRecord/Detail",method:"get",params:e})}function d(e,a){return Object(r["b"])({url:"/ClassAwardRecord/Import",method:"post",data:e,onUploadProgress:function(e){var t=e.loaded/e.total*100|0;a&&a(t)}})}function c(e){return Object(r["b"])({url:"/ClassAwardRecord/Export",method:"post",data:e,responseType:"blob"})}function u(e){return Object(r["b"])({url:"/ClassAwardRecord/ExportFailed",method:"post",data:e,responseType:"blob"})}},"80ac":function(e,a,t){"use strict";t.d(a,"a",(function(){return l})),t.d(a,"d",(function(){return s})),t.d(a,"b",(function(){return o})),t.d(a,"e",(function(){return i})),t.d(a,"f",(function(){return n})),t.d(a,"c",(function(){return d}));var r=t("b775");function l(e){return Object(r["b"])({url:"/ClassAwardType/Create",method:"post",data:e})}function s(e){return Object(r["b"])({url:"/ClassAwardType/Edit",method:"post",data:e})}function o(e){return Object(r["b"])({url:"/ClassAwardType/Del",method:"post",data:e})}function i(e){return Object(r["b"])({url:"/ClassAwardType/Get",method:"get",params:e})}function n(e){return Object(r["b"])({url:"/ClassAwardType/Tree",method:"get",params:e})}function d(e){return Object(r["b"])({url:"/ClassAwardType/Detail",method:"get",params:e})}},ced9:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible},on:{cancel:e.handleCancel,ok:e.handleSubmit}},[t("a-form-model",{ref:"ruleForm",attrs:{model:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules}},[t("a-form-model-item",{attrs:{label:"学年学期",prop:"ysValue"}},[t("a-cascader",{attrs:{fieldNames:e.fieldNames,options:e.yearTree,placeholder:"请选择学年学期","change-on-select":!1},model:{value:e.form.ysValue,callback:function(a){e.$set(e.form,"ysValue",a)},expression:"form.ysValue"}})],1),t("a-form-model-item",{attrs:{label:"班级",prop:"fwValue"}},[t("ClassSelect",{ref:"classSelect",attrs:{placeholder:"请选择班级",changeOnSelect:!1,academicStage:"1"},model:{value:e.form.fwValue,callback:function(a){e.$set(e.form,"fwValue",a)},expression:"form.fwValue"}})],1),t("a-form-model-item",{attrs:{label:"获奖类型",prop:"additional_type"}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.awardType,replaceFields:e.replaceFields,placeholder:"请选择获奖类型"},model:{value:e.form.additional_type,callback:function(a){e.$set(e.form,"additional_type",a)},expression:"form.additional_type"}})],1),t("a-form-model-item",{attrs:{label:"获奖名称",prop:"award_name"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入获奖名称",allowClear:""},model:{value:e.form.award_name,callback:function(a){e.$set(e.form,"award_name",a)},expression:"form.award_name"}})],1),t("a-form-model-item",{attrs:{label:"获奖等级",prop:"award_rank"}},[t("a-select",{attrs:{"allow-clear":"",placeholder:"请选择获奖等级"},model:{value:e.form.award_rank,callback:function(a){e.$set(e.form,"award_rank",a)},expression:"form.award_rank"}},e._l(e.awardRank,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(e._s(a.name))])})),1)],1),t("a-form-model-item",{attrs:{label:"获奖级别",prop:"award_level"}},[t("a-select",{attrs:{"allow-clear":"",placeholder:"请选择获奖级别"},model:{value:e.form.award_level,callback:function(a){e.$set(e.form,"award_level",a)},expression:"form.award_level"}},e._l(e.awardLevel,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(e._s(a.name))])})),1)],1),t("a-form-model-item",{attrs:{label:"得分",prop:"score"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入得分",min:0},model:{value:e.form.score,callback:function(a){e.$set(e.form,"score",a)},expression:"form.score"}})],1),t("a-form-model-item",{attrs:{label:"佐证材料",prop:"file_list"}},[t("NewFileUpload",{model:{value:e.form.file_list,callback:function(a){e.$set(e.form,"file_list",a)},expression:"form.file_list"}})],1),t("a-form-model-item",{attrs:{label:"描述",prop:"discribe"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入描述",allowClear:""},model:{value:e.form.discribes,callback:function(a){e.$set(e.form,"discribes",a)},expression:"form.discribes"}})],1),t("a-form-model-item",{attrs:{label:"排序"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.form.sort,callback:function(a){e.$set(e.form,"sort",a)},expression:"form.sort"}})],1),t("a-form-model-item",{attrs:{label:"备注"}},[t("a-textarea",{attrs:{placeholder:"请输入备注",allowClear:!0,"auto-size":{minRows:2}},model:{value:e.form.remark,callback:function(a){e.$set(e.form,"remark",a)},expression:"form.remark"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v(" 取消 ")]),t("a-button",{key:"submit",attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("确定 ")])],1)],1)},l=[],s=(t("159b"),t("a15b"),t("7783")),o=t("ad81"),i=t("d0fff"),n=t("80ac"),d={components:{ClassSelect:o["a"]},data:function(){return{title:"添加",labelCol:{span:6},wrapperCol:{span:14},visible:!1,loading:!1,fieldNames:{label:"name",value:"id",children:"children"},rules:{ysValue:[{required:!0,message:"请选择学年学期",trigger:"change"}],fwValue:[{required:!0,message:"请选择班级",trigger:"change"}],additional_type:[{required:!0,message:"请选择获奖类型",trigger:"change"}],award_name:[{required:!0,message:"请输入获奖名称",trigger:"blur"}],award_rank:[{required:!0,message:"请选择获奖等级",trigger:"change"}],award_level:[{required:!0,message:"请选择获奖级别",trigger:"change"}],score:[{required:!0,message:"请输入得分",trigger:"blur"}]},form:{ysValue:[],fwValue:[]},replaceFields:{value:"id",key:"id",title:"name"},awardType:[],awardRank:[],awardLevel:[],yearTree:[]}},methods:{add:function(){this.title="添加",this.visible=!0,this.loading=!1,this.getChangeTypeTree(),this.getAwardType(),this.awardRank=this.$options.filters["dictData"]("award_rank"),this.awardLevel=this.$options.filters["dictData"]("award_level"),this.form=Object.assign({},this.$options.data().form)},edit:function(e){this.title="编辑",this.visible=!0,this.loading=!1,this.getAwardType(),this.awardRank=this.$options.filters["dictData"]("award_rank"),this.awardLevel=this.$options.filters["dictData"]("award_level"),this.getChangeTypeTree(),this.getDetail(e.id)},getAwardType:function(){var e=this;Object(n["f"])().then((function(a){e.awardType=a.data}))},getChangeTypeTree:function(){var e=this;Object(i["g"])().then((function(a){e.yearTree=a.data}))},getDetail:function(e){var a=this;Object(s["c"])({id:e}).then((function(e){if(e.success){a.form=e.data;var t=[e.data.school_year,e.data.semester];a.$set(a.form,"ysValue",t);var r=[e.data.grade_id,e.data.class_id];a.$set(a.form,"fwValue",r)}}))},handleSubmit:function(){var e=this;this.loading=!0,this.$refs.ruleForm.validate((function(a){if(!a)return e.loading=!1,!1;var t=JSON.parse(JSON.stringify(e.form));if(t.ysValue&&t.ysValue.length?t.school_year=t.ysValue[0]:delete t.school_year,t.ysValue&&t.ysValue.length?t.semester=t.ysValue[1]:delete t.semester,t.fwValue&&t.fwValue.length?t.class_id=t.fwValue[1]:delete t.class_id,Array.isArray(t.file_list)){var r=[];t.file_list.forEach((function(e){r.push(e.id)})),t.files=r.join("|")}delete t.file_list,delete t.ysValue,delete t.fwValue,"添加"===e.title?Object(s["a"])(t).then((function(a){a.success?(e.visible=!1,e.$message.success("添加成功！"),e.$emit("ok")):(e.loading=!1,e.$message.error("添加失败："+a.message))})):Object(s["d"])(t).then((function(a){a.success?(e.visible=!1,e.$message.success("修改成功！"),e.$emit("ok")):(e.loading=!1,e.$message.error("修改失败："+a.message))}))}))},handleCancel:function(){this.visible=!1}}},c=d,u=t("0c7c"),f=Object(u["a"])(c,r,l,!1,null,null,null);a["default"]=f.exports}}]);