(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-240f0543"],{8367:function(e,t,n){},f794:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-row",{attrs:{gutter:24}},[n("a-col",{staticStyle:{padding:"0 0 0 0"},attrs:{md:5,sm:24}},[n("a-card",{attrs:{bordered:!0}},[n("a-table",{ref:"table",attrs:{size:"middle",rowKey:function(e){return e.code},pagination:!1,defaultExpandAllRows:!0,columns:e.appColumns,dataSource:e.appData,loading:e.loading,showPagination:"auto","row-selection":{selectedRowKeys:e.selectedAppKeys,onChange:e.onAppSelectChange,type:"radio"},customRow:e.click},scopedSlots:e._u([{key:"type",fn:function(t){return n("span",{},[e._v(" "+e._s(e.typeFilter(t))+" ")])}},{key:"icon",fn:function(t){return n("span",{},[null!=t&&""!=t?n("div",[n("a-icon",{attrs:{type:t}})],1):e._e()])}}])})],1)],1),n("a-col",{attrs:{md:19,sm:24}},[n("a-card",{attrs:{bordered:!1}},[n("a-tabs",{attrs:{"default-active-key":"1"},on:{change:e.callbackTerminal}},[n("a-tab-pane",{key:"1",attrs:{tab:"PC端菜单"}}),n("a-tab-pane",{key:"2",attrs:{tab:"移动端菜单"}})],1),e.hasPerm("sysMenu:add")?n("div",{staticClass:"table-operator"},[e.hasPerm("sysMenu:add")?n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.addForm.add(e.queryParam.terminal)}}},[e._v("新增菜单 ")]):e._e()],1):e._e(),n("a-table",{ref:"table",attrs:{size:"middle",rowKey:function(e){return e.id},pagination:!1,defaultExpandAllRows:!0,columns:e.columns,dataSource:e.data,loading:e.loading,showPagination:"auto","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"type",fn:function(t){return n("span",{},[e._v(" "+e._s(e.typeFilter(t))+" ")])}},{key:"icon",fn:function(t,a){return n("span",{},[null!=t&&""!=t?n("div",[n("a-icon",{attrs:{type:t}})],1):e._e(),a.menuLogo?n("img",{staticStyle:{width:"30px",height:"30px"},attrs:{src:""+e.imgPreUrl+a.menuLogo}}):e._e()])}},{key:"action",fn:function(t,a){return n("span",{},[[e.hasPerm("sysMenu:edit")?n("a",{on:{click:function(t){return e.$refs.editForm.edit(a,e.queryParam.terminal)}}},[e._v("编辑")]):e._e(),e.hasPerm("sysMenu:edit")&e.hasPerm("sysMenu:delete")?n("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysMenu:delete")?n("a-popconfirm",{attrs:{placement:"topRight",title:"删除本菜单与下级？"},on:{confirm:function(){return e.handleDel(a)}}},[n("a",[e._v("删除")])]):e._e()]],2)}}])}),n("add-form",{ref:"addForm",on:{ok:e.handleOk}}),n("edit-form",{ref:"editForm",on:{ok:e.handleOk}})],1)],1)],1)},s=[],i=(n("d3b7"),n("4de4"),n("0bfe")),o=n("126f"),r=n("2316"),c=n("b89a"),l=n("c8d5"),d={components:{addForm:c["default"],editForm:l["default"]},data:function(){return{imgPreUrl:"http://182.40.103.156:5573//Upload/Default/",queryParam:{terminal:"1"},data:[],appData:[],loading:!0,columns:[{title:"菜单名称",dataIndex:"name",width:"20%"},{title:"菜单类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"图标",dataIndex:"icon",scopedSlots:{customRender:"icon"}},{title:"组件",dataIndex:"component",width:"20%",ellipsis:!0},{title:"路由地址",dataIndex:"router",key:"router",ellipsis:!0},{title:"排序",dataIndex:"sort"}],appColumns:[{title:"应用名称",dataIndex:"name"}],selectedRowKeys:[],selectedAppKeys:[],typeDict:[]}},created:function(){this.loadData(),(this.hasPerm("sysMenu:edit")||this.hasPerm("sysMenu:delete"))&&this.columns.push({title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}})},methods:{callbackTerminal:function(e){this.queryParam.terminal=e,this.getMenu()},loadData:function(){var e=this;this.loading=!0,Object(r["a"])(this.queryParam).then((function(t){t.success&&(e.appData=t.data,e.removeEmptyChildren(e.appData))})).finally((function(){e.loading=!1})),this.sysDictTypeDropDown()},removeEmptyChildren:function(e){if(null!=e&&0!==e.length)for(var t=0;t<e.length;t++){var n=e[t];null!=n.children&&0===n.children.length?n.children=null:this.removeEmptyChildren(n.children)}},typeFilter:function(e){var t=this.typeDict.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},sysDictTypeDropDown:function(){var e=this;Object(o["c"])({code:"menu_type"}).then((function(t){e.typeDict=t.data}))},handleOk:function(){this.onAppSelectChange(this.selectedAppKeys)},handleDel:function(e){var t=this;Object(i["f"])(e).then((function(e){e.success?(t.$message.success("删除成功"),t.onAppSelectChange(t.selectedAppKeys)):t.$message.error("删除失败："+e.message)})).catch((function(e){t.$message.error("错误："+e.message)}))},onSelectChange:function(e){this.selectedRowKeys=e},onAppSelectChange:function(e){this.selectedAppKeys=e,this.getMenu()},getMenu:function(){var e=this;this.selectedAppKeys.length>0&&(this.queryParam.application=this.selectedAppKeys[0],Object(i["b"])(this.queryParam).then((function(t){t.success&&(e.data=t.data,e.removeEmptyChildren(e.data))})).finally((function(){e.loading=!1})))},click:function(e,t){var n=this;return{on:{click:function(){var t=[];t.push(e.code),n.selectedAppKeys=t,n.onAppSelectChange(n.selectedAppKeys)}}}},clearSele:function(){this.selectedRowKeys=[]}}},u=d,p=(n("f815"),n("0c7c")),h=Object(p["a"])(u,a,s,!1,null,"4d107715",null);t["default"]=h.exports},f815:function(e,t,n){"use strict";n("8367")}}]);