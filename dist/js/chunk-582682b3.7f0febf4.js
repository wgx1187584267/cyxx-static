(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-582682b3","chunk-48166cc2"],{"79e7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"选择外键关系",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"外键表","has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tableName",{rules:[{required:!0,message:"请选择数据库表！"}]}],expression:"['tableName', { rules: [{ required: true, message: '请选择数据库表！' }] }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据库表"}},e._l(e.tableNameData,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.entityName},on:{click:function(a){return e.tableNameSele(t)}}},[e._v(e._s(t.entityName))])})),1)],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"显示字段","has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["columnName",{rules:[{required:!0,message:"请选择显示字段！"}]}],expression:"['columnName', { rules: [{ required: true, message: '请选择显示字段！' }] }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择显示字段"}},e._l(e.cloumnNameData,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.columnName}},[e._v(e._s(t.columnName))])})),1)],1)],1)],1)],1)],1)],1)},o=[],r=(a("7db0"),a("998b")),c={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,confirmLoading:!1,tableNameData:[],cloumnNameData:[],row:void 0,form:this.$form.createForm(this)}},methods:{show:function(e){this.row=e,this.visible=!0,this.codeGenerateInformationList()},codeGenerateInformationList:function(){var e=this;Object(r["e"])().then((function(t){e.confirmLoading=!0,e.tableNameData=t.data,e.confirmLoading=!1}))},codeGenerateColumnList:function(e){var t=this;Object(r["b"])(e).then((function(e){t.confirmLoading=!0,t.cloumnNameData=e.data,t.confirmLoading=!1}))},handleSubmit:function(){var e=this,t=this.form.validateFields;t((function(t,a){t||(e.row.fkEntityName=a.tableName,e.row.fkColumnName=a.columnName,e.row.fkColumnNetType=e.cloumnNameData.find((function(e){return e.columnName===a.columnName})).netType,e.handleCancel())}))},handleCancel:function(){this.form.resetFields(),this.visible=!1},tableNameSele:function(e){this.codeGenerateColumnList(e.tableName)}}},i=c,l=a("0c7c"),d=Object(l["a"])(i,n,o,!1,null,null,null);t["default"]=d.exports},"998b":function(e,t,a){"use strict";a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"h",(function(){return s})),a.d(t,"g",(function(){return u}));var n=a("b775");function o(e){return Object(n["b"])({url:"/codeGenerate/page",method:"get",params:e})}function r(e){return Object(n["b"])({url:"/codeGenerate/add",method:"post",data:e})}function c(e){return Object(n["b"])({url:"/codeGenerate/edit",method:"post",data:e})}function i(e){return Object(n["b"])({url:"/codeGenerate/delete",method:"post",data:e})}function l(e){return Object(n["b"])({url:"/codeGenerate/InformationList",method:"get",params:e})}function d(e){return Object(n["b"])({url:"/codeGenerate/ColumnList/".concat(e),method:"get"})}function s(e){return Object(n["b"])({url:"/codeGenerate/runLocal",method:"post",data:e})}function u(e){return Object(n["b"])({url:"/codeGenerate/runDown",method:"get",params:e,responseType:"blob"})}},ee23:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{directives:[{name:"show",rawName:"v-show",value:e.indexConfigShow,expression:"indexConfigShow"}],attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("a-button",{staticClass:"but_item",attrs:{type:"dashed",icon:"rollback"},on:{click:e.handleCancel}},[e._v("返回")]),a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleSubmit}},[e._v("保存")])],1),a("a-table",{ref:"table",attrs:{size:"middle",columns:e.columns,dataSource:e.loadData,pagination:!1,alert:!0,loading:e.tableLoading,rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"columnComment",fn:function(t,n){return[a("a-input",{model:{value:n.columnComment,callback:function(t){e.$set(n,"columnComment",t)},expression:"record.columnComment"}})]}},{key:"effectType",fn:function(t,n){return[a("a-select",{staticStyle:{width:"120px"},attrs:{disabled:e.judgeColumns(n)},on:{change:function(t){return e.effectTypeChange(n,t)}},model:{value:n.effectType,callback:function(t){e.$set(n,"effectType",t)},expression:"record.effectType"}},e._l(e.effectTypeData,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.code}},[e._v(e._s(t.name))])})),1)]}},{key:"dictTypeCode",fn:function(t,n){return[a("a-select",{staticStyle:{width:"120px"},attrs:{disabled:"radio"!==n.effectType&&"select"!==n.effectType&&"checkbox"!==n.effectType},model:{value:n.dictTypeCode,callback:function(t){e.$set(n,"dictTypeCode",t)},expression:"record.dictTypeCode"}},e._l(e.dictDataAll,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.code}},[e._v(e._s(t.name))])})),1)]}},{key:"whetherTable",fn:function(t,n){return[a("a-checkbox",{model:{value:n.whetherTable,callback:function(t){e.$set(n,"whetherTable",t)},expression:"record.whetherTable"}})]}},{key:"whetherRetract",fn:function(t,n){return[a("a-checkbox",{model:{value:n.whetherRetract,callback:function(t){e.$set(n,"whetherRetract",t)},expression:"record.whetherRetract"}})]}},{key:"whetherAddUpdate",fn:function(t,n){return[a("a-checkbox",{attrs:{disabled:e.judgeColumns(n)},model:{value:n.whetherAddUpdate,callback:function(t){e.$set(n,"whetherAddUpdate",t)},expression:"record.whetherAddUpdate"}})]}},{key:"whetherRequired",fn:function(t,n){return[a("a-checkbox",{attrs:{disabled:e.judgeColumns(n)},model:{value:n.whetherRequired,callback:function(t){e.$set(n,"whetherRequired",t)},expression:"record.whetherRequired"}})]}},{key:"queryWhether",fn:function(t,n){return[a("a-switch",{model:{value:n.queryWhether,callback:function(t){e.$set(n,"queryWhether",t)},expression:"record.queryWhether"}},[a("a-icon",{attrs:{slot:"checkedChildren",type:"check"},slot:"checkedChildren"}),a("a-icon",{attrs:{slot:"unCheckedChildren",type:"close"},slot:"unCheckedChildren"})],1)]}},{key:"queryType",fn:function(t,n){return[a("a-select",{staticStyle:{width:"100px"},attrs:{disabled:!n.queryWhether},model:{value:n.queryType,callback:function(t){e.$set(n,"queryType",t)},expression:"record.queryType"}},e._l(e.codeGenQueryTypeData,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.code}},[e._v(e._s(t.name))])})),1)]}}])}),a("fk-modal",{ref:"fkModal"})],1)},o=[],r=(a("159b"),a("b775"));function c(e){return Object(r["b"])({url:"/sysCodeGenerateConfig/list",method:"get",params:e})}function i(e){return Object(r["b"])({url:"/sysCodeGenerateConfig/edit",method:"post",data:e})}var l=a("79e7"),d={components:{fkModal:l["default"]},data:function(){return{columns:[{title:"字段",dataIndex:"columnName"},{title:"描述",dataIndex:"columnComment",scopedSlots:{customRender:"columnComment"}},{title:"类型",dataIndex:"netType"},{title:"作用类型",dataIndex:"effectType",scopedSlots:{customRender:"effectType"}},{title:"字典",dataIndex:"dictTypeCode",scopedSlots:{customRender:"dictTypeCode"}},{title:"列表显示",align:"center",dataIndex:"whetherTable",scopedSlots:{customRender:"whetherTable"}},{title:"增改",align:"center",dataIndex:"whetherAddUpdate",scopedSlots:{customRender:"whetherAddUpdate"}},{title:"必填",align:"center",dataIndex:"whetherRequired",scopedSlots:{customRender:"whetherRequired"}},{title:"是否是查询",align:"center",dataIndex:"queryWhether",scopedSlots:{customRender:"queryWhether"}},{title:"查询方式",dataIndex:"queryType",scopedSlots:{customRender:"queryType"}}],indexConfigShow:!1,tableLoading:!1,visible:!1,loadData:[],javaTypeData:[],effectTypeData:[],dictDataAll:[],codeGenQueryTypeData:[],yesOrNoData:[]}},methods:{open:function(e){var t=this;this.indexConfigShow=!0,this.tableLoading=!0;var a=this.$options;this.javaTypeData=a.filters["dictData"]("code_gen_net_type"),this.effectTypeData=a.filters["dictData"]("code_gen_effect_type"),this.dictDataAll=a.filters["dictDataAll"](),this.yesOrNoData=a.filters["dictData"]("yes_or_no"),this.codeGenQueryTypeData=a.filters["dictData"]("code_gen_query_type");var n={codeGenId:e.id};c(n).then((function(e){t.loadData=e.data,t.loadData.forEach((function(e){for(var t in e)"Y"===e[t]&&(e[t]=!0),"N"===e[t]&&(e[t]=!1)})),t.tableLoading=!1}))},handleSubmit:function(){var e=this;this.tableLoading=!0;var t=JSON.parse(JSON.stringify(this.loadData));t.forEach((function(e){for(var t in e)!0===e[t]&&(e[t]="Y"),!1===e[t]&&(e[t]="N")})),i(t).then((function(t){e.tableLoading=!1,t.success?(e.$message.success("编辑成功"),e.handleCancel()):e.$message.error("编辑失败："+t.message)}))},judgeColumns:function(e){return e.columnName.indexOf("createdUserName")>-1||e.columnName.indexOf("createdTime")>-1||e.columnName.indexOf("updatedUserName")>-1||e.columnName.indexOf("updatedTime")>-1||"True"===e.columnKey},effectTypeChange:function(e,t){"fk"===t&&this.$refs.fkModal.show(e)},handleCancel:function(){this.$emit("ok"),this.loadData=[],this.indexConfigShow=!1}}},s=d,u=a("0c7c"),m=Object(u["a"])(s,n,o,!1,null,null,null);t["default"]=m.exports}}]);