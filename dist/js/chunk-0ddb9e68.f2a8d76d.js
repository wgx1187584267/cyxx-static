(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ddb9e68"],{afd0:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-card",{directives:[{name:"show",rawName:"v-show",value:e.indexOpenShow,expression:"indexOpenShow"}],attrs:{bordered:!1,bodyStyle:e.tstyle}},[n("a-spin",{attrs:{spinning:e.Loading}},[e.hasPerm("codeGenerate:page")?n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:48}},[n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"表名称"}},[n("a-input",{attrs:{"allow-clear":"",placeholder:"请输入表名称"},model:{value:e.queryParam.tableName,callback:function(t){e.$set(e.queryParam,"tableName",t)},expression:"queryParam.tableName"}})],1)],1),n("a-col",{attrs:{md:8,sm:24}},[n("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)],1)],1)],1):e._e()])],1),n("a-card",{directives:[{name:"show",rawName:"v-show",value:e.indexOpenShow,expression:"indexOpenShow"}],attrs:{bordered:!1}},[n("a-spin",{attrs:{spinning:e.Loading}},[n("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"tableName",fn:function(t){return n("span",{},[n("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"busName",fn:function(t){return n("span",{},[n("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"nameSpace",fn:function(t){return n("span",{},[n("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"generateType",fn:function(t){return n("span",{},[n("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(e._f("dictType")("code_gen_create_type",t)))])],1)}},{key:"action",fn:function(t,a){return n("span",{},["1"===a.generateType?n("span",[e.hasPerm("codeGenerate:runDown")?n("a",{on:{click:function(t){return e.runDownCodeGenerate(a)}}},[e._v("开始生成")]):e._e()]):n("span",[e.hasPerm("codeGenerate:runLocal")?n("a-popconfirm",{attrs:{placement:"topRight",title:"确定生成代码到本项目？"},on:{confirm:function(){return e.runLocalCodeGenerate(a)}}},[n("a",[e._v("开始生成")])]):e._e()],1),e.hasPerm("codeGenerate:config")&e.hasPerm("codeGenerate:runLocal")||e.hasPerm("codeGenerate:runDown")?n("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("codeGenerate:config")?n("a",{on:{click:function(t){return e.indexConfigOpen(a)}}},[e._v("配置")]):e._e(),e.hasPerm("codeGenerate:config")&e.hasPerm("codeGenerate:edit")?n("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("codeGenerate:edit")?n("a",{on:{click:function(t){return e.$refs.editForm.edit(a)}}},[e._v("编辑")]):e._e(),e.hasPerm("codeGenerate:edit")&e.hasPerm("codeGenerate:delete")?n("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("codeGenerate:delete")?n("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？"},on:{confirm:function(){return e.codeGenerateDelete(a)}}},[n("a",[e._v("删除")])]):e._e()],1)}}])},[e.hasPerm("codeGenerate:add")?n("div",{attrs:{slot:"operator"},slot:"operator"},[e.hasPerm("codeGenerate:add")?n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.addForm.add()}}},[e._v("新增")]):e._e()],1):e._e()]),e.hasPerm("codeGenerate:add")?n("add-form",{ref:"addForm",on:{ok:e.handleOk}}):e._e(),e.hasPerm("codeGenerate:edit")?n("edit-form",{ref:"editForm",on:{ok:e.handleOk}}):e._e()],1)],1),e.hasPerm("codeGenerate:config")?n("index-config",{ref:"indexConfig",on:{ok:e.handleResetOpen}}):e._e()],1)},r=[],o=(n("d3b7"),n("2af9")),s=n("998b"),i=n("b237"),c=n("2f01"),d=n("ee23"),l=n("ca00"),u={components:{indexConfig:d["default"],STable:o["r"],Ellipsis:o["h"],addForm:i["default"],editForm:c["default"]},data:function(){var e=this;return{queryParam:{},columns:[{title:"表名称",dataIndex:"tableName",scopedSlots:{customRender:"tableName"}},{title:"业务名",dataIndex:"busName",scopedSlots:{customRender:"busName"}},{title:"命名空间",dataIndex:"nameSpace",scopedSlots:{customRender:"nameSpace"}},{title:"作者姓名",dataIndex:"authorName"},{title:"生成方式",dataIndex:"generateType",scopedSlots:{customRender:"generateType"}}],tstyle:{"padding-bottom":"0px","margin-bottom":"10px"},loadData:function(t){return Object(s["f"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],Loading:!1,jdbcDriverList:[],indexOpenShow:!0}},created:function(){(this.hasPerm("codeGenerate:edit")||this.hasPerm("codeGenerate:delete"))&&this.columns.push({title:"操作",width:"230px",dataIndex:"action",scopedSlots:{customRender:"action"}})},methods:{runDownCodeGenerate:function(e){var t=this;this.Loading=!0,Object(s["g"])({id:e.id}).then((function(e){t.Loading=!1,Object(l["b"])(e)})).catch((function(e){t.Loading=!1,t.$message.error("下载错误：获取文件流错误")}))},runLocalCodeGenerate:function(e){var t=this;Object(s["h"])(e).then((function(e){e.success?(t.$message.success("生成成功"),t.$refs.table.refresh()):t.$message.error("生成失败："+e.message)}))},codeGenerateDelete:function(e){var t=this;this.Loading=!0,Object(s["c"])([{id:e.id}]).then((function(e){e.success?(t.$message.success("删除成功"),t.$refs.table.refresh()):t.$message.error("删除失败："+e.message)})).catch((function(e){t.$message.error("删除错误："+e.message)})).finally((function(e){t.Loading=!1}))},indexConfigOpen:function(e){this.indexOpenShow=!1,this.$refs.indexConfig.open(e)},handleResetOpen:function(){this.indexOpenShow=!0,this.$refs.table.refresh()},handleOk:function(){this.$refs.table.refresh()},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},m=u,f=(n("de3b9"),n("0c7c")),p=Object(f["a"])(m,a,r,!1,null,null,null);t["default"]=p.exports},de3b9:function(e,t,n){"use strict";n("fc91")},fc91:function(e,t,n){}}]);