(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6d07b92","chunk-82bc0406","chunk-5dc219dd","chunk-7a7ea99d","chunk-79b701d2"],{"00f8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{title:"详细",footer:null,width:900,bodyStyle:{background:"#fff"}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-descriptions",{attrs:{bordered:"",column:2,size:"small"}},[a("a-descriptions-item",{attrs:{label:"学年学期"}},[e._v(e._s(e.infor.school_year_name)+e._s(e.infor.semester_name))]),a("a-descriptions-item",{attrs:{label:"获奖类型"}},[e._v(e._s(e.infor.develop_type_name))]),a("a-descriptions-item",{attrs:{label:"学段"}},[e._v(e._s(e.infor.academic_stage_name))]),a("a-descriptions-item",{attrs:{label:"发证单位/主办"}},[e._v(e._s(e.infor.organizer))]),a("a-descriptions-item",{attrs:{label:"学校组织科室"}},[e._v(e._s(e.infor.organizational))]),a("a-descriptions-item",{attrs:{label:"活动名称"}},[e._v(e._s(e.infor.publish_name))]),a("a-descriptions-item",{attrs:{label:"作品名称"}},[e._v(e._s(e.infor.title_of_work))]),a("a-descriptions-item",{attrs:{label:"获奖人"}},[e._v(e._s(e.infor.publish_person_name))]),a("a-descriptions-item",{attrs:{label:"证书领域"}},[e._v(e._s(e.infor.award_field_name))]),a("a-descriptions-item",{attrs:{label:"考核分"}},[e._v(e._s(e.infor.assessment_score))]),a("a-descriptions-item",{attrs:{label:"职评分"}},[e._v(e._s(e.infor.job_rating))]),a("a-descriptions-item",{attrs:{label:"获奖时间"}},[e._v(e._s(e.$formatDateHy(e.infor.award_time)))]),a("a-descriptions-item",{attrs:{label:"获奖级别"}},[e._v(e._s(e.infor.award_level_name))]),a("a-descriptions-item",{attrs:{label:"获奖等级"}},[e._v(e._s(e.infor.award_rank_name))]),a("a-descriptions-item",{attrs:{label:"相关图片",span:2}},e._l(e.infor.file_list,(function(t,r){return a("img",{key:r,staticClass:"wt80",attrs:{preview:r,src:e.imgPreUrl+"/"+(t.fileObjectName||t.file_object_name)}})})),0),a("a-descriptions-item",{attrs:{label:"备注",span:2}},[e._v(e._s(e.infor.remark))]),a("a-descriptions-item",{attrs:{label:"添加人"}},[e._v(e._s(e.infor.add_person_name))]),a("a-descriptions-item",{attrs:{label:"添加时间"}},[e._v(e._s(e.infor.add_time))]),a("a-descriptions-item",{attrs:{label:"审核状态"}},["0"===e.infor.examine_state?a("a-tag",{attrs:{color:"orange"}},[e._v("未审核")]):e._e(),"1"===e.infor.examine_state?a("a-tag",{attrs:{color:"cyan"}},[e._v("审核中")]):e._e(),"2"===e.infor.examine_state?a("a-tag",{attrs:{color:"green"}},[e._v("审核通过")]):e._e(),"3"===e.infor.examine_state?a("a-tag",{attrs:{color:"red"}},[e._v("审核未通过")]):e._e()],1),e.infor.reason?a("a-descriptions-item",{attrs:{label:"未通过原因"}},[e._v(" "+e._s(e.infor.reason)+" ")]):e._e(),a("a-descriptions-item",{attrs:{label:"个人审核"}},[0==e.infor.submit?a("a-tag",{attrs:{color:"red"}},[e._v("否")]):e._e(),1==e.infor.submit?a("a-tag",{attrs:{color:"green"}},[e._v("是")]):e._e()],1)],1)],1)],1)},n=[],o=a("0567"),s={components:{},data:function(){return{visible:!1,imgPreUrl:"http://182.40.103.156:5573//Upload/Default/",infor:{}}},methods:{show:function(e){this.visible=!0,this.getDetaile(e.id)},getDetaile:function(e){var t=this;Object(o["g"])({id:e}).then((function(e){e.success&&(t.infor=e.data,t.examineList=t.infor.examineList||[])}))}}},l=s,i=a("0c7c"),c=Object(i["a"])(l,r,n,!1,null,null,null);t["default"]=c.exports},"0567":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return i})),a.d(t,"h",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return m}));var r=a("b775");function n(e){return Object(r["b"])({url:"/TeacherDevelopData/Create",method:"post",data:e})}function o(e){return Object(r["b"])({url:"/TeacherDevelopData/Edit",method:"post",data:e})}function s(e){return Object(r["b"])({url:"/TeacherDevelopData/Del",method:"post",data:e})}function l(e){return Object(r["b"])({url:"/TeacherDevelopData/Get",method:"get",params:e})}function i(e){return Object(r["b"])({url:"/TeacherDevelopData/Detail",method:"get",params:e})}function c(e){return Object(r["b"])({url:"/TeacherDevelopData/PostRecord",method:"post",data:e})}function d(e){return Object(r["b"])({url:"/TeacherDevelopData/Examine",method:"post",data:e})}function m(e){return Object(r["b"])({url:"/TeacherDevelopData/Export",method:"post",data:e,responseType:"blob"})}},"1b20":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:24}},[a("x-card",[a("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48,type:"flex",justify:"start"}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"学年学期"}},[a("SelYearSemester",{attrs:{mode:"multiple",placeholder:"请选择"},model:{value:e.queryParam.year_semester,callback:function(t){e.$set(e.queryParam,"year_semester",t)},expression:"queryParam.year_semester"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"学段"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.academic_stage,callback:function(t){e.$set(e.queryParam,"academic_stage",t)},expression:"queryParam.academic_stage"}},e._l(e.queryContent.academic_stage,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1)],1),e.advanced?[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"获奖类型"}},[a("TypeTreeSelect",{model:{value:e.queryParam.develop_type_id,callback:function(t){e.$set(e.queryParam,"develop_type_id",t)},expression:"queryParam.develop_type_id"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"证书领域"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.award_field,callback:function(t){e.$set(e.queryParam,"award_field",t)},expression:"queryParam.award_field"}},e._l(e.queryContent.award_field,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"发证单位"}},[a("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:e.queryParam.organizer,callback:function(t){e.$set(e.queryParam,"organizer",t)},expression:"queryParam.organizer"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"学校组织科室"}},[a("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:e.queryParam.organizational,callback:function(t){e.$set(e.queryParam,"organizational",t)},expression:"queryParam.organizational"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"活动名称"}},[a("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:e.queryParam.publish_name,callback:function(t){e.$set(e.queryParam,"publish_name",t)},expression:"queryParam.publish_name"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"作品名称"}},[a("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:e.queryParam.title_of_work,callback:function(t){e.$set(e.queryParam,"title_of_work",t)},expression:"queryParam.title_of_work"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"获奖时间"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{valueFormat:"YYYY-MM-DD"},model:{value:e.queryParam.dates,callback:function(t){e.$set(e.queryParam,"dates",t)},expression:"queryParam.dates"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"获奖级别"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.award_level,callback:function(t){e.$set(e.queryParam,"award_level",t)},expression:"queryParam.award_level"}},e._l(e.queryContent.award_level,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"获奖等级"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.award_rank,callback:function(t){e.$set(e.queryParam,"award_rank",t)},expression:"queryParam.award_rank"}},e._l(e.queryContent.award_rank,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"审核状态"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.examine_state,callback:function(t){e.$set(e.queryParam,"examine_state",t)},expression:"queryParam.examine_state"}},e._l(e.queryContent.examine_state,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1)],1)]:e._e(),a("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[a("h-search-button",{on:{click:function(t){return e.$refs.table.refresh(!0)}}}),a("h-reset-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}}),a("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")),a("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1)]),a("a-card",{attrs:{bordered:!1}},[a("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!1,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"examine_state",fn:function(t){return a("span",{},["0"===t?a("a-tag",{attrs:{color:"orange"}},[e._v("未审核")]):e._e(),"1"===t?a("a-tag",{attrs:{color:"cyan"}},[e._v("审核中")]):e._e(),"2"===t?a("a-tag",{attrs:{color:"green"}},[e._v("审核通过")]):e._e(),"3"===t?a("a-tag",{attrs:{color:"red"}},[e._v("不通过")]):e._e()],1)}},{key:"action",fn:function(t,r){return a("span",{},[a("h-link",{attrs:{type:"warning",disabled:!(["0","3"].includes(r.examine_state)&&r.add_person_id===e.$userInfo.id)},on:{click:function(t){return e.$refs.addEditForm.edit(r)}}},[e._v(" 编辑 ")]),a("a-divider",{attrs:{type:"vertical"}}),a("h-link",{attrs:{type:"success"},on:{click:function(t){return e.$refs.detaileModal.show(r)}}},[e._v("详细")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？",disabled:!(["0","3"].includes(r.examine_state)&&r.add_person_id===e.$userInfo.id)},on:{confirm:function(){return e.handleDelete([r.id])}}},[a("h-link",{attrs:{type:"danger",disabled:!(["0","3"].includes(r.examine_state)&&r.add_person_id===e.$userInfo.id)}},[e._v(" 删除 ")])],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{lacement:"topRight",title:"确认提交审核？"},on:{confirm:function(){return e.postRecord([r.id])}}},[a("a",{attrs:{disabled:!(["0","3"].includes(r.examine_state)&&r.add_person_id===e.$userInfo.id)}},[e._v("送审")])]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{disabled:!(["1"].includes(r.examine_state)&&r.examine_permission)},on:{click:function(t){return e.$refs.examineForm.examine([r.id])}}},[e._v(" 审核 ")])],1)}}])},[a("template",{slot:"operator"},[a("a-space",[a("h-button",{attrs:{type:"success",icon:"plus"},on:{click:function(t){return e.$refs.addEditForm.add()}}},[e._v("添加")]),e.hasPerm("BatchDelete:TeacherDevelopData")?a("a-popconfirm",{attrs:{placement:"topRight",title:"确认批量删除？"},on:{confirm:function(){return e.handleDelete(e.selectedRowKeys)}}},[a("a-button",{attrs:{type:"danger",icon:"delete"}},[e._v("批量删除")])],1):e._e(),a("a-button",{attrs:{icon:"down-circle",loading:e.exportLoading},on:{click:e.exportFile}},[e._v("导出")])],1)],1)],2)],1)],1)],1),a("AddEditForm",{ref:"addEditForm",on:{ok:e.handleOk}}),a("ExamineForm",{ref:"examineForm",on:{ok:e.handleOk}}),a("DetaileModal",{ref:"detaileModal"})],1)},n=[],o=(a("a9e3"),a("a15b"),a("7db0"),a("caad"),a("2af9")),s=a("126f"),l=a("1429"),i=a("0567"),c=a("ca00"),d=a("ef8d"),m=a("bf8b"),u=a("00f8"),f=a("f503"),_={components:{STable:o["r"],XCard:o["w"],AddEditForm:m["default"],DetaileModal:u["default"],ExamineForm:f["default"],TypeTreeSelect:d["default"]},props:{publishPerson:{type:Number,default:null}},data:function(){var e=this;return{exportLoading:!1,advanced:!1,queryParam:{},queryContent:{award_rank:[],award_level:[],examine_state:[],academic_stage:[],award_field:[]},columns:[{title:"学年学期",align:"center",dataIndex:"school_year_semester",customRender:function(e,t){return t.school_year_name+t.semester_name}},{title:"获奖类型",align:"center",dataIndex:"develop_type_name"},{title:"证书领域",align:"center",dataIndex:"award_field_name"},{title:"发证单位",align:"center",dataIndex:"organizer"},{title:"学校组织科室",align:"center",dataIndex:"organizational"},{title:"获奖人",align:"center",dataIndex:"publish_person_name"},{title:"活动名称",align:"center",dataIndex:"publish_name"},{title:"作品名称",align:"center",dataIndex:"title_of_work"},{title:"获奖级别",align:"center",dataIndex:"award_level_name"},{title:"获奖等级",align:"center",dataIndex:"award_rank_name"},{title:"获奖时间",align:"center",dataIndex:"award_time",customRender:function(t,a){return e.$formatDateHy(t)}},{title:"考核分",align:"center",dataIndex:"assessment_score"},{title:"职评分",align:"center",dataIndex:"job_rating"},{title:"审核状态",align:"center",dataIndex:"examine_state",scopedSlots:{customRender:"examine_state"}},{title:"操作",width:"240px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(i["f"])(Object.assign(t,e.formatParameters())).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[]}},created:function(){this.dictTypeDropDown()},watch:{publishPerson:{immediate:!0,handler:function(e,t){try{this.$refs.table.refresh(!0)}catch(a){}}}},methods:{dictTypeDropDown:function(){var e=this;Object(s["c"])({code:"award_rank"}).then((function(t){e.queryContent.award_rank=t.data})),Object(s["c"])({code:"award_level"}).then((function(t){e.queryContent.award_level=t.data})),Object(s["c"])({code:"examine_state"}).then((function(t){e.queryContent.examine_state=t.data})),Object(s["c"])({code:"award_field"}).then((function(t){e.queryContent.award_field=t.data})),Object(l["c"])({code:"academic_stage"}).then((function(t){e.queryContent.academic_stage=t.data}))},formatParameters:function(){var e=JSON.parse(JSON.stringify(this.queryParam));return this.publishPerson?e.publish_person=this.publishPerson:1!==this.$userInfo.adminType&&(e.publish_person=this.$userInfo.id),e.year_semester&&e.year_semester.length?e.year_semester=e.year_semester.join("|"):delete e.year_semester,e.dates&&e.dates.length?e.award_time_start=e.dates[0]:delete e.award_time_start,e.dates&&e.dates.length?e.award_time_end=e.dates[1]:delete e.award_time_end,delete e.dates,e},handleDelete:function(e){var t=this,a=this.selectedRows.find((function(e){return["1","2"].includes(e.examine_state)}));if(a)return this.$message.warning("有审核中或审核通过的数据，不能删除！"),!1;var r={ids:e.join("|")};Object(i["b"])(r).then((function(e){e.success?(t.$message.success("删除成功"),t.$refs.table.refresh()):t.$message.error("删除失败")}))},postRecord:function(e){var t=this,a={ids:e.join("|")};Object(i["h"])(a).then((function(e){e.success?(t.$message.success("提交成功"),t.$refs.table.refresh()):t.$message.error("提交失败")}))},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},handleOk:function(){this.$refs.table.refresh()},exportFile:function(){var e=this,t=this.formatParameters();this.exportLoading=!0,Object(i["e"])(t).then((function(t){Object(c["b"])(t),e.exportLoading=!1})).catch((function(){e.$message.error("接口报错")}))}}},p=_,b=a("0c7c"),h=Object(b["a"])(p,r,n,!1,null,"7b2037ae",null);t["default"]=h.exports},3581:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return i}));var r=a("b775");function n(e){return Object(r["b"])({url:"/TeacherDevelopType/Create",method:"post",data:e})}function o(e){return Object(r["b"])({url:"/TeacherDevelopType/Edit",method:"post",data:e})}function s(e){return Object(r["b"])({url:"/TeacherDevelopType/Del",method:"post",data:e})}function l(e){return Object(r["b"])({url:"/TeacherDevelopType/Get",method:"get",params:e})}function i(e){return Object(r["b"])({url:"/TeacherDevelopType/Tree",method:"get",params:e})}},bf8b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{title:e.title,width:700},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.formContent,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{attrs:{label:"学年学期",prop:"year_semester"}},[a("SelYearSemesterCascader",{attrs:{changeOnSelect:!1,placeholder:"请选择"},model:{value:e.formContent.year_semester,callback:function(t){e.$set(e.formContent,"year_semester",t)},expression:"formContent.year_semester"}})],1),a("a-form-model-item",{attrs:{label:"获奖类型",prop:"develop_type_id"}},[e.visible?a("TypeTreeSelect",{attrs:{isShowTop:!1,placeholder:"请选择"},model:{value:e.formContent.develop_type_id,callback:function(t){e.$set(e.formContent,"develop_type_id",t)},expression:"formContent.develop_type_id"}}):e._e()],1),a("a-form-model-item",{attrs:{label:"学段",prop:"academic_stage"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.formContent.academic_stage,callback:function(t){e.$set(e.formContent,"academic_stage",t)},expression:"formContent.academic_stage"}},e._l(e.formData.academic_stage,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(" "+e._s(t.value)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"发证单位/主办",prop:"organizer"}},[a("a-input",{attrs:{placeholder:"请输入",allowClear:!0},model:{value:e.formContent.organizer,callback:function(t){e.$set(e.formContent,"organizer",t)},expression:"formContent.organizer"}})],1),a("a-form-model-item",{attrs:{label:"学校组织科室"}},[a("a-input",{attrs:{placeholder:"请输入",allowClear:!0},model:{value:e.formContent.organizational,callback:function(t){e.$set(e.formContent,"organizational",t)},expression:"formContent.organizational"}})],1),a("a-form-model-item",{attrs:{label:"活动名称",prop:"publish_name"}},[a("a-input",{attrs:{placeholder:"请输入",allowClear:!0},model:{value:e.formContent.publish_name,callback:function(t){e.$set(e.formContent,"publish_name",t)},expression:"formContent.publish_name"}})],1),a("a-form-model-item",{attrs:{label:"作品名称",prop:"title_of_work"}},[a("a-input",{attrs:{placeholder:"请输入",allowClear:!0},model:{value:e.formContent.title_of_work,callback:function(t){e.$set(e.formContent,"title_of_work",t)},expression:"formContent.title_of_work"}})],1),a("a-form-model-item",{attrs:{label:"获奖人",prop:"publish_person"}},[a("HyUserSelect",{model:{value:e.formContent.publish_person,callback:function(t){e.$set(e.formContent,"publish_person",t)},expression:"formContent.publish_person"}})],1),a("a-form-model-item",{attrs:{label:"获奖时间",prop:"award_time"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{valueFormat:"YYYY-MM-DD"},model:{value:e.formContent.award_time,callback:function(t){e.$set(e.formContent,"award_time",t)},expression:"formContent.award_time"}})],1),a("a-form-model-item",{attrs:{label:"获奖级别",prop:"award_level"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.formContent.award_level,callback:function(t){e.$set(e.formContent,"award_level",t)},expression:"formContent.award_level"}},e._l(e.formData.award_level,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1),a("a-form-model-item",{attrs:{label:"获奖等级",prop:"award_rank"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.formContent.award_rank,callback:function(t){e.$set(e.formContent,"award_rank",t)},expression:"formContent.award_rank"}},e._l(e.formData.award_rank,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1),a("a-form-model-item",{attrs:{label:"证书领域",prop:"award_field"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.formContent.award_field,callback:function(t){e.$set(e.formContent,"award_field",t)},expression:"formContent.award_field"}},e._l(e.formData.award_field,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1),a("a-form-model-item",{attrs:{label:"认定考核分",prop:"assessment_score"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.formContent.assessment_score,callback:function(t){e.$set(e.formContent,"assessment_score",t)},expression:"formContent.assessment_score"}})],1),a("a-form-model-item",{attrs:{label:"认定职评分",prop:"job_rating"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.formContent.job_rating,callback:function(t){e.$set(e.formContent,"job_rating",t)},expression:"formContent.job_rating"}})],1),a("a-form-model-item",{attrs:{label:"相关图片",prop:"file_list"}},[a("PictureUpload",{model:{value:e.formContent.file_list,callback:function(t){e.$set(e.formContent,"file_list",t)},expression:"formContent.file_list"}})],1),a("a-form-model-item",{attrs:{label:"备注"}},[a("a-textarea",{attrs:{placeholder:"请输入","auto-size":{minRows:2,maxRows:6},allowClear:!0},model:{value:e.formContent.remark,callback:function(t){e.$set(e.formContent,"remark",t)},expression:"formContent.remark"}})],1)],1)],1)],1)},n=[],o=(a("a9e3"),a("a15b"),a("159b"),a("126f")),s=a("1429"),l=a("d0fff"),i=a("0567"),c=a("ef8d"),d={components:{TypeTreeSelect:c["default"]},data:function(){return{visible:!1,title:"添加",labelCol:{span:5},wrapperCol:{span:17},rules:{year_semester:[{required:!0,message:"请选择学年学期",trigger:"change"}],develop_type_id:[{required:!0,message:"请选择获奖类型",trigger:"change"}],organizer:[{required:!0,message:"请输入发证单位/主办",trigger:"blur"}],publish_name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],title_of_work:[{required:!0,message:"请输入作品名称",trigger:"blur"}],award_time:[{required:!0,message:"请选择获奖时间",trigger:"change"}],award_level:[{required:!0,message:"请选择获奖级别",trigger:"change"}],award_rank:[{required:!0,message:"请选择获奖等级",trigger:"change"}],award_field:[{required:!0,message:"请选择证书领域",trigger:"change"}],file_list:[{required:!0,message:"请上传相关图片",trigger:"change"}],publish_person:[{required:!0,message:"请选择获奖人",trigger:"change"}],assessment_score:[{required:!0,message:"请输入认定考核分",trigger:"blur"}],job_rating:[{required:!0,message:"请输入认定职评分",trigger:"blur"}],academic_stage:[{required:!0,message:"请选择学段",trigger:"change"}]},formData:{award_rank:[],award_level:[],academic_stage:[],award_field:[],subject_type:[],year_semester:[]},formContent:{year_semester:[]}}},created:function(){this.dictTypeDropDown()},methods:{dictTypeDropDown:function(){var e=this;Object(o["c"])({code:"award_rank"}).then((function(t){e.formData.award_rank=t.data})),Object(o["c"])({code:"award_level"}).then((function(t){e.formData.award_level=t.data})),Object(o["c"])({code:"subject_type"}).then((function(t){e.formData.subject_type=t.data})),Object(o["c"])({code:"award_field"}).then((function(t){e.formData.award_field=t.data})),Object(s["c"])({code:"academic_stage"}).then((function(t){e.formData.academic_stage=t.data})),Object(l["b"])().then((function(t){if(t.success){var a=t.data.year&&Number(t.data.year),r=t.data.semester&&Number(t.data.semester);e.formData.year_semester=[a,r]}}))},add:function(){this.title="添加",this.visible=!0,this.formContent=Object.assign({},this.$options.data().formContent),this.formContent.year_semester=this.formData.year_semester},edit:function(e){this.title="编辑",this.visible=!0,this.editPage(e.id)},editPage:function(e){var t=this;Object(i["g"])({id:e}).then((function(e){e.success&&(t.formContent=e.data,t.formContent.school_year&&!t.formContent.semester&&(t.formContent.year_semester=[t.formContent.school_year]),t.formContent.school_year&&t.formContent.semester&&(t.formContent.year_semester=[t.formContent.school_year,t.formContent.semester]))}))},handleOk:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var a=JSON.parse(JSON.stringify(e.formContent));if(a.year_semester&&a.year_semester.length&&a.year_semester[0]?a.school_year=a.year_semester[0]:delete a.school_year,a.year_semester&&a.year_semester.length&&a.year_semester[1]?a.semester=a.year_semester[1]:delete a.semester,delete a.year_semester,!a.publish_person||Array.isArray(a.publish_person)&&!a.publish_person.length?delete a.publish_person:a.publish_person=Array.isArray(a.publish_person)?a.publish_person.join("|"):a.publish_person,Array.isArray(a.file_list)){var r=[];a.file_list.forEach((function(e){r.push(e.id)})),a.file_id=r.join("|")}delete a.file_list,"添加"===e.title?Object(i["a"])(a).then((function(t){t.success?(e.visible=!1,e.$message.success("添加成功！"),e.$emit("ok")):e.$message.error("添加失败！")})):Object(i["c"])(a).then((function(t){t.success?(e.visible=!1,e.$message.success("修改成功！"),e.$emit("ok")):e.$message.error("修改失败！")}))}))}}},m=d,u=a("0c7c"),f=Object(u["a"])(m,r,n,!1,null,null,null);t["default"]=f.exports},ef8d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tree-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",value:e.typeId,multiple:e.multiple,"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.treeData,replaceFields:e.replaceFields,placeholder:e.placeholder},on:{change:e.onChange}})},n=[],o=(a("a9e3"),a("3581")),s={name:"TypeTreeSelect",props:{value:{type:[Array,String,Number],default:function(){return[]}},placeholder:{type:String,default:"请选择"},multiple:{type:Boolean,default:!1},isShowTop:{type:Boolean,default:!0}},model:{prop:"value",event:"change"},created:function(){this.getChangeTypeTree()},data:function(){return{replaceFields:{key:"id",title:"develop_type_name",value:"id"},treeData:[],typeId:void 0}},methods:{onChange:function(e){this.typeId=e,this.$emit("change",e)},getChangeTypeTree:function(){var e=this;Object(o["e"])().then((function(t){t.success&&(e.treeData=e.isShowTop?[{id:0,develop_type_name:"顶级",children:t.data}]:t.data)}))}},watch:{value:{handler:function(e){this.typeId=e},deep:!0,immediate:!0}}},l=s,i=a("0c7c"),c=Object(i["a"])(l,r,n,!1,null,null,null);t["default"]=c.exports},f503:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{title:e.title,width:600},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.formContent,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules}},[a("a-form-model-item",{attrs:{label:"审核结果",prop:"examine_state"}},[a("a-radio-group",{model:{value:e.formContent.examine_state,callback:function(t){e.$set(e.formContent,"examine_state",t)},expression:"formContent.examine_state"}},[a("a-radio",{attrs:{value:"2"}},[e._v("通过")]),a("a-radio",{attrs:{value:"3"}},[e._v("不通过")])],1)],1),"3"===e.formContent.examine_state?a("a-form-model-item",{attrs:{label:"不通过原因"}},[a("a-textarea",{attrs:{placeholder:"请输入",allowClear:!0,"auto-size":{minRows:2}},model:{value:e.formContent.reason,callback:function(t){e.$set(e.formContent,"reason",t)},expression:"formContent.reason"}})],1):e._e()],1)],1)],1)},n=[],o=(a("a15b"),a("126f")),s=a("0567"),l={data:function(){return{visible:!1,title:"审核",labelCol:{span:4},wrapperCol:{span:18},rules:{examine_state:[{required:!0,message:"请选择审核结果",trigger:"change"}]},formData:{examine_state:[]},formContent:{examine_state:"2"}}},created:function(){this.sysDictTypeDropDown()},methods:{sysDictTypeDropDown:function(){var e=this;Object(o["c"])({code:"examine_state"}).then((function(t){e.formData.examine_state=t.data}))},examine:function(e){this.visible=!0,this.formContent=Object.assign({},this.$options.data().formContent),this.formContent.ids=e.join("|")},handleOk:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var a=JSON.parse(JSON.stringify(e.formContent));Object(s["d"])(a).then((function(t){t.success?(e.visible=!1,e.$message.success("提交成功！"),e.$emit("ok")):e.$message.error(JSON.stringify(t.message))}))}))}}},i=l,c=a("0c7c"),d=Object(c["a"])(i,r,n,!1,null,null,null);t["default"]=d.exports}}]);