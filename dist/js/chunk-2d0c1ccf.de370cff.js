(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c1ccf"],{"481f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{padding:"0 0 32px 32px"}},[a("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:e.idName}})])},n=[],i=(a("d81d"),a("b0c0"),a("4de4"),{props:{idName:{type:String,default:"barStackingItem"},title:{type:String,default:""},dataSource:{type:Object,required:!0},color:{type:Array,required:!0},barTitle:{type:String,default:""}},data:function(){return{}},mounted:function(){this.initEcharts()},methods:{initEcharts:function(){var e=this.$echarts.init(document.getElementById(this.idName));e.clear();var t=this.color,a=[];a=-1!==this.title.indexOf("BMI")?["正常","低体重","超重","肥胖"]:-1!==this.title.indexOf("视力")?["A","B","C"]:["A","B","C","D"];var r=[],n=this.dataSource.item,i=[],p=["学期初","学期末"];if(n&&n.length>0)var u=n.map((function(e){return e.name}));if(this.dataSource.itemEnd){if(this.dataSource.itemEnd.length>0){var l=this.dataSource.itemEnd;if(-1!==this.title.indexOf("BMI")){i[0]=n.map((function(e){return{value:e.valueA,percent:e.percentA,year:"学期初"}})),i[1]=n.map((function(e){return{value:e.valueB,percent:e.percentB,year:"学期初"}})),i[2]=n.map((function(e){return{value:e.valueC,percent:e.percentC,year:"学期初"}})),i[3]=n.map((function(e){return{value:e.valueD,percent:e.percentD,year:"学期初"}})),i[4]=l.map((function(e){return{value:e.valueA,percent:e.percentA,year:"学期末"}})),i[5]=l.map((function(e){return{value:e.valueB,percent:e.percentB,year:"学期末"}})),i[6]=l.map((function(e){return{value:e.valueC,percent:e.percentC,year:"学期末"}})),i[7]=l.map((function(e){return{value:e.valueD,percent:e.percentD,year:"学期末"}}));for(var c=0;c<a.length;c++)r.push({name:a[c],type:"bar",stack:"学期初",label:{show:!1,formatter:function(e){return e.value+"("+e.data.percent+"%)"}},data:i[c]}),r.push({name:a[c],type:"bar",stack:"学期末",label:{show:!1,formatter:function(e){return e.value+"("+e.data.percent+"%)"}},data:i[c+4]})}else if(-1!==this.title.indexOf("视力")){i[0]=n.map((function(e){return{value:e.valueA,percent:e.percentA,year:"学期初"}})),i[1]=n.map((function(e){return{value:e.valueB,percent:e.percentB,year:"学期初"}})),i[2]=n.map((function(e){return{value:e.valueC,percent:e.percentC,year:"学期初"}})),i[3]=l.map((function(e){return{value:e.valueA,percent:e.percentA,year:"学期末"}})),i[4]=l.map((function(e){return{value:e.valueB,percent:e.percentB,year:"学期末"}})),i[5]=l.map((function(e){return{value:e.valueC,percent:e.percentC,year:"学期末"}}));for(c=0;c<a.length;c++)r.push({name:a[c],type:"bar",stack:"学期初",label:{show:!1,formatter:function(e){return e.value+"("+e.data.percent+"%)"}},data:i[c]}),r.push({name:a[c],type:"bar",stack:"学期末",label:{show:!1,formatter:function(e){return e.value+"("+e.data.percent+"%)"}},data:i[c+3]})}}}else{i[0]=n.map((function(e){return{value:e.valueA,percent:e.percentA}})),i[1]=n.map((function(e){return{value:e.valueB,percent:e.percentB}})),i[2]=n.map((function(e){return{value:e.valueC,percent:e.percentC}})),i[3]=n.map((function(e){return{value:e.valueD,percent:e.percentD}}));for(c=0;c<a.length;c++)r.push({name:a[c],type:"bar",stack:"总量",label:{show:!1,formatter:function(e){return e.value+"("+e.data.percent+"%)"}},data:i[c]})}var o={title:{text:this.barTitle,textStyle:{fontSize:18}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){var t="<div>"+e[0].name+"</div>";if(e[0].data.year)for(var a=p.map((function(t){return e.filter((function(e){return e.data.year===t}))})),r=0;r<a.length;r++){t+='<div style="margin: 5px 0">'+p[r]+"</div>";for(var n=0;n<a[r].length;n++)0!=n&&n%2!=0||(n+1<a[r].length?t+='<div style="display: flex; width: 240px; margin: 5px auto" ><div style="margin-right: 15px; width: 100px"><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+a[r][n].color+'"></span><span style="margin-right:5px">'+a[r][n].seriesName+":</span>"+a[r][n].data.value+"("+a[r][n].data.percent+'%)</div><div style="width: 100px"><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+a[r][n+1].color+'"></span><span style="margin-right:5px">'+a[r][n+1].seriesName+":</span>"+a[r][n+1].data.value+"("+a[r][n+1].data.percent+"%)</div></div>":t+='<div style="display: flex; width: 240px; margin: 5px auto" ><div style="margin-right: 5px; width: 100px"><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+a[r][n].color+'"></span><span style="margin-right:5px">'+a[r][n].seriesName+":</span>"+a[r][n].data.value+"("+a[r][n].data.percent+"%)</div></div>")}else for(n=0;n<e.length;n++)t+='<p><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+e[n].color+'"></span><span style="margin-right:5px">'+e[n].seriesName+":</span>"+e[n].data.value+"("+e[n].data.percent+"%)</p>";return t}},color:t,legend:{itemGap:30,itemWidth:40,itemHeight:20,textStyle:{fontSize:18,padding:[3,0,0,0]},data:a},grid:{left:"3%",right:"4%",bottom:"13%",containLabel:!0},xAxis:{type:"category",data:u,axisLabel:{fontSize:14,interval:0,formatter:function(e){var t="",a=e.length,r=3;return t=a>r?e.substring(0,r)+"\n"+e.substring(3,a):e,t}},axisTick:{show:!0}},yAxis:{type:"value",name:"人数",boundaryGap:["0","20%"],splitLine:{show:!0}},series:r};o&&e.setOption(o,!0),this.$nextTick((function(){e.resize()}))}}}),p=i,u=a("0c7c"),l=Object(u["a"])(p,r,n,!1,null,null,null);t["default"]=l.exports}}]);