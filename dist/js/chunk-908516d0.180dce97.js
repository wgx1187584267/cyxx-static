(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-908516d0"],{"1f34":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-row",{attrs:{gutter:24}},[s("a-col",{staticStyle:{padding:"0 0 0 0"},attrs:{md:5,sm:24}},[s("a-card",{staticClass:"leftTree",attrs:{bordered:!1,loading:e.treeLoading}},[""!=this.orgTree?s("div",[e.orgTree.length?s("a-tree",{attrs:{treeData:e.orgTree,defaultExpandAll:!1,defaultExpandedKeys:e.defaultExpandedKeys,replaceFields:e.replaceFields},on:{select:e.handleClick}}):e._e()],1):s("div",[s("a-empty",{attrs:{image:e.simpleImage}})],1)])],1),s("a-col",{attrs:{md:19,sm:24}},[e.hasPerm("sysUser:page")?s("x-card",[s("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[s("a-form",{attrs:{layout:"inline"}},[s("a-row",{attrs:{gutter:48}},[s("a-col",{attrs:{md:8,sm:24}},[s("a-form-item",{attrs:{label:"关键词"}},[s("a-input",{attrs:{"allow-clear":"",placeholder:"请输入姓名、账号、手机号"},model:{value:e.queryParam.searchValue,callback:function(t){e.$set(e.queryParam,"searchValue",t)},expression:"queryParam.searchValue"}})],1)],1),s("a-col",{attrs:{md:8,sm:24}},[s("a-form-item",{attrs:{label:"状态"}},[s("a-select",{attrs:{"allow-clear":"",placeholder:"请选择状态","default-value":"0"},model:{value:e.queryParam.searchStatus,callback:function(t){e.$set(e.queryParam,"searchStatus",t)},expression:"queryParam.searchStatus"}},e._l(e.statusDictTypeDropDown,(function(t,a){return s("a-select-option",{key:a,attrs:{value:t.code}},[e._v(" "+e._s(t.value))])})),1)],1)],1),e.advanced?[s("a-col",{attrs:{md:8,sm:24}},[s("a-form-item",{attrs:{label:"角色"}},[s("HyRoleSelect",{attrs:{mode:"default"},model:{value:e.queryParam.sysRoleId,callback:function(t){e.$set(e.queryParam,"sysRoleId",t)},expression:"queryParam.sysRoleId"}})],1)],1)]:e._e(),s("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[s("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[s("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),s("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")]),s("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),s("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1)]):e._e(),s("a-card",{attrs:{bordered:!1}},[s("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"sex",fn:function(t){return s("span",{},[e._v(" "+e._s(e.sexFilter(t))+" ")])}},{key:"status",fn:function(t,a){return e.hasPerm("sysUser:changeStatus")?s("span",{},[s("a-popconfirm",{attrs:{placement:"top",title:0===t?"确定停用该用户？":"确定启用该用户？"},on:{confirm:function(){return e.editUserStatus(t,a)}}},[s("a",[e._v(e._s(e.statusFilter(t)))])])],1):s("span",{attrs:{slot:"status"},slot:"status"},[e._v(" "+e._s(e.statusFilter(t))+" ")])}},{key:"action",fn:function(t,a){return s("span",{},[e.hasPerm("sysUser:edit")?s("a",{on:{click:function(t){return e.$refs.editForm.edit(a)}}},[e._v("编辑")]):e._e(),e.hasPerm("sysUser:edit")?s("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysUser:resetPwd")||e.hasPerm("sysUser:grantRole")||e.hasPerm("sysUser:grantData")||e.hasPerm("sysUser:delete")?s("a-dropdown",[s("a",{staticClass:"ant-dropdown-link"},[e._v(" 更多 "),s("a-icon",{attrs:{type:"down"}})],1),s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e.hasPerm("sysUser:resetPwd")?s("a-menu-item",[s("a-popconfirm",{attrs:{placement:"topRight",title:"确认重置密码？"},on:{confirm:function(){return e.resetPwd(a)}}},[s("a",[e._v("重置密码")])])],1):e._e(),e.hasPerm("sysUser:grantRole")?s("a-menu-item",[s("a",{on:{click:function(t){return e.$refs.userRoleForm.userRole(a)}}},[e._v("授权角色")])]):e._e(),e.hasPerm("sysUser:grantData")?s("a-menu-item",[s("a",{on:{click:function(t){return e.$refs.userOrgForm.userOrg(a)}}},[e._v("授权数据")])]):e._e(),e.hasPerm("sysUser:delete")?s("a-menu-item",[s("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？"},on:{confirm:function(){return e.sysUserDelete(a)}}},[s("a",[e._v("删除")])])],1):e._e()],1)],1):e._e()],1)}}],null,!0)},[s("template",{slot:"operator"},[e.hasPerm("sysUser:add")?s("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.addForm.add()}}},[e._v("新增用户 ")]):e._e(),e.hasPerm("sysUser:import")?s("a-upload",{attrs:{customRequest:e.customRequest,multiple:!0,showUploadList:!1,name:"file"}},[s("a-button",{attrs:{icon:"up-circle"}},[e._v("导入")])],1):e._e(),e.hasPerm("sysUser:export")?s("a-button",{attrs:{icon:"down-circle"},on:{click:function(t){return e.sysUserExport()}}},[e._v("导出 ")]):e._e(),s("a",{attrs:{href:e.templateUrl,download:"用户模板.xlsx"}},[e._v("— 下载导入模板 —")])],1)],2),s("add-form",{ref:"addForm",on:{ok:e.handleOk}}),s("edit-form",{ref:"editForm",on:{ok:e.handleOk}}),s("user-role-form",{ref:"userRoleForm",on:{ok:e.handleOk}}),s("user-org-form",{ref:"userOrgForm",on:{ok:e.handleOk}})],1)],1)],1)},r=[],n=s("54f8"),o=(s("06f4"),s("fc25")),c=(s("4de4"),s("d3b7"),s("25f0"),s("2af9")),i=s("25fa"),l=s("0901"),u=s("126f"),d=s("d264"),m=s("ef60"),f=s("4e4a"),h=s("c880"),p=s("ca00"),y={components:{XCard:c["w"],STable:c["r"],addForm:d["default"],editForm:m["default"],userRoleForm:f["default"],userOrgForm:h["default"]},data:function(){var e=this;return{advanced:!1,queryParam:{},columns:[{title:"账号",dataIndex:"account",sorter:!0},{title:"姓名",dataIndex:"name"},{title:"性别",dataIndex:"sex",scopedSlots:{customRender:"sex"}},{title:"手机",dataIndex:"phone"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}}],loadData:function(t){return Object(l["a"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},templateUrl:"http://182.40.103.156:5573//DownLoad/SysUser.xlsx",orgTree:[],selectedRowKeys:[],selectedRows:[],defaultExpandedKeys:[],sexDictTypeDropDown:[],statusDictTypeDropDown:[],treeLoading:!0,simpleImage:o["a"].PRESENTED_IMAGE_SIMPLE,replaceFields:{key:"id"}}},created:function(){var e=this;Object(i["c"])(Object.assign(this.queryParam)).then((function(t){if(e.treeLoading=!1,t.success){e.orgTree=t.data;var s,a=Object(n["a"])(t.data);try{for(a.s();!(s=a.n()).done;){var r=s.value;0==r.parentId&&e.defaultExpandedKeys.push(r.id)}}catch(o){a.e(o)}finally{a.f()}}})),this.sysDictTypeDropDown(),(this.hasPerm("sysUser:edit")||this.hasPerm("sysUser:resetPwd")||this.hasPerm("sysUser:grantRole")||this.hasPerm("sysUser:grantData")||this.hasPerm("sysUser:delete"))&&this.columns.push({title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}})},methods:{sexFilter:function(e){var t=this.sexDictTypeDropDown.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},statusFilter:function(e){var t=this.statusDictTypeDropDown.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},sysDictTypeDropDown:function(e){var t=this;Object(u["c"])({code:"sex"}).then((function(e){t.sexDictTypeDropDown=e.data})),Object(u["c"])({code:"common_status"}).then((function(e){t.statusDictTypeDropDown=e.data}))},editUserStatus:function(e,t){var s=this;0==e?this.status=1:1==e&&(this.status=0),Object(l["d"])({id:t.id,status:this.status}).then((function(e){e.success?(s.$message.success("操作成功"),s.$refs.table.refresh()):s.$message.error("操作失败："+e.message)}))},resetPwd:function(e){var t=this;Object(l["o"])({id:e.id}).then((function(e){e.success?t.$message.success("重置成功"):t.$message.error("重置失败："+e.message)}))},sysUserDelete:function(e){var t=this;Object(l["e"])(e).then((function(e){e.success?(t.$message.success("删除成功"),t.$refs.table.refresh()):t.$message.error("删除失败："+e.message)})).catch((function(e){t.$message.error("删除错误："+e.message)}))},sysUserExport:function(e){var t=this;this.cardLoading=!0,Object(l["i"])().then((function(e){t.cardLoading=!1,Object(p["b"])(e)})).catch((function(e){t.cardLoading=!1,t.$message.error("下载错误：获取文件流错误")}))},customRequest:function(e){var t=this,s=new FormData;s.append("file",e.file),Object(l["l"])(s).then((function(e){e.success?(t.$message.success("上传成功"),t.$refs.table.refresh()):t.$message.error("上传失败："+e.message)}))},handleClick:function(e){this.queryParam={"sysEmpParam.orgId":e.toString()},this.$refs.table.refresh(!0)},toggleAdvanced:function(){this.advanced=!this.advanced},handleOk:function(){this.$refs.table.refresh()},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},g=y,v=(s("51fb"),s("0c7c")),b=Object(v["a"])(g,a,r,!1,null,null,null);t["default"]=b.exports},"51fb":function(e,t,s){"use strict";s("b177")},b177:function(e,t,s){}}]);