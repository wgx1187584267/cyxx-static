(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-130474fe","chunk-2d0df854"],{"1c26":function(e,t,a){"use strict";a("eb7d")},2362:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("div",[a("a-modal",{attrs:{title:"查看用户",footer:null,width:1e3},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticStyle:{background:"#eee",padding:"15px"}},[a("a-row",{staticStyle:{"margin-left":"0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{padding:"0","max-height":"calc(100vh - 300px)","overflow-y":"auto"},attrs:{md:6,sm:24}},[a("a-card",{attrs:{bordered:!1,loading:e.treeLoading}},[""!=this.orgTree?a("div",[e.orgTree.length?a("a-tree",{attrs:{treeData:e.orgTree,defaultExpandAll:!1,defaultExpandedKeys:e.defaultExpandedKeys,replaceFields:e.replaceFields},on:{select:e.handleClick}}):e._e()],1):a("div",[a("a-empty",{attrs:{image:e.simpleImage}})],1)])],1),a("a-col",{attrs:{md:18,sm:24}},[a("a-card",{attrs:{bordered:!1}},[a("div",[a("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"sex",fn:function(t){return a("span",{},[e._v(" "+e._s(e.sexFilter(t))+" ")])}},{key:"status",fn:function(t){return a("span",{},[e._v(" "+e._s(e.statusFilter(t))+" ")])}},{key:"action",fn:function(t,s){return a("span",{},[a("a-popconfirm",{attrs:{placement:"topRight",title:"确认移除该用户的角色权限？"},on:{confirm:function(){return e.handleDelete(s.id)}}},[a("a",[e._v("移除")])])],1)}}],null,!1,3947135566)},[a("template",{slot:"operator"},[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-input",{attrs:{"allow-clear":"","addon-before":"关键字",placeholder:"请输入姓名、账号、手机号、科室名称"},model:{value:e.queryParam.searchValue,callback:function(t){e.$set(e.queryParam,"searchValue",t)},expression:"queryParam.searchValue"}})],1),a("a-col",{attrs:{span:8}},[a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v(" 查询 ")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)],1),a("a-row",{staticStyle:{"margin-top":"15px"}},[a("a-col",{attrs:{span:24}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.addRoleFrom.add(e.queryParam.sysRoleId)}}},[e._v(" 添加 ")]),a("a-button",{attrs:{icon:"delete",type:"danger",disabled:e.disabled},on:{click:function(t){return e.handleDelete(e.ids)}}},[e._v(" 批量移除 ")])],1)],1)],1)],2)],1)])],1)],1)],1)]),a("addRoleFrom",{ref:"addRoleFrom",on:{ok:e.handleOK}})],1):e._e()},r=[],n=a("54f8"),o=(a("06f4"),a("fc25")),l=(a("a15b"),a("4de4"),a("d3b7"),a("25f0"),a("2af9")),i=a("c1df"),c=a.n(i),d=a("25fa"),u=a("0901"),f=a("126f"),p=a("89eb"),m={components:{STable:l["r"],addRoleFrom:p["default"]},data:function(){var e=this;return{visible:!1,orgTree:[],disabled:!0,selectedRowKeys:[],selectedRows:[],ids:"",defaultExpandedKeys:[],sexDictTypeDropDown:[],statusDictTypeDropDown:[],treeLoading:!0,simpleImage:o["a"].PRESENTED_IMAGE_SIMPLE,replaceFields:{key:"id"},queryParam:{},columns:[{title:"账号",dataIndex:"account",sorter:!0},{title:"姓名",dataIndex:"name"},{title:"性别",dataIndex:"sex",scopedSlots:{customRender:"sex"}},{title:"手机",dataIndex:"phone"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",align:"center",width:"100px",dataIndex:"action",scopedSlots:{customRender:"action"}}],tstyle:{"padding-bottom":"0px","margin-bottom":"10px"},loadData:function(t){return Object(u["a"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))}}},methods:{moment:c.a,show:function(e){this.getTree(),this.sysDictTypeDropDown(),this.queryParam.sysRoleId=e.id,this.visible=!0},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t,e.length>0?this.disabled=!1:this.disabled=!0,this.ids=e.join("|")},handleDelete:function(e){var t=this;Object(u["f"])({userIds:e,SysRoleId:this.queryParam.sysRoleId}).then((function(e){e.success?(t.$message.success("删除成功"),t.$refs.table.refresh(),t.onSelectChange([])):t.$message.error("删除失败："+e.message)})).catch((function(e){t.$message.error("删除错误："+e.message)}))},handleOK:function(){this.$refs.table.refresh()},getTree:function(){var e=this;Object(d["c"])().then((function(t){if(e.treeLoading=!1,t.success){e.orgTree=t.data;var a,s=Object(n["a"])(t.data);try{for(s.s();!(a=s.n()).done;){var r=a.value;0==r.parentId&&e.defaultExpandedKeys.push(r.id)}}catch(o){s.e(o)}finally{s.f()}}}))},sexFilter:function(e){var t=this.sexDictTypeDropDown.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},statusFilter:function(e){var t=this.statusDictTypeDropDown.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},sysDictTypeDropDown:function(e){var t=this;Object(f["c"])({code:"sex"}).then((function(e){t.sexDictTypeDropDown=e.data})),Object(f["c"])({code:"common_status"}).then((function(e){t.statusDictTypeDropDown=e.data}))},handleClick:function(e){this.queryParam={"sysEmpParam.orgId":e.toString()},this.$refs.table.refresh(!0)}}},h=m,b=(a("1c26"),a("0c7c")),y=Object(b["a"])(h,s,r,!1,null,null,null);t["default"]=y.exports},"89eb":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible},on:{cancel:e.handleCancel,ok:e.handleSubmit}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules}},[a("a-form-model-item",{attrs:{label:"用户",prop:"userIds"}},[a("MyUserSelect",{attrs:{placeholder:"请选择用户"},model:{value:e.form.userIds,callback:function(t){e.$set(e.form,"userIds",t)},expression:"form.userIds"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{key:"back",on:{click:e.handleCancel}},[e._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("确定 ")])],1)],1)},r=[],n=(a("a15b"),a("0901")),o=a("469e"),l={components:{MyUserSelect:o["a"]},data:function(){return{title:"添加",labelCol:{span:5},wrapperCol:{span:16},visible:!1,loading:!1,rules:{userIds:[{required:!0,message:"请选择用户",trigger:"change"}]},form:{sysRoleId:null,userIds:null}}},methods:{add:function(e){this.title="添加",this.visible=!0,this.loading=!1,this.form=Object.assign({},this.$options.data().form),this.form.sysRoleId=e},handleSubmit:function(){var e=this;this.loading=!0,this.$refs.ruleForm.validate((function(t){if(!t)return e.loading=!1,!1;var a=JSON.parse(JSON.stringify(e.form));a.userIds?a.userIds=Array.isArray(a.userIds)?a.userIds.join("|"):a.userIds:delete a.userIds,Object(n["b"])(a).then((function(t){t.success?(e.visible=!1,e.$message.success("添加成功！"),e.$emit("ok")):(e.loading=!1,e.$message.error("添加失败！"))}))}))},handleCancel:function(){this.visible=!1}}},i=l,c=a("0c7c"),d=Object(c["a"])(i,s,r,!1,null,null,null);t["default"]=d.exports},eb7d:function(e,t,a){}}]);