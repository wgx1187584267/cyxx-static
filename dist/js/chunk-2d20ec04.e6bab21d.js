(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20ec04"],{b165:function(e,a,r){"use strict";r.r(a);var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("a-modal",{attrs:{title:e.title,width:800,visible:e.visible},on:{cancel:e.handleCancel,ok:e.handleSubmit}},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules}},[r("a-form-model-item",{attrs:{label:"年级名称",prop:"grade_name"}},[r("a-select",{attrs:{"allow-clear":"",placeholder:"请选择年级名称",showSearch:!0,optionFilterProp:"label"},model:{value:e.form.grade_name,callback:function(a){e.$set(e.form,"grade_name",a)},expression:"form.grade_name"}},e._l(e.gradeName,(function(a){return r("a-select-option",{key:a.id,attrs:{value:a.code,label:a.name}},[e._v(e._s(a.name))])})),1)],1),r("a-form-model-item",{attrs:{label:"年级别名",prop:"grade_alias"}},[r("a-input",{attrs:{placeholder:"请输入年级别名"},model:{value:e.form.grade_alias,callback:function(a){e.$set(e.form,"grade_alias",a)},expression:"form.grade_alias"}})],1),r("a-form-model-item",{attrs:{label:"学段",prop:"academic_stage"}},[r("a-select",{attrs:{"allow-clear":"",placeholder:"请选择学段"},model:{value:e.form.academic_stage,callback:function(a){e.$set(e.form,"academic_stage",a)},expression:"form.academic_stage"}},e._l(e.academicStage,(function(a){return r("a-select-option",{key:a.id,attrs:{value:a.code}},[e._v(e._s(a.name))])})),1)],1),r("a-form-model-item",{attrs:{label:"是否有效",prop:"yes_or_no"}},[r("a-radio-group",{model:{value:e.form.yes_or_no,callback:function(a){e.$set(e.form,"yes_or_no",a)},expression:"form.yes_or_no"}},e._l(e.yesNo,(function(a,t){return r("a-radio",{key:t,attrs:{value:a.code}},[e._v(e._s(a.name))])})),1)],1),r("a-form-model-item",{attrs:{label:"年级负责人",prop:"grade_leader"}},[r("MyUserSelect",{attrs:{placeholder:"请选择年级负责人"},model:{value:e.form.grade_leader,callback:function(a){e.$set(e.form,"grade_leader",a)},expression:"form.grade_leader"}})],1),r("a-form-model-item",{attrs:{label:"排序"}},[r("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.form.sort,callback:function(a){e.$set(e.form,"sort",a)},expression:"form.sort"}})],1),r("a-form-model-item",{attrs:{label:"备注"}},[r("a-textarea",{attrs:{placeholder:"请输入备注",allowClear:!0,"auto-size":{minRows:2}},model:{value:e.form.remark,callback:function(a){e.$set(e.form,"remark",a)},expression:"form.remark"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("a-button",{key:"back",on:{click:e.handleCancel}},[e._v(" 取消 ")]),r("a-button",{key:"submit",attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("确定 ")])],1)],1)},o=[],l=(r("a15b"),r("4e78")),s=r("469e"),i={components:{MyUserSelect:s["a"]},data:function(){return{title:"添加",labelCol:{span:4},wrapperCol:{span:16},visible:!1,loading:!1,gradeName:[],academicStage:[],yesNo:[],rules:{grade_name:[{required:!0,message:"请选择年级名称",trigger:"change"}],academic_stage:[{required:!0,message:"请选择学段",trigger:"change"}],yes_or_no:[{required:!0,message:"请选择是否有效",trigger:"change"}],grade_leader:[{required:!0,message:"请选择年级负责人",trigger:"change"}]},form:{}}},created:function(){this.yesNo=this.$options.filters["dictData"]("yes_or_no"),this.gradeName=this.$options.filters["userDictData"]("grade_name"),this.academicStage=this.$options.filters["userDictData"]("academic_stage")},methods:{add:function(){this.title="添加",this.visible=!0,this.loading=!1,this.form=Object.assign({},this.$options.data().form),this.$set(this.form,"yes_or_no","1")},edit:function(e){this.title="编辑",this.visible=!0,this.loading=!1,this.getDetail(e.id)},getDetail:function(e){var a=this;Object(l["k"])({id:e}).then((function(e){e.success&&(a.form=e.data,0==e.data.grade_leader&&(a.form.grade_leader=null))}))},handleSubmit:function(){var e=this;this.loading=!0,this.$refs.ruleForm.validate((function(a){if(!a)return e.loading=!1,!1;var r=JSON.parse(JSON.stringify(e.form));r.grade_leader?r.grade_leader=Array.isArray(r.grade_leader)?r.grade_leader.join("|"):r.grade_leader:delete r.grade_leader,"添加"===e.title?Object(l["i"])(r).then((function(a){a.success?(e.visible=!1,e.$message.success("添加成功！"),e.$emit("ok")):(e.loading=!1,e.$message.error("添加失败："+a.message))})):Object(l["l"])(r).then((function(a){a.success?(e.visible=!1,e.$message.success("修改成功！"),e.$emit("ok")):(e.loading=!1,e.$message.error("修改失败："+a.message))}))}))},handleCancel:function(){this.visible=!1}}},n=i,c=r("0c7c"),d=Object(c["a"])(n,t,o,!1,null,null,null);a["default"]=d.exports}}]);