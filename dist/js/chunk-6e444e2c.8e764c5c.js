(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e444e2c","chunk-0975dc72","chunk-0ae1b35a","chunk-f8a3e6ba"],{"0974":function(e,t,a){},"0acb":function(e,t,a){"use strict";a("0974")},"241d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-modal",{attrs:{title:"问卷链接",width:900,footer:null},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("a-row",[s("a-col",{staticStyle:{background:"#DCDFE6 !important"},attrs:{span:12}},[s("div",{ref:"cardContent",staticStyle:{background:"#DCDFE6 !important",padding:"20px 0"}},[s("div",{staticClass:"cardContent"},[s("div",{staticClass:"logo"},[s("img",{staticClass:"icon-logo logo-ksx",attrs:{src:"/logo.webp"}})]),s("div",{staticClass:"title"},[s("p",{staticClass:"invite"},[e._v("—— 邀请你参加 ——")]),s("p",{staticClass:"title_content"},[e._v(e._s(e.form.questionnaire_title))])]),s("div",{staticClass:"qr_code"},[s("vue-qr",{attrs:{text:e.url,margin:0,colorDark:"#ef9b27",colorLight:"#fff",size:110}}),s("div",{staticClass:"tip"},[e._v("识别二维码参加问卷调查")])],1)])])]),s("a-col",{staticStyle:{height:"620px",padding:"20px",position:"relative"},attrs:{span:12}},[s("p",{staticStyle:{"font-weight":"bold",color:"#000","font-size":"16px"}},[e._v("问卷地址")]),s("div",{staticClass:"exam_url"},[s("span",[e._v(e._s(e.url))]),s("a-tag",{staticClass:"copybtn",staticStyle:{"margin-left":"10px"},attrs:{"data-clipboard-text":e.url,color:"cyan"},on:{click:e.copywxtap}},[e._v("复制地址")])],1),s("img",{staticStyle:{margin:"60px 0 0 70px"},attrs:{src:a("0263")}}),s("div",{staticClass:"btn"},[s("a-button",{attrs:{type:"primary",ghost:""},on:{click:e.exportPic}},[e._v("下载图片")])],1)])],1)],1)],1)},n=[],i=a("658f5"),r=a.n(i),o=a("c0e9"),l=a.n(o),c=a("b311"),d=a.n(c),u={components:{vueQr:r.a},data:function(){return{visible:!1,url:"",form:{}}},methods:{showModal:function(e){1!==e.state?(this.form=e,this.url=window._CONFIG["webProjectUrl"]+"/outerNet/questionnaire/"+e.id,this.visible=!0):this.$message.error("请先发布问卷！")},handleOk:function(e){this.visible=!1},exportPic:function(){l()(this.$refs.cardContent).then((function(e){var t=e.toDataURL("image/png");if(""!==t){var a=document.createElement("a");a.download="问卷名片",a.href=t,a.click()}}))},copywxtap:function(){var e=this,t=new d.a(".copybtn");t.on("success",(function(a){e.$message.success("复制成功！"),t.destroy()})),t.on("error",(function(a){e.$message.success("该浏览器不支持自动复制！"),t.destroy()}))}}},_=u,p=(a("9584"),a("0c7c")),f=Object(p["a"])(_,s,n,!1,null,"532d5711",null);t["default"]=f.exports},3582:function(e,t,a){"use strict";a("5424")},5424:function(e,t,a){},"6c0a":function(e,t,a){},"6e2e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{width:650,title:"回收详情"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!1,rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"action",fn:function(t,s){return a("span",{},[a("h-link",{attrs:{type:"success"},nativeOn:{click:function(t){return e.$refs.previewResultModal.showModal(s)}}},[e._v("详情")])],1)}}])},[a("div",{staticClass:"table-operator",attrs:{slot:"operator"},slot:"operator"},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"年级班级"}},[a("SelectGradeClass",{attrs:{placeholder:"请选择",changeOnSelect:!0,academicStage:"2"},model:{value:e.queryParam.gradeClass,callback:function(t){e.$set(e.queryParam,"gradeClass",t)},expression:"queryParam.gradeClass"}})],1)],1),a("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[a("h-search-button",{on:{click:function(t){return e.$refs.table.refresh(!0)}}}),a("h-reset-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}})],1)])],1)],1)],1)])])],1),a("PreviewResultModal",{ref:"previewResultModal"})],1)},n=[],i=a("2af9"),r=a("15b6"),o=a("e3b2"),l={components:{STable:i["r"],PreviewResultModal:o["default"]},data:function(){var e=this;return{visible:!1,advanced:!1,queryParam:{questionnaire_id:""},columns:[{title:"年级",align:"center",dataIndex:"student_grade_name"},{title:"班级",align:"center",dataIndex:"student_class_name"},{title:"学生",align:"center",dataIndex:"student_name"},{title:"总分",align:"center",dataIndex:"total_score"},{title:"问卷回收时间",align:"center",dataIndex:"retrieving_time"},{title:"操作",width:"100px",dataIndex:"action",scopedSlots:{customRender:"action"}}],tstyle:{"padding-bottom":"0px","margin-bottom":"10px"},loadData:function(t){return Object(r["g"])(Object.assign(t,e.formatParameters())).then((function(e){return e.data}))}}},methods:{formatParameters:function(){var e=JSON.parse(JSON.stringify(this.queryParam));return e.gradeClass&&e.gradeClass.length?e.grade=e.gradeClass[0]:delete e.grade,e.gradeClass&&e.gradeClass.length?e.class_id=e.gradeClass[1]:delete e.class_id,delete e.gradeClass,e},showModal:function(e){this.queryParam.questionnaire_id=e.id;try{this.$refs.table.refresh()}catch(t){}this.visible=!0},handleOk:function(e){this.visible=!1}}},c=l,d=a("0c7c"),u=Object(d["a"])(c,s,n,!1,null,null,null);t["default"]=u.exports},9584:function(e,t,a){"use strict";a("e8f6")},bf68:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{title:"问卷预览",width:800,footer:null},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("h2",{staticClass:"title"},[e._v(e._s(e.form.questionnaire_title))]),e.form.questionnaire_describe?a("p",[e._v(e._s(e.form.questionnaire_describe))]):e._e(),a("a-divider",{attrs:{dashed:""}}),a("div",{staticClass:"block-manager"},e._l(e.form.question_block,(function(t){return a("div",{key:t.id,staticClass:"block-item"},[a("a-card",[a("div",{staticClass:"block-header"},[a("h3",[e._v(e._s(t.question_block_name))])]),a("div",{staticClass:"block-questions"},e._l(t.questionnaire_question,(function(s){return a("div",{key:s.id||s.key,staticClass:"question-item"},[a("span",{staticClass:"content"},[1===s.question_type||2===s.question_type?a("div",[a("a-row",[a("a-col",{attrs:{span:24}},[a("h3",[a("span",{class:Number(s.must_answer)?"star":""},[e._v(e._s(t.questionnaire_question.indexOf(s)+1)+"、")]),a("span",{domProps:{innerHTML:e._s(s.stem)}})])])],1),e._l(s.questionnaire_question_option,(function(t){return a("div",{key:t.id||t.key,staticClass:"question-option"},[1===s.question_type?a("span",{class:s.question_answer==t.sort?"selCircular":"circular"}):e._e(),2===s.question_type?a("span",{class:s.question_answer.split("|").map(Number).includes(t.sort)?"selSquare":"square"}):e._e(),a("span",{domProps:{innerHTML:e._s(t.content)}}),"1"==t.is_fill?a("span",[e._v("___")]):e._e()])})),a("a-divider",{attrs:{dashed:""}}),a("div",[a("div",{staticStyle:{"margin-bottom":"8px"}},[e._v(" 问题分值："+e._s(s.score)+" 分 ")]),a("div",[e._v("问题解析："),a("span",{domProps:{innerHTML:e._s(s.analysis)}})])])],2):a("div",[a("a-row",[a("a-col",{attrs:{span:24}},[a("h3",[a("span",{class:Number(s.must_answer)?"star":""},[e._v(e._s(t.questionnaire_question.indexOf(s)+1)+"、")]),a("span",{domProps:{innerHTML:e._s(s.stem)}})])])],1),3===s.question_type?a("div",{staticClass:"judge-options"},[a("p",[a("span",{class:"true"==s.question_answer?"selCircular":"circular"}),e._v(" 正确 ")]),a("p",[a("span",{class:"false"==s.question_answer?"selCircular":"circular"}),e._v(" 错误 ")])]):e._e(),5===s.question_type?a("div",{staticClass:"essay-box"},[a("div",{staticClass:"rectangle"})]):e._e(),a("a-divider",{attrs:{dashed:""}}),a("div",[a("div",{staticStyle:{"margin-bottom":"8px"}},[e._v(" 问题分值："+e._s(s.score)+" 分 ")]),4===s.question_type?a("div",{staticStyle:{"margin-bottom":"8px",display:"flex","flex-direction":"row","flex-wrap":"nowrap","justify-content":"flex-start","align-items":"flex-start"}},[a("div",{staticStyle:{width:"70px"}},[e._v("问题答案：")]),a("div",e._l(s.questionnaire_question_option,(function(t){return a("div",{key:t.id||t.key},[a("span",{domProps:{innerHTML:e._s(t.content)}})])})),0)]):e._e(),5===s.question_type?a("div",{staticStyle:{"margin-bottom":"8px"}},[a("div",[e._v("问题答案："),a("span",{domProps:{innerHTML:e._s(s.question_answer)}})])]):e._e(),a("div",[e._v("问题解析："),a("span",{domProps:{innerHTML:e._s(s.analysis)}})])])],1)])])})),0)])],1)})),0)],1)],1)},n=[],i={data:function(){return{visible:!1,form:{}}},methods:{showModal:function(e){this.form=e,this.visible=!0},handleOk:function(e){this.visible=!1}}},r=i,o=(a("3582"),a("0c7c")),l=Object(o["a"])(r,s,n,!1,null,"6d4eebcc",null);t["default"]=l.exports},e3b2:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{title:"答卷详情",width:800,footer:null},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("h2",{staticClass:"title"},[e._v(e._s(e.form.questionnaire_title)+"(得分："+e._s(e.form.total_score)+"分)")]),e.form.questionnaire_describe?a("p",[e._v(e._s(e.form.questionnaire_describe))]):e._e(),a("a-divider",{attrs:{dashed:""}}),a("div",{staticClass:"block-manager"},e._l(e.form.question_block,(function(t){return a("div",{key:t.id,staticClass:"block-item"},[a("a-card",[a("div",{staticClass:"block-header"},[a("h3",[e._v(e._s(t.question_block_name))])]),a("div",{staticClass:"block-questions"},e._l(t.questionnaire_question,(function(s){return a("div",{key:s.id||s.key,staticClass:"question-item"},[a("span",{staticClass:"content"},[1===s.question_type||2===s.question_type?a("div",[a("a-row",[a("a-col",{attrs:{span:24}},[a("h3",[a("span",{style:{color:"1"==s.is_correct?"#1ac438":"red"}},[e._v("("+e._s("1"==s.is_correct?"√":"×")+")")]),a("span",{class:Number(s.must_answer)?"star":""},[e._v(e._s(t.questionnaire_question.indexOf(s)+1)+"、")]),a("span",{domProps:{innerHTML:e._s(s.stem)}})])])],1),e._l(s.questionnaire_question_option,(function(t){return a("div",{key:t.id||t.key,staticClass:"question-option"},[1===s.question_type?a("span",{class:s.answer==t.sort?"selCircular":"circular"}):e._e(),2===s.question_type?a("span",{class:s.answer.includes(t.sort)?"selSquare":"square"}):e._e(),a("span",{domProps:{innerHTML:e._s(t.content)}}),"1"==t.is_fill?a("span",[e._v("填空："+e._s(t.answer_content))]):e._e()])})),a("a-divider",{attrs:{dashed:""}}),a("div",[a("div",{staticStyle:{"margin-bottom":"8px"}},[e._v("问题分值："+e._s(s.score)+" 分；"),a("span",{staticStyle:{"margin-left":"10px"},style:{color:"1"==s.is_correct?"#1ac438":"red"}},[e._v("得分："+e._s(s.result_score)+"分")])]),1===s.question_type?a("div",{staticStyle:{"margin-bottom":"8px"}},[e._v("问题答案："+e._s(String.fromCharCode(Number(s.question_answer)+64)))]):e._e(),2===s.question_type?a("div",{staticStyle:{"margin-bottom":"8px"}},[e._v("问题答案："+e._s(s.question_answerArr.join("、")))]):e._e(),a("div",[e._v("问题解析："),a("span",{domProps:{innerHTML:e._s(s.analysis)}})])])],2):a("div",[a("a-row",[a("a-col",{attrs:{span:24}},[a("h3",[a("span",{style:{color:"1"==s.is_correct?"#1ac438":"red"}},[e._v("("+e._s("1"==s.is_correct?"√":"×")+")")]),a("span",{class:Number(s.must_answer)?"star":""},[e._v(e._s(t.questionnaire_question.indexOf(s)+1)+"、")]),a("span",{domProps:{innerHTML:e._s(s.stem)}})])])],1),3===s.question_type?a("div",{staticClass:"judge-options"},[a("p",[a("span",{class:1==s.answer?"selCircular":"circular"}),e._v(" 正确")]),a("p",[a("span",{class:0==s.answer?"selCircular":"circular"}),e._v(" 错误 ")])]):e._e(),4===s.question_type?a("div",{staticStyle:{"margin-bottom":"8px",display:"flex","flex-direction":"row","flex-wrap":"nowrap","justify-content":"flex-start","align-items":"flex-start"}},[a("div",{staticStyle:{width:"70px"}},[e._v("答题内容：")]),a("div",e._l(s.questionnaire_question_option,(function(t){return a("div",{key:t.id||t.key},[a("span",{domProps:{innerHTML:e._s(t.answer)}})])})),0)]):e._e(),5===s.question_type?a("div",{staticClass:"essay-box"},[a("div",{staticClass:"rectangle"},[e._v("回答："+e._s(s.answer))])]):e._e(),a("a-divider",{attrs:{dashed:""}}),a("div",[a("div",{staticStyle:{"margin-bottom":"8px"}},[e._v("问题分值："+e._s(s.score)+" 分；"),a("span",{staticStyle:{"margin-left":"10px"},style:{color:"1"==s.is_correct?"#1ac438":"red"}},[e._v("得分："+e._s(s.result_score)+"分")])]),3===s.question_type?a("div",{staticStyle:{"margin-bottom":"8px"}},[e._v("问题答案："+e._s("false"==s.question_answer?"错误":"true"==s.question_answer?"正确":""))]):e._e(),4===s.question_type?a("div",{staticStyle:{"margin-bottom":"8px",display:"flex","flex-direction":"row","flex-wrap":"nowrap","justify-content":"flex-start","align-items":"flex-start"}},[a("div",{staticStyle:{width:"70px"}},[e._v("问题答案：")]),a("div",e._l(s.questionnaire_question_option,(function(t){return a("div",{key:t.id||t.key},[a("span",{domProps:{innerHTML:e._s(t.content)}})])})),0)]):e._e(),5===s.question_type?a("div",{staticStyle:{"margin-bottom":"8px"}},[a("div",[e._v("问题答案："),a("span",{domProps:{innerHTML:e._s(s.question_answer)}})])]):e._e(),a("div",[e._v("问题解析："),a("span",{domProps:{innerHTML:e._s(s.analysis)}})])])],1)])])})),0)])],1)})),0)],1)],1)},n=[],i=(a("159b"),a("a9e3"),a("a630"),a("3ca3"),a("d81d"),a("ac1f"),a("1276"),{data:function(){return{visible:!1,form:{}}},methods:{showModal:function(e){this.form=e,this.visible=!0,this.form.question_block.forEach((function(e){e.questionnaire_question.forEach((function(e){if(1==e.question_type)e.questionnaire_result_detailed.forEach((function(t){e.is_correct=t.is_correct,e.result_score=t.score,e.answer=Number(t.checked_num);var a=Array.from({length:e.answer},(function(){return""}));a[e.answer]=t.answer_content,e.answer_content=a,e.questionnaire_question_option.forEach((function(e,t){e.answer_content=a[t]}))}));else if(2==e.question_type){e.answer=[],e.questionnaire_result_detailed.forEach((function(t){e.is_correct=t.is_correct,e.result_score=t.score;var a=t.checked_num.split("|").map(Number);e.answer=a;for(var s=t.answer_content.split("|"),n=Array.from({length:a[a.length-1]},(function(){return""})),i=0;i<n.length;i++){var r=a.indexOf(i+1);-1!==r&&(n[i]=s[r])}e.answer_content=n,e.questionnaire_question_option.forEach((function(e,t){e.answer_content=n[t]}))}));var t=e.question_answer.split("|").map((function(e){return String.fromCharCode(Number(e)+64)}));e.question_answerArr=t}else 3==e.question_type?e.questionnaire_result_detailed.forEach((function(t){e.is_correct=t.is_correct,e.result_score=t.score,e.answer=JSON.parse(t.checked_num)})):4==e.question_type?e.questionnaire_result_detailed.forEach((function(t){e.is_correct=t.is_correct,e.result_score=t.score;var a=t.answer_content.split("|");e.questionnaire_question_option.forEach((function(e,t){e.answer=a[t]}))})):5==e.question_type&&e.questionnaire_result_detailed.forEach((function(t){e.is_correct=t.is_correct,e.result_score=t.score,e.answer=t.answer_content}))}))}))},handleOk:function(e){this.visible=!1}}}),r=i,o=(a("f848"),a("0c7c")),l=Object(o["a"])(r,s,n,!1,null,"12c2efbe",null);t["default"]=l.exports},e8f6:function(e,t,a){},f848:function(e,t,a){"use strict";a("6c0a")},fe42:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{attrs:{bordered:!1,bodyStyle:e.tstyle}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"学年学期"}},[a("a-cascader",{attrs:{fieldNames:e.fieldNames,options:e.yearTree,placeholder:"请选择学年学期","change-on-select":!1},model:{value:e.queryParam.ysValue,callback:function(t){e.$set(e.queryParam,"ysValue",t)},expression:"queryParam.ysValue"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"问卷标题"}},[a("a-input",{staticStyle:{width:"100%"},attrs:{"allow-clear":"",placeholder:"请输入问卷标题"},model:{value:e.queryParam.questionnaire_title,callback:function(t){e.$set(e.queryParam,"questionnaire_title",t)},expression:"queryParam.questionnaire_title"}})],1)],1),e.advanced?[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"适用年级"}},[a("SelGrade",{attrs:{parameter:{academic_stage:"2"}},model:{value:e.queryParam.grade,callback:function(t){e.$set(e.queryParam,"grade",t)},expression:"queryParam.grade"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"问卷类型"}},[a("a-select",{attrs:{"allow-clear":"",placeholder:"请选择"},model:{value:e.queryParam.questionnaire_type,callback:function(t){e.$set(e.queryParam,"questionnaire_type",t)},expression:"queryParam.questionnaire_type"}},e._l(e.queryContent.questionnaire_type,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(" "+e._s(t.value)+" ")])})),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"问卷状态"}},[a("a-select",{attrs:{"allow-clear":"",placeholder:"请选择"},model:{value:e.queryParam.state,callback:function(t){e.$set(e.queryParam,"state",t)},expression:"queryParam.state"}},e._l(e.queryContent.questionnaire_state,(function(t){return a("a-select-option",{key:t.code,attrs:{value:t.code}},[e._v(" "+e._s(t.value)+" ")])})),1)],1)],1)]:e._e(),a("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[a("h-search-button",{on:{click:function(t){return e.$refs.table.refresh(!0)}}}),a("h-reset-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={ysValue:[]}}}}),a("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),a("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1)]),a("a-card",{attrs:{bordered:!1}},[a("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!1,rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"grade_name",fn:function(t){return a("span",{},[a("span",[e._v(e._s(t.replace("|","，")))])])}},{key:"questionnaire_type",fn:function(t){return a("span",{},[a("span",[e._v(e._s(e._f("dictType")("questionnaire_type",t)))])])}},{key:"read_num",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:"#2db7f5"}},[e._v(e._s(t)+" 次")])],1)}},{key:"state",fn:function(t,s){return a("span",{},[a("a-switch",{attrs:{"checked-children":"发布","un-checked-children":"停用",checked:0==t},on:{change:function(t){return e.handleState(s)}}})],1)}},{key:"action",fn:function(t,s){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.previewModal.showModal(s)}}},[e._v("预览")]),a("a-divider",{attrs:{type:"vertical"}}),a("h-link",{attrs:{type:"warning"},nativeOn:{click:function(t){return e.$refs.addEditForm.edit(s)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("h-link",{attrs:{type:"success"},nativeOn:{click:function(t){return e.$refs.recyclingDetailsModal.showModal(s)}}},[e._v("回收情况")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？"},on:{confirm:function(){return e.handleDelete(s)}}},[a("h-link",{attrs:{type:"danger"}},[e._v("删除")])],1)],1)}}])},[a("div",{staticClass:"table-operator",attrs:{slot:"operator"},slot:"operator"},[a("h-button",{attrs:{type:"success",icon:"plus"},on:{click:function(t){return e.$refs.addEditForm.add()}}},[e._v("创建问卷")])],1)])],1),a("AddEditForm",{ref:"addEditForm",on:{ok:e.handleOk}}),a("PreviewModal",{ref:"previewModal"}),a("QuestionnaireLinkModal",{ref:"questionnaireLinkModal"}),a("RecyclingDetailsModal",{ref:"recyclingDetailsModal"})],1)},n=[],i=a("2af9"),r=a("15b6"),o=a("8c77"),l=a("bf68"),c=a("241d"),d=a("6e2e"),u=a("d0fff"),_=a("126f"),p={components:{STable:i["r"],AddEditForm:o["default"],PreviewModal:l["default"],QuestionnaireLinkModal:c["default"],RecyclingDetailsModal:d["default"]},data:function(){var e=this;return{queryParam:{ysValue:[]},advanced:!1,fieldNames:{label:"name",value:"id",children:"children"},yearTree:[],queryContent:{questionnaire_type:[],questionnaire_state:[]},columns:[{title:"学年",align:"center",dataIndex:"school_year_name"},{title:"学期",align:"center",dataIndex:"semester_name"},{title:"适用年级",align:"center",dataIndex:"grade_name",scopedSlots:{customRender:"grade_name"}},{title:"问卷类型",align:"center",dataIndex:"questionnaire_type",scopedSlots:{customRender:"questionnaire_type"}},{title:"问卷标题",align:"center",dataIndex:"questionnaire_title"},{title:"创建人",align:"center",dataIndex:"add_person_name"},{title:"创建时间",align:"center",dataIndex:"add_time"},{title:"发布/停用",width:"80px",align:"center",dataIndex:"state",scopedSlots:{customRender:"state"}},{title:"阅读量",align:"center",dataIndex:"read_num",scopedSlots:{customRender:"read_num"}},{title:"操作",width:"220px",align:"center",dataIndex:"action",scopedSlots:{customRender:"action"}}],tstyle:{"padding-bottom":"0px","margin-bottom":"10px"},loadData:function(t){return Object(r["f"])(Object.assign(t,e.switchingDate())).then((function(e){return e.data}))}}},created:function(){this.getChangeTypeTree(),this.dictTypeDropDown()},methods:{switchingDate:function(){var e=JSON.parse(JSON.stringify(this.queryParam));return e.ysValue&&e.ysValue.length?e.school_year=e.ysValue[0]:delete e.school_year,e.ysValue&&e.ysValue.length?e.semester=e.ysValue[1]:delete e.semester,delete e.ysValue,e},dictTypeDropDown:function(){var e=this;Object(_["c"])({code:"questionnaire_type"}).then((function(t){e.queryContent.questionnaire_type=t.data})),Object(_["c"])({code:"questionnaire_state"}).then((function(t){e.queryContent.questionnaire_state=t.data}))},handleDelete:function(e){var t=this;Object(r["b"])({id:e.id}).then((function(e){e.success?(t.$message.success("删除成功"),t.$refs.table.refresh()):t.$message.error("删除失败："+e.message)}))},getChangeTypeTree:function(){var e=this;Object(u["g"])().then((function(t){e.yearTree=e.deleteChildren(t.data)}))},deleteChildren:function(e){for(var t=e,a=t.length;a--;a>0)t[a].children&&(t[a].children.length?this.deleteChildren(t[a].children):delete t[a].children);return e},handleState:function(e){var t=this,a=0===e.state?"1":"0";Object(r["h"])({id:e.id,state:a}).then((function(e){e.success?(t.$message.success("操作成功"),t.$refs.table.refresh()):t.$message.error("操作失败："+e.message)}))},handleOk:function(){this.$refs.table.refresh()},toggleAdvanced:function(){this.advanced=!this.advanced}}},f=p,m=(a("0acb"),a("0c7c")),v=Object(m["a"])(f,s,n,!1,null,null,null);t["default"]=v.exports}}]);