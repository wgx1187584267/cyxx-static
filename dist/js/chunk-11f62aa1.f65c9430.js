(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11f62aa1"],{"032b":function(e,t,a){},d08e:function(e,t,a){"use strict";a("032b")},dd26:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-settings-info-view"},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{md:24,lg:16}},[a("a-form",{attrs:{layout:"vertical",form:e.form}},[a("a-form-item",{attrs:{label:"昵称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],attrs:{placeholder:"给自己起个昵称吧"}})],1),a("a-form-item",{attrs:{label:"生日"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["birthday",{rules:[{required:!0,message:"请选择生日！"}]}],expression:"['birthday', {rules: [{required: true, message: '请选择生日！'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择生日"},on:{change:e.onChange}})],1),a("a-form-item",{attrs:{label:"性别"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["sex",{rules:[{required:!0,message:"请选择性别！"}]}],expression:"['sex',{rules: [{ required: true, message: '请选择性别！' }]}]"}]},e._l(e.sexData,(function(t,r){return a("a-radio",{key:r,attrs:{value:parseInt(t.code)}},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{attrs:{label:"手机"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{rules:[{required:!0,message:"请输入手机号！"}]}],expression:"['phone', {rules: [{required: true, message: '请输入手机号！'}]}]"}],attrs:{placeholder:"请输入手机号"}})],1),a("a-form-item",{attrs:{label:"电话"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["tel"],expression:"['tel']"}],attrs:{placeholder:"请输入电话"}})],1),a("a-form-item",{attrs:{label:"电子邮件"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{type:"email",message:"请输入正确的邮箱号",rules:[{required:!0,message:"请输入正确的邮箱号！"}]}],expression:"['email', {type: 'email',message: '请输入正确的邮箱号',rules: [{required: true, message: '请输入正确的邮箱号！'}]}]"}],attrs:{placeholder:"请输入电子邮件地址"}})],1),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:e.submitUserInfo}},[e._v("更新基本信息")])],1)],1)],1),a("a-col",{style:{minHeight:"180px"},attrs:{md:24,lg:8}},[a("div",{staticClass:"ant-upload-preview",on:{click:function(t){return e.$refs.modal.edit(e.userInfo.id)}}},[a("a-icon",{staticClass:"upload-icon",attrs:{type:"cloud-upload-o"}}),a("div",{staticClass:"mask"},[a("a-icon",{attrs:{type:"plus"}})],1),a("img",{attrs:{src:e.option.img},on:{error:function(t){return e.loadError()}}})],1)])],1),a("avatar-modal",{ref:"modal",on:{ok:e.setavatar}})],1)},o=[],s=a("f3f3"),i=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("4360")),n=a("5e4e"),c=a("2f62"),u=a("c1df"),d=a.n(u),l=a("0901"),m=a("6597"),f={components:{AvatarModal:n["default"]},data:function(){return{preview:{},form:this.$form.createForm(this),sexData:[],option:{img:"/avatar.webp",info:!0,size:1,outputType:"jpeg",canScale:!1,autoCrop:!0,autoCropWidth:180,autoCropHeight:180,fixedBox:!0,fixed:!0,fixedNumber:[1,1],birthdayString:""}}},computed:Object(s["a"])({},Object(c["c"])(["userInfo"])),mounted:function(){this.initUserInfo()},methods:{loadError:function(){var e=event.srcElement;e.src="/avatar.webp",e.onerror=null},initUserInfo:function(){var e=this;setTimeout((function(){e.form.setFieldsValue({birthday:d()(e.userInfo.birthday,"YYYY-MM-DD"),nickName:e.userInfo.nickName,sex:e.userInfo.sex,email:e.userInfo.email,phone:e.userInfo.phone,tel:e.userInfo.tel}),e.birthdayString=d()(e.userInfo.birthday).format("YYYY-MM-DD"),e.userInfo.avatar&&Object(m["d"])({id:e.userInfo.avatar}).then((function(t){e.option.img=window.URL.createObjectURL(new Blob([t]))})).catch((function(t){e.$message.error("预览错误："+t.message)})),e.getSexData()}),100)},onChange:function(e,t){this.birthdayString=t},submitUserInfo:function(){var e=this,t=this.form.validateFields;t((function(t,a){t||(a.birthday=e.birthdayString,a.id=e.userInfo.id,Object(l["r"])(a).then((function(t){t.success?(e.$message.success("个人信息更新成功"),i["a"].dispatch("GetInfo").then((function(){}))):e.$message.error(t.message)})))}))},getSexData:function(){this.sexData=this.$options.filters["dictData"]("sex")},setavatar:function(e){var t=this;Object(m["d"])({id:e}).then((function(e){t.option.img=window.URL.createObjectURL(new Blob([e]))})).catch((function(e){t.$message.error("预览错误："+e.message)})),i["a"].dispatch("GetInfo").then((function(){}))}}},p=f,h=(a("d08e"),a("0c7c")),v=Object(h["a"])(p,r,o,!1,null,"2feac0e4",null);t["default"]=v.exports}}]);