(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-741d3ab1"],{9892:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"f",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return n})),a.d(t,"e",(function(){return c}));var r=a("b775");function s(e){return Object(r["b"])({url:"/StudentSickLeaveRecord/Create",method:"post",data:e})}function i(e){return Object(r["b"])({url:"/StudentSickLeaveRecord/Edit",method:"post",data:e})}function o(e){return Object(r["b"])({url:"/StudentSickLeaveRecord/Get",method:"get",params:e})}function l(e){return Object(r["b"])({url:"/StudentSickLeaveRecord/Detail",method:"get",params:e})}function n(e){return Object(r["b"])({url:"/StudentSickLeaveRecord/Del",method:"post",data:e})}function c(e){return Object(r["b"])({url:"/StudentSickLeaveRecord/Export",method:"post",data:e,responseType:"blob"})}},a6fa:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible},on:{cancel:e.handleCancel,ok:e.handleSubmit}},[a("a-form-model",{ref:"ruleForm",attrs:{model:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules}},[a("a-form-model-item",{attrs:{label:"学年学期",prop:"year_semester"}},[a("SelYearSemesterCascader",{attrs:{changeOnSelect:!1,placeholder:"请选择"},model:{value:e.form.year_semester,callback:function(t){e.$set(e.form,"year_semester",t)},expression:"form.year_semester"}})],1),a("a-form-model-item",{attrs:{label:"学段",prop:"academic_stage"}},[a("a-select",{attrs:{"allow-clear":"",placeholder:"请选择学段"},model:{value:e.form.academic_stage,callback:function(t){e.$set(e.form,"academic_stage",t)},expression:"form.academic_stage"}},e._l(e.academicStage,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.code}},[e._v(e._s(t.name))])})),1)],1),a("a-form-model-item",{attrs:{label:"年级班级",prop:"fwValue"}},[a("ClassSelect",{ref:"classSelect",attrs:{placeholder:"请选择年级班级",changeOnSelect:!0,academicStage:e.form.academic_stage},model:{value:e.form.fwValue,callback:function(t){e.$set(e.form,"fwValue",t)},expression:"form.fwValue"}})],1),a("a-form-model-item",{attrs:{label:"学生姓名",prop:"student_id"}},[a("SelectStudent",{attrs:{choiceType:"radio",fwValue:e.form.fwValue,echoName:e.form.student_name},model:{value:e.form.student_id,callback:function(t){e.$set(e.form,"student_id",t)},expression:"form.student_id"}})],1),a("a-form-model-item",{attrs:{label:"请假时间",prop:"time"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{"show-time":!1,placeholder:["请假开始时间","请假结束时间"],format:"YYYY-MM-DD"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),a("a-form-model-item",{attrs:{label:"学期评价结果",prop:"yes_or_no"}},[a("a-radio-group",{model:{value:e.form.yes_or_no,callback:function(t){e.$set(e.form,"yes_or_no",t)},expression:"form.yes_or_no"}},e._l(e.yesOrNoData,(function(t,r){return a("a-radio",{key:r,attrs:{value:t.code}},[e._v(e._s("是"==t.name?"及格":"不及格"))])})),1)],1),a("a-form-model-item",{attrs:{label:"佐证材料",prop:"file_list"}},[a("NewFileUpload",{model:{value:e.form.file_list,callback:function(t){e.$set(e.form,"file_list",t)},expression:"form.file_list"}})],1),a("a-form-model-item",{attrs:{label:"请假描述"}},[a("a-textarea",{attrs:{placeholder:"请输入请假信息描述",allowClear:!0,"auto-size":{minRows:2}},model:{value:e.form.describe,callback:function(t){e.$set(e.form,"describe",t)},expression:"form.describe"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{key:"back",on:{click:e.handleCancel}},[e._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("确定 ")])],1)],1)},s=[],i=(a("a9e3"),a("159b"),a("a15b"),a("9892")),o=a("ad81"),l=a("c1df"),n=a.n(l),c={components:{ClassSelect:o["a"]},data:function(){return{title:"添加",labelCol:{span:4},wrapperCol:{span:16},visible:!1,loading:!1,rules:{year_semester:[{required:!0,message:"请选择学年学期",trigger:"change"}],academic_stage:[{required:!0,message:"请选择学段",trigger:"change"}],fwValue:[{required:!0,message:"请选择年级班级",trigger:"change"}],student_id:[{required:!0,message:"请选择学生",trigger:"change"}],yes_or_no:[{required:!0,message:"请选择学期评价结果",trigger:"change"}]},form:{year_semester:[],fwValue:[],time:[]},academicStage:[],yesOrNoData:[]}},methods:{moment:n.a,add:function(){this.title="添加",this.visible=!0,this.loading=!1,this.academicStage=this.$options.filters["userDictData"]("academic_stage"),this.yesOrNoData=this.$options.filters["dictData"]("yes_or_no"),this.form=Object.assign({},this.$options.data().form),this.$set(this.form,"yes_or_no","1")},edit:function(e){this.title="编辑",this.visible=!0,this.loading=!1,this.academicStage=this.$options.filters["userDictData"]("academic_stage"),this.yesOrNoData=this.$options.filters["dictData"]("yes_or_no"),this.getDetail(e.id)},getDetail:function(e){var t=this;Object(i["c"])({id:e}).then((function(e){if(e.success){t.form=e.data;var a=[e.data.grade_id,e.data.class_id];t.$set(t.form,"fwValue",a);var r=[e.data.school_year,e.data.semester];t.$set(t.form,"year_semester",r);var s=[e.data.leave_time_start,e.data.leave_time_end];t.$set(t.form,"time",s)}}))},handleSubmit:function(){var e=this;this.loading=!0,this.$refs.ruleForm.validate((function(t){if(!t)return e.loading=!1,!1;var a=JSON.parse(JSON.stringify(e.form));if(a.fwValue&&a.fwValue.length?a.grade_id=a.fwValue[0]:delete a.grade_id,a.fwValue&&a.fwValue.length?a.class_id=a.fwValue[1]:delete a.class_id,a.year_semester&&a.year_semester.length?a.school_year=a.year_semester[0]:delete a.school_year,a.year_semester&&a.year_semester.length?a.semester=a.year_semester[1]:delete a.semester,a.student_id&&a.student_id.length?a.student_id=Number(a.student_id[0]):delete a.student_id,a.time&&a.time.length?a.leave_time_start=n()(a.time[0]).format("YYYY-MM-DD"):delete a.leave_time_start,a.time&&a.time.length?a.leave_time_end=n()(a.time[1]).format("YYYY-MM-DD"):delete a.leave_time_end,Array.isArray(a.file_list)){var r=[];a.file_list.forEach((function(e){r.push(e.id)})),a.file=r.join("|")}delete a.file_list,delete a.time,delete a.fwValue,delete a.year_semester,"添加"===e.title?Object(i["a"])(a).then((function(t){t.success?(e.visible=!1,e.$message.success("添加成功！"),e.$emit("ok")):(e.loading=!1,e.$message.error("添加失败："+t.message))})):Object(i["d"])(a).then((function(t){t.success?(e.visible=!1,e.$message.success("修改成功！"),e.$emit("ok")):(e.loading=!1,e.$message.error("修改失败："+t.message))}))}))},handleCancel:function(){this.visible=!1}}},d=c,m=a("0c7c"),u=Object(m["a"])(d,r,s,!1,null,null,null);t["default"]=u.exports}}]);