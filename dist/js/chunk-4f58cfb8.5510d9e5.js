(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f58cfb8","chunk-51e2bd83","chunk-ae2f5f0a","chunk-6a14f094","chunk-a5b23494","chunk-2d2160c2"],{"056b":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-row",{attrs:{gutter:24}},[t("a-col",{staticStyle:{padding:"0 0 0 0"},attrs:{md:5,sm:24}},[t("a-card",{staticClass:"leftTree",attrs:{bordered:!1,loading:e.treeLoading}},[""!=this.orgTree?t("div",[e.orgTree.length?t("a-tree",{staticStyle:{scroll:"true"},attrs:{treeData:e.orgTree,defaultExpandAll:!0,defaultExpandedKeys:e.defaultExpandedKeys,replaceFields:e.replaceFields},on:{select:e.handleClick}}):e._e()],1):t("div",[t("a-empty",{attrs:{image:e.simpleImage}})],1)])],1),t("a-col",{attrs:{md:19,sm:24}},[e.hasPerm("flcForm:page")?t("x-card",[t("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"表单名称"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入表单名称"},model:{value:e.queryParam.name,callback:function(a){e.$set(e.queryParam,"name",a)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1),t("a-col",{attrs:{md:8,sm:24}})],1)],1)],1)]):e._e(),t("a-card",{attrs:{bordered:!1}},[t("s-table",{ref:"table",attrs:{columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"status",fn:function(a,r){return e.hasPerm("flcForm:changeStatus")?t("span",{},[t("a-popconfirm",{attrs:{placement:"top",title:0===a?"确定停用该表单？":"确定启用该表单？"},on:{confirm:function(){return e.changeStatus(a,r)}}},[t("a",[e._v(e._s(e.statusFilter(a)))])])],1):t("span",{attrs:{slot:"status"},slot:"status"},[e._v(" "+e._s(e.statusFilter(a))+" ")])}},{key:"action",fn:function(a,r){return t("span",{},[e.hasPerm("flcForm:design")?t("a",{attrs:{disabled:1==r.frmType},on:{click:function(a){return e.$refs.designForm.edit(r)}}},[e._v("设计")]):e._e(),e.hasPerm("flcForm:design")?t("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("flcForm:preview")?[t("a",{on:{click:function(a){return e.$refs.previewForm.edit(r)}}},[e._v("预览")])]:e._e(),e.hasPerm("flcForm:preview")&&(e.hasPerm("flcForm:edit")||e.hasPerm("flcForm:delete"))?t("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("flcForm:edit")||e.hasPerm("flcForm:delete")?t("a-dropdown",[t("a",{staticClass:"ant-dropdown-link"},[e._v(" 更多 "),t("a-icon",{attrs:{type:"down"}})],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e.hasPerm("flcForm:edit")?t("a-menu-item",[t("a",{on:{click:function(a){return e.$refs.editForm.edit(r)}}},[e._v("编辑")])]):e._e(),e.hasPerm("flcForm:delete")?t("a-menu-item",[t("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？"},on:{confirm:function(){return e.flcFormDelete(r)}}},[t("a",[e._v("删除")])])],1):e._e()],1)],1):e._e()],2)}}],null,!0)},[e.hasPerm("flcForm:add")?t("template",{slot:"operator"},[e.hasPerm("flcForm:add")?t("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:function(a){return e.$refs.addForm.add()}}},[e._v("新增表单")]):e._e()],1):e._e()],2),t("add-form",{ref:"addForm",on:{ok:e.handleOk}}),t("edit-form",{ref:"editForm",on:{ok:e.handleOk}}),t("design-form",{ref:"designForm",on:{ok:e.handleOk}}),t("preview-form",{ref:"previewForm",on:{ok:e.handleOk}})],1)],1)],1)},o=[],s=t("54f8"),n=(t("06f4"),t("fc25")),i=(t("4de4"),t("d3b7"),t("25f0"),t("2af9")),l=t("25fa"),c=t("f8e7"),d=t("200d"),m=t("6052"),f=t("b823"),u=t("2c89"),p=t("126f"),h={props:["data"],components:{XCard:i["w"],STable:i["r"],addForm:d["default"],editForm:m["default"],designForm:f["default"],previewForm:u["default"]},data:function(){var e=this;return{advanced:!1,queryParam:{},columns:[{title:"表单名称",dataIndex:"name"},{title:"排序",dataIndex:"sort"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"备注",dataIndex:"remark"}],loadData:function(a){return Object(c["e"])(Object.assign(a,e.queryParam)).then((function(e){return e.data}))},orgTree:[],selectedRowKeys:[],selectedRows:[],defaultExpandedKeys:[],statusDictTypeDropDown:[],expandedKeys:[],searchValue:"",autoExpandParent:!0,treeLoading:!0,simpleImage:n["a"].PRESENTED_IMAGE_SIMPLE,replaceFields:{key:"id"}}},created:function(){this.getOrgTree(),this.sysDictTypeDropDown(),(this.hasPerm("flcForm:design")||this.hasPerm("flcForm:preview")||this.hasPerm("flcForm:edit")||this.hasPerm("flcForm:delete"))&&this.columns.push({title:"操作",width:"160px",dataIndex:"action",scopedSlots:{customRender:"action"}})},methods:{getOrgTree:function(){var e=this;Object(l["c"])(Object.assign(this.queryParam)).then((function(a){if(e.treeLoading=!1,a.success){e.orgTree=a.data,e.queryParam.parentId=e.orgTree[0].id;var t,r=Object(s["a"])(a.data);try{for(r.s();!(t=r.n()).done;){var o=t.value;0==o.parentId&&e.defaultExpandedKeys.push(o.id)}}catch(n){r.e(n)}finally{r.f()}e.$refs.table.refresh()}}))},statusFilter:function(e){var a=this.statusDictTypeDropDown.filter((function(a){return a.code==e}));if(a.length>0)return a[0].value},sysDictTypeDropDown:function(e){var a=this;Object(p["c"])({code:"common_status"}).then((function(e){a.statusDictTypeDropDown=e.data}))},changeStatus:function(e,a){var t=this;0==e?this.status=1:1==e&&(this.status=0),Object(c["c"])({id:a.id,status:this.status}).then((function(e){e.success?(t.$message.success("操作成功"),t.$refs.table.refresh()):t.$message.error("操作失败："+e.message)}))},flcFormDelete:function(e){var a=this;Object(c["b"])(e).then((function(e){e.success?(a.$message.success("删除成功"),a.$refs.table.refresh()):a.$message.error("删除失败："+e.message)})).catch((function(e){a.$message.error("删除错误："+e.message)}))},handleClick:function(e){this.queryParam={orgId:e.toString()},this.$refs.table.refresh(!0)},toggleAdvanced:function(){this.advanced=!this.advanced},handleOk:function(){this.getOrgTree(),this.$refs.table.refresh()},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a}}},v=h,b=(t("e1a4"),t("0c7c")),w=Object(b["a"])(v,r,o,!1,null,null,null);a["default"]=w.exports},"200d":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"新增表单",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.formLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"机构",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["orgId"],expression:"['orgId']"}],staticStyle:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"300px",overflow:"auto"},treeData:e.orgTree,placeholder:"请选择机构",treeDefaultExpandAll:""},on:{change:function(a){return e.initrOrgName(a)}},scopedSlots:e._u([{key:"title",fn:function(a){var r=a.id;return t("span",{},[e._v(e._s(r))])}}])})],1),t("a-form-item",{attrs:{label:"表单名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入表单名称！"}]}],expression:"['name', {rules: [{required: true, message: '请输入表单名称！'}]}]"}],attrs:{placeholder:"请输入表单名称"}})],1),t("a-form-item",{attrs:{label:"表单类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["frmType",{rules:[{required:!0,message:"请选择表单类型！"}]}],expression:"['frmType', {rules: [{required: true, message: '请选择表单类型！'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择表单类型","has-feedback":""},on:{change:function(a){return e.handleChange(a)}}},e._l(e.formTypeList,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.id}},[e._v(e._s(a.name))])})),1)],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.webIdShow,expression:"webIdShow"}],attrs:{label:"自定义表单",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["webId"],expression:"['webId']"}],attrs:{placeholder:"请输入自定义表单路径"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100}],expression:"['sort', { initialValue: 100 }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入排序",min:1,max:1e3}})],1),t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{rows:4,placeholder:"请输入备注"}})],1)],1)],1)],1)},o=[],s=(t("b0c0"),t("7db0"),t("d3b7"),t("25fa")),n=t("f8e7"),i={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},orgTree:[],selfForms:[],frmType:0,formTypeList:[{id:0,name:"动态表单"},{id:1,name:"自定义表单"}],visible:!1,confirmLoading:!1,formLoading:!0,webIdShow:!1,form:this.$form.createForm(this)}},methods:{add:function(){this.visible=!0,this.getSelfForms(),this.getOrgDate()},handleChange:function(e){e&&(this.frmType=e),this.webIdShow=!!e},getOrgDate:function(){var e=this;this.formLoading=!1,Object(s["c"])().then((function(a){e.orgTree=a.data})),Object(s["a"])().then((function(a){e.orgList=a.data}))},initrOrgName:function(e){this.form.getFieldDecorator("sysEmpParam.orgName",{initialValue:this.orgList.find((function(a){return e===a.id})).name})},getSelfForms:function(){this.selfForms=[]},handleSubmit:function(){var e=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,t){a?e.confirmLoading=!1:Object(n["a"])(t).then((function(a){a.success?(e.$message.success("新增成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t),e.form.resetFields()):e.$message.error("新增失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},l=i,c=t("0c7c"),d=Object(c["a"])(l,r,o,!1,null,null,null);a["default"]=d.exports},"2c89":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"预览表单:"+e.name,width:900,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.formLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}]})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"['content']"}]})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contentData"],expression:"['contentData']"}]})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fields"],expression:"['fields']"}]})],1),0==e.frmType?t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:"kfp"==e.webId,expression:"webId == 'kfp'"}]},[t("k-form-build",{ref:"kfp",attrs:{value:e.jsonData}})],1):t("a-form-item",[t(e.webId,{ref:"cfp",tag:"component",attrs:{value:e.jsonData}})],1)],1)],1)],1)},o=[],s=t("f3f3"),n=(t("159b"),t("d3b7"),t("ddb0"),t("ac1f"),t("1276"),t("b0c0"),t("d3bc4"),t("8f16")),i={};n.keys().forEach((function(e){var a=e.split("/")[1].split(".")[0];i[a]=n(e).default||n(e)}));var l={components:Object(s["a"])({},i),data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,confirmLoading:!1,frmType:0,formLoading:!0,webId:null,jsonData:{},name:null,form:this.$form.createForm(this)}},methods:{edit:function(e){var a=this;this.visible=!0,this.formLoading=!1,this.name=e.name,this.frmType=e.frmType,this.webId=e.webId,this.jsonData=JSON.parse(e.content),0==e.frmType&&(this.webId="kfp"),setTimeout((function(){a.form.setFieldsValue({id:e.id,name:e.name,content:e.content,contentParse:e.contentParse,contentData:e.contentData,fields:e.fields})}),100)},getPreviewData:function(){var e=this,a=e.webId;"kfp"!=a&&(a="cfp"),e.$refs[a].getData().then((function(a){e.$message.success("验证通过，"+JSON.stringify(a))})).catch((function(){e.$message.error("验证未通过，获取失败")}))},handleSubmit:function(){this.confirmLoading=!0,this.getPreviewData(),this.confirmLoading=!1},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},c=l,d=t("0c7c"),m=Object(d["a"])(c,r,o,!1,null,null,null);a["default"]=m.exports},6052:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"编辑表单",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.formLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),t("a-form-item",{attrs:{label:"机构",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["orgId"],expression:"['orgId']"}],staticStyle:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"300px",overflow:"auto"},treeData:e.orgTree,placeholder:"请选择机构",treeDefaultExpandAll:""},on:{change:function(a){return e.initrOrgName(a)}},scopedSlots:e._u([{key:"title",fn:function(a){var r=a.id;return t("span",{},[e._v(e._s(r))])}}])})],1),t("a-form-item",{attrs:{label:"表单名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入表单名称！"}]}],expression:"['name', {rules: [{required: true, message: '请输入表单名称！'}]}]"}],attrs:{placeholder:"请输入表单名称"}})],1),t("a-form-item",{attrs:{label:"表单类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["frmType",{rules:[{required:!0,message:"请选择表单类型！"}]}],expression:"['frmType', {rules: [{required: true, message: '请选择表单类型！'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择表单类型","has-feedback":""},on:{change:function(a){return e.handleChange(a)}}},e._l(e.formTypeList,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.id}},[e._v(e._s(a.name))])})),1)],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.webIdShow,expression:"webIdShow"}],attrs:{label:"自定义表单",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["webId"],expression:"['webId']"}],attrs:{placeholder:"请输入自定义表单路径"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100}],expression:"['sort', { initialValue: 100 }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入排序",min:1,max:1e3}})],1),t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{rows:4,placeholder:"请输入备注"}})],1)],1)],1)],1)},o=[],s=(t("b0c0"),t("7db0"),t("d3b7"),t("25fa")),n=t("f8e7"),i={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},orgTree:[],selfForms:[],frmType:0,formTypeList:[{id:0,name:"动态表单"},{id:1,name:"自定义表单"}],visible:!1,confirmLoading:!1,formLoading:!0,webIdShow:!1,form:this.$form.createForm(this)}},methods:{edit:function(e){var a=this;this.visible=!0,this.getOrgDate(),this.handleChange(e.frmType),setTimeout((function(){a.form.setFieldsValue({id:e.id,name:e.name,frmType:e.frmType,webId:e.webId,orgId:e.orgId&&0!=e.orgId?e.orgId:null,sort:e.sort,active:e.active,remark:e.remark})}),100)},handleChange:function(e){e&&(this.frmType=e),this.webIdShow=!!e},getOrgDate:function(){var e=this;this.formLoading=!1,Object(s["c"])().then((function(a){e.orgTree=a.data})),Object(s["a"])().then((function(a){e.orgList=a.data}))},initrOrgName:function(e){this.form.getFieldDecorator("sysEmpParam.orgName",{initialValue:this.orgList.find((function(a){return e===a.id})).name})},getSelfForms:function(){this.selfForms=[]},handleSubmit:function(){var e=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,t){a?e.confirmLoading=!1:Object(n["c"])(t).then((function(a){a.success?(e.$message.success("编辑成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t)):e.$message.error("编辑失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},l=i,c=t("0c7c"),d=Object(c["a"])(l,r,o,!1,null,null,null);a["default"]=d.exports},"8f16":function(e,a,t){var r={"./flcCustomForm.vue":"c197"};function o(e){var a=s(e);return t(a)}function s(e){if(!t.o(r,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id="8f16"},a455:function(e,a,t){},b823:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"设计表单:"+e.name,width:1200,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.formLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}]})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"['content']"}]})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contentData"],expression:"['contentData']"}]})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contentParse"],expression:"['contentParse']"}]})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fields"],expression:"['fields']"}]})],1),t("a-form-item",[t("k-form-design",{ref:"kfd",staticStyle:{"background-color":"white"},attrs:{showHead:!1,toolbars:["reset","importJson","exportJson","preview","exportCode"]}})],1)],1)],1)],1)},o=[],s=(t("b0c0"),t("159b"),t("a15b"),t("d3b7"),t("d3bc4"),t("f8e7")),n={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,confirmLoading:!1,formLoading:!0,name:null,form:this.$form.createForm(this)}},methods:{edit:function(e){var a=this;this.visible=!0,this.formLoading=!1,this.name=e.name,setTimeout((function(){a.form.setFieldsValue({id:e.id,name:e.name,content:e.content,contentParse:e.contentParse,contentData:e.contentData,fields:e.fields}),a.importData(e.content)}),100)},importData:function(e){e&&this.$refs.kfd.handleSetData(JSON.parse(e))},getDesignData:function(){var e=this.$refs.kfd,a=e.getFieldSchema(),t=[],r=[];a.forEach((function(e){var a={};a.id=e.key,a.name=e.label,r.push(a),t.push(e.key)})),this.content=t.length>0?JSON.stringify(e.getValue()):null,this.contentData=t.length>0?t.join(","):null,this.contentParse=r.length>0?JSON.stringify(r):null,this.fields=a.length,this.form.setFieldsValue({content:this.content,contentData:this.contentData,contentParse:this.contentParse,fields:this.fields})},handleSubmit:function(){var e=this;this.confirmLoading=!0,this.getDesignData();var a=this.form.validateFields;a((function(a,t){a?e.confirmLoading=!1:Object(s["c"])(t).then((function(a){a.success?(e.$message.success("设计成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t),e.form.resetFields()):e.$message.error("设计失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},i=n,l=t("0c7c"),c=Object(l["a"])(i,r,o,!1,null,null,null);a["default"]=c.exports},c197:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-spin",{attrs:{spinning:e.formLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),t("a-form-item",{attrs:{label:"名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入表单名称！"}]}],expression:"['name', {rules: [{required: true, message: '请输入表单名称！'}]}]"}],attrs:{placeholder:"请输入名称",disabled:e.disabled}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100}],expression:"['sort', { initialValue: 100 }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入排序",disabled:e.disabled,min:1,max:1e3}})],1),t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{rows:4,placeholder:"请输入备注",disabled:e.disabled}})],1)],1)],1)},o=[],s=(t("b0c0"),t("d3b7"),{data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},name:null,visible:!1,confirmLoading:!1,formLoading:!1,disabled:!1,form:this.$form.createForm(this)}},methods:{edit:function(e){var a=this;this.formLoading=!1,setTimeout((function(){a.form.setFieldsValue({id:e.id,name:e.name,sort:e.sort,remark:e.remark})}),100)},setData:function(e){var a=this;setTimeout((function(){a.form.setFieldsValue({id:e.id,name:e.name,sort:e.sort,remark:e.remark})}),100)},disable:function(e){this.disabled=!0},getData:function(){var e=this;return new Promise((function(a,t){try{var r=e.form.validateFields;r((function(e,r){e?t(e):a(r)}))}catch(o){t(o)}}))}}}),n=s,i=t("0c7c"),l=Object(i["a"])(n,r,o,!1,null,null,null);a["default"]=l.exports},e1a4:function(e,a,t){"use strict";t("a455")},f8e7:function(e,a,t){"use strict";t.d(a,"d",(function(){return o})),t.d(a,"e",(function(){return s})),t.d(a,"a",(function(){return n})),t.d(a,"c",(function(){return i})),t.d(a,"b",(function(){return l}));var r=t("b775");function o(e){return Object(r["b"])({url:"/flcForm/list",method:"get",params:e})}function s(e){return Object(r["b"])({url:"/flcForm/page",method:"get",params:e})}function n(e){return Object(r["b"])({url:"/flcForm/add",method:"post",data:e})}function i(e){return Object(r["b"])({url:"/flcForm/edit",method:"post",data:e})}function l(e){return Object(r["b"])({url:"/flcForm/delete",method:"post",data:e})}}}]);