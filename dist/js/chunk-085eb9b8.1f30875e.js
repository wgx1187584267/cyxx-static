(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-085eb9b8","chunk-ad8dd5ce","chunk-0527e2fd","chunk-e36b72a8"],{"044e":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return s}));var r=a("b775");function n(t){return Object(r["b"])({url:"/SpecialWorkTaskResult/Get",method:"get",params:t})}function i(t){return Object(r["b"])({url:"/SpecialWorkTaskResult/Detail",method:"get",params:t})}function s(t){return Object(r["b"])({url:"/SpecialWorkTaskResult/Edit",method:"post",data:t})}},2492:function(t,e,a){"use strict";a.d(e,"e",(function(){return n})),a.d(e,"f",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return c}));var r=a("b775");function n(t){return Object(r["b"])({url:"/SpecialWorkTask/Get",method:"get",params:t})}function i(t){return Object(r["b"])({url:"/SpecialWorkTask/Detail",method:"get",params:t})}function s(t){return Object(r["b"])({url:"/SpecialWorkTask/Create",method:"post",data:t})}function o(t){return Object(r["b"])({url:"/SpecialWorkTask/Edit",method:"post",data:t})}function l(t){return Object(r["b"])({url:"/SpecialWorkTask/Del",method:"post",data:t})}function c(t){return Object(r["b"])({url:"/SpecialWorkTask/Export",method:"post",data:t,responseType:"blob"})}},"7d16":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{title:"详细",footer:null,width:800},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.loading?a("a-skeleton",{attrs:{active:"",paragraph:{rows:6},loading:t.loading}}):a("a-descriptions",{attrs:{bordered:"",column:2,size:"small"}},[a("a-descriptions-item",{attrs:{label:"任务标题"}},[t._v(t._s(t.infor.title))]),a("a-descriptions-item",{attrs:{label:"任务接收人"}},[t._v(t._s(t.infor.task_person_name))]),a("a-descriptions-item",{attrs:{label:"总结描述",span:2}},[t._v(t._s(t.infor.describe))]),a("a-descriptions-item",{attrs:{label:"相关图片",span:2}},[a("PictureUpload",{attrs:{onlyPreview:!0},model:{value:t.infor.file_list,callback:function(e){t.$set(t.infor,"file_list",e)},expression:"infor.file_list"}})],1),a("a-descriptions-item",{attrs:{label:"任务状态"}},[t._v(t._s(t.infor.task_state_name))]),a("a-descriptions-item",{attrs:{label:"完成时间"}},[t._v(t._s(t.infor.complete_time))]),a("a-descriptions-item",{attrs:{label:"任务期限"}},[t._v(t._s(t.infor.task_deadline))]),a("a-descriptions-item",{attrs:{label:"是否超时"}},[t._v(t._s(t.infor.yes_or_no_name))])],1)],1)],1)},n=[],i=a("044e"),s={data:function(){return{visible:!1,loading:!0,infor:{}}},methods:{show:function(t){this.visible=!0,this.getDetaile(t.id)},getDetaile:function(t){var e=this;this.loading=!0,Object(i["c"])({id:t}).then((function(t){t.success&&(e.infor=t.data||{},e.loading=!1)}))}}},o=s,l=a("0c7c"),c=Object(l["a"])(o,r,n,!1,null,null,null);e["default"]=c.exports},"8bcc":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{title:"工作任务结果",width:t.width,bodyStyle:{background:"#eee"}},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("Index",{attrs:{specialWorkTaskId:t.specialWorkTaskId}})],1)],1)},n=[],i=a("a979"),s={components:{Index:i["default"]},data:function(){return{width:1e3,visible:!1,specialWorkTaskId:null}},methods:{show:function(t){this.width=.9*window.innerWidth,this.specialWorkTaskId=t.id,this.visible=!0},handleOk:function(t){this.visible=!1}}},o=s,l=a("0c7c"),c=Object(l["a"])(o,r,n,!1,null,null,null);e["default"]=c.exports},a979:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("x-card",{staticClass:"cardshadow"},[a("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48,type:"flex",justify:"start"}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"标题"}},[a("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:t.queryParam.title,callback:function(e){t.$set(t.queryParam,"title",e)},expression:"queryParam.title"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"任务状态"}},[a("a-radio-group",{model:{value:t.queryParam.task_state,callback:function(e){t.$set(t.queryParam,"task_state",e)},expression:"queryParam.task_state"}},t._l(t.queryContent.task_state,(function(e,r){return a("a-radio",{key:r,attrs:{value:e.code}},[t._v(" "+t._s(e.value)+" ")])})),1)],1)],1),t.advanced?["1"===t.key?a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"任务接收人"}},[a("HyUserSelect",{attrs:{choiceType:"radio"},model:{value:t.queryParam.task_person,callback:function(e){t.$set(t.queryParam,"task_person",e)},expression:"queryParam.task_person"}})],1)],1):t._e(),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"是否超时"}},[a("a-radio-group",{model:{value:t.queryParam.yes_or_no,callback:function(e){t.$set(t.queryParam,"yes_or_no",e)},expression:"queryParam.yes_or_no"}},t._l(t.queryContent.yes_or_no,(function(e,r){return a("a-radio",{key:r,attrs:{value:e.code}},[t._v(" "+t._s(e.value)+" ")])})),1)],1)],1)]:t._e(),a("a-col",{attrs:{md:t.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:t.advanced&&{float:"right",overflow:"hidden"}||{}},[a("h-search-button",{on:{click:function(e){return t.$refs.table.refresh(!0)}}}),a("h-reset-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return t.queryParam={}}}}),a("a",{staticStyle:{"margin-left":"8px"},on:{click:t.toggleAdvanced}},[t._v(" "+t._s(t.advanced?"收起":"展开")+" "),a("a-icon",{attrs:{type:t.advanced?"up":"down"}})],1)],1)])],2)],1)],1)]),a("a-card",{staticClass:"cardshadow",attrs:{bordered:!1,bodyStyle:{padding:"10px 15px"}}},[a("a-tabs",{attrs:{"default-active-key":"1"},on:{change:t.callback}},[a("a-tab-pane",{key:"1",attrs:{tab:"我的任务"}}),a("a-tab-pane",{key:"2",attrs:{tab:"全部任务"}})],1),a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loadData,alert:!1,rowKey:function(t){return t.id}},scopedSlots:t._u([{key:"action",fn:function(e,r){return a("span",{},[r.task_person==t.$userInfo.id?a("h-link",{attrs:{type:"warning"},on:{click:function(e){return t.$refs.AddEditForm.edit(r)}}},[t._v(" 处理 ")]):t._e(),a("a-divider",{attrs:{type:"vertical"}}),a("h-link",{attrs:{type:"success"},on:{click:function(e){return t.$refs.DetaileModal.show(r)}}},[t._v("详细")]),a("a-divider",{attrs:{type:"vertical"}}),a("h-link",{attrs:{type:"success"},on:{click:function(e){return t.exportFile(r.id)}}},[t._v("导出")])],1)}}])},[a("template",{slot:"operator"},[a("a-space")],1)],2)],1),a("AddEditForm",{ref:"AddEditForm",on:{ok:t.handleOk}}),a("DetaileModal",{ref:"DetaileModal"})],1)},n=[],i=(a("a9e3"),a("2af9")),s=a("ca00"),o=a("126f"),l=a("2492"),c=a("044e"),d=a("e41c"),u=a("7d16"),f={components:{STable:i["r"],XCard:i["w"],AddEditForm:d["default"],DetaileModal:u["default"]},props:{specialWorkTaskId:{type:Number,default:null}},data:function(){var t=this;return{advanced:!1,queryParam:{},queryContent:{yes_or_no:[],task_state:[]},columns:[{title:"任务标题",align:"center",dataIndex:"title"},{title:"任务接收人",align:"center",dataIndex:"task_person_name"},{title:"任务状态",align:"center",dataIndex:"task_state_name"},{title:"完成时间",align:"center",dataIndex:"complete_time"},{title:"任务期限",align:"center",dataIndex:"task_deadline"},{title:"是否超时",align:"center",dataIndex:"yes_or_no_name"},{title:"操作",width:"140px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(c["b"])(Object.assign(e,t.formatParameters())).then((function(t){return t.data}))},selectedRowKeys:[],selectedRows:[],key:"1"}},watch:{specialWorkTaskId:{handler:function(t){try{this.$refs.table.refresh(!0)}catch(e){}},immediate:!0}},created:function(){this.dictTypeDropDown()},methods:{dictTypeDropDown:function(){var t=this;Object(o["c"])({code:"task_state"}).then((function(e){t.queryContent.task_state=e.data})),Object(o["c"])({code:"yes_or_no"}).then((function(e){t.queryContent.yes_or_no=e.data}))},callback:function(t){this.key=t,this.$refs.table.refresh(!0)},formatParameters:function(){var t=JSON.parse(JSON.stringify(this.queryParam));return this.specialWorkTaskId?t.special_work_task_id=this.specialWorkTaskId:delete t.special_work_task_id,"1"===this.key?t.task_person=this.$userInfo.id:t.task_person&&t.task_person.length?t.task_person=Number(t.task_person[0]):delete t.task_person,t},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},toggleAdvanced:function(){this.advanced=!this.advanced},handleOk:function(){this.$refs.table.refresh()},exportFile:function(t){var e=this,a={special_work_task_result_id:t};this.exportLoading=!0,Object(l["d"])(a).then((function(t){Object(s["c"])(t),e.exportLoading=!1})).catch((function(){e.exportLoading=!1,e.$message.error("接口报错")}))}}},m=f,p=a("0c7c"),b=Object(p["a"])(m,r,n,!1,null,"0c717a86",null);e["default"]=b.exports},e41c:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{title:t.title,width:600,confirmLoading:t.confirmLoading},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.formContent,"label-col":t.labelCol,"wrapper-col":t.wrapperCol,rules:t.rules}},[a("a-form-model-item",{attrs:{label:"总结描述",prop:"describe"}},[a("a-textarea",{attrs:{placeholder:"请输入",allowClear:!0,"auto-size":{minRows:4}},model:{value:t.formContent.describe,callback:function(e){t.$set(t.formContent,"describe",e)},expression:"formContent.describe"}})],1),a("a-form-model-item",{attrs:{label:"相关图片"}},[a("PictureUpload",{attrs:{btnText:"上传图片"},model:{value:t.formContent.file_list,callback:function(e){t.$set(t.formContent,"file_list",e)},expression:"formContent.file_list"}})],1)],1)],1)],1)},n=[],i=(a("159b"),a("a15b"),a("044e")),s={data:function(){return{visible:!1,confirmLoading:!1,title:"添加",labelCol:{span:4},wrapperCol:{span:18},rules:{describe:[{required:!0,message:"请输入总结描述",trigger:"blur"}]},formData:{},formContent:{file_list:[]}}},methods:{add:function(){this.title="添加",this.visible=!0,this.formContent=Object.assign({},this.$options.data().formContent)},edit:function(t){this.title="编辑",this.visible=!0,this.editPage(t.id)},editPage:function(t){var e=this;Object(i["c"])({id:t}).then((function(t){t.success&&(e.formContent=t.data)}))},handleOk:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;var a=JSON.parse(JSON.stringify(t.formContent));if(Array.isArray(a.file_list)){var r=[];a.file_list.forEach((function(t){r.push(t.id)})),a.file=r.join("|")}delete a.file_list,t.confirmLoading=!0,Object(i["a"])(a).then((function(e){e.success?(t.visible=!1,t.$message.success("修改成功！"),t.$emit("ok")):t.$message.error(JSON.stringify(e.message)),t.confirmLoading=!1}))}))}}},o=s,l=a("0c7c"),c=Object(l["a"])(o,r,n,!1,null,null,null);e["default"]=c.exports}}]);