(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cbce4"],{"4ade":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("x-card",{staticClass:"cardshadow"},[a("div",{staticClass:"table-page-search-wrapper",attrs:{slot:"content"},slot:"content"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48,type:"flex",justify:"start"}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"文件标题"}},[a("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},model:{value:t.queryParam.document_title,callback:function(e){t.$set(t.queryParam,"document_title",e)},expression:"queryParam.document_title"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"创建时间"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{valueFormat:"YYYY-MM-DD"},model:{value:t.queryParam.dates,callback:function(e){t.$set(t.queryParam,"dates",e)},expression:"queryParam.dates"}})],1)],1),t.advanced?void 0:t._e(),a("a-col",{attrs:{md:t.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:t.advanced&&{float:"right",overflow:"hidden"}||{}},[a("h-search-button",{on:{click:function(e){return t.$refs.table.refresh(!0)}}}),a("h-reset-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return t.queryParam={}}}})],1)])],2)],1)],1)]),a("a-card",{staticClass:"cardshadow",attrs:{bordered:!1}},[a("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loadData,alert:!1,rowKey:function(t){return t.id}},scopedSlots:t._u([{key:"document_number",fn:function(e,n){return a("div",{},["2"===n.document_type?a("span",[t._v(" "+t._s(n.document_number_prefix_name)+" 【"+t._s(n.document_number_year)+"】 "+t._s(n.document_number)+"号 ")]):a("span",[t._v("--")])])}},{key:"current_step",fn:function(e,n){return a("div",{},[t._v(" 第"+t._s(n.current_step.step)+"步 : "+t._s(n.current_step.current_step_name)+" ")])}},{key:"action",fn:function(e,n){return a("span",{},[a("h-link",{attrs:{type:"success"},on:{click:function(e){return t.$refs.HandleDrawer.showDrawer(n,"2")}}},[t._v("查看")])],1)}}])},[a("template",{slot:"operator"},[a("a-space",[a("a-radio-group",{attrs:{"default-value":"0"},on:{change:t.onChangeDocumentType}},[a("a-radio-button",{attrs:{value:"0"}},[t._v("全部")]),a("a-radio-button",{attrs:{value:"1"}},[t._v("上级来文")]),a("a-radio-button",{attrs:{value:"2"}},[t._v("校内文件")])],1)],1)],1)],2)],1),a("HandleDrawer",{ref:"HandleDrawer",on:{ok:t.handleOk}})],1)},r=[],s=(a("d81d"),a("2af9")),d=a("126f"),o=a("ce85"),c=a("4105"),u={components:{STable:s["r"],XCard:s["w"],HandleDrawer:c["default"]},data:function(){var t=this;return{isShowAlert:!1,importResult:{},importLoading:!1,exportLoading:!1,templateUrl:"http://182.40.103.156:5573//DownLoad/student.xlsx",advanced:!1,queryParam:{},document_type:"0",queryContent:{change_type:[]},columns:[{title:"公文名称",align:"center",dataIndex:"document_title"},{title:"编号",align:"center",dataIndex:"document_number",scopedSlots:{customRender:"document_number"}},{title:"所在步骤",align:"center",dataIndex:"current_step",scopedSlots:{customRender:"current_step"}},{title:"发起人",align:"center",dataIndex:"add_person_name"},{title:"创建时间",align:"center",dataIndex:"add_time"},{title:"操作",width:"60px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(o["b"])(Object.assign(e,t.formatParameters())).then((function(t){var e=t.data.rows.map((function(t){var e=JSON.parse(JSON.stringify(t));delete e.document;var a=t.document,n=Object.assign({},a,{current_step:e});return n}));return t.data.rows=e,t.data}))},selectedRowKeys:[],selectedRows:[]}},methods:{dictTypeDropDown:function(){var t=this;Object(d["c"])({code:"change_type"}).then((function(e){t.queryContent.change_type=e.data}))},formatParameters:function(){var t=JSON.parse(JSON.stringify(this.queryParam));return t.query="2",t.sortOrder="descend",t.sortField="processing_time",t.circulation_state="2","0"===this.document_type?delete t.document_type:t.document_type=this.document_type,t.dates&&t.dates.length?t.add_time_start=t.dates[0]:delete t.add_time_start,t.dates&&t.dates.length?t.add_time_end=t.dates[1]:delete t.add_time_end,delete t.dates,t},toggleAdvanced:function(){this.advanced=!this.advanced},onChangeDocumentType:function(t){this.document_type=t.target.value;try{this.$refs.table.refresh(!0)}catch(e){}},handleOk:function(){this.$refs.table.refresh()}}},l=u,i=a("0c7c"),m=Object(i["a"])(l,n,r,!1,null,"4ec9039b",null);e["default"]=m.exports}}]);