(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f05da576"],{"08ee":function(e,t,a){},af4d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-tabs",{attrs:{"default-active-key":"1"}},[e.hasPerm("email:sendEmail")?a("a-tab-pane",{key:"1",attrs:{tab:"发送邮件"},on:{change:e.tabsCallback}},[a("a-form",{attrs:{form:e.form1}},[a("a-form-item",{attrs:{label:"收件邮箱"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["to",{rules:[{type:"email",message:"请输入正确的邮箱!"},{required:!0,message:"请输入收件邮箱！"}]}],expression:"['to', {rules: [{type: 'email',message: '请输入正确的邮箱!'},{required: true, message: '请输入收件邮箱！'}]}]"}],attrs:{placeholder:"请输入收件邮箱"}})],1),a("a-form-item",{attrs:{label:"邮件标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入邮件标题！"}]}],expression:"['title', {rules: [{required: true, message: '请输入邮件标题！'}]}]"}],attrs:{placeholder:"请输入邮件标题"}})],1),a("a-form-item",{attrs:{label:"邮件内容"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请输入邮件内容！"}]}],expression:"['content', {rules: [{required: true, message: '请输入邮件内容！'}]}]"}],attrs:{rows:4,placeholder:"请输入备注"}})],1),a("a-form-item",{staticClass:"subForm-item"},[a("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleSubmit1}},[e._v("发送")])],1)],1)],1):e._e(),e.hasPerm("email:sendEmailHtml")?a("a-tab-pane",{key:"2",attrs:{tab:"发送Html邮件"},on:{change:e.tabsCallback}},[a("a-form",{attrs:{form:e.form2}},[a("a-form-item",{attrs:{label:"收件邮箱"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["to",{rules:[{type:"email",message:"请输入正确的邮箱!"},{required:!0,message:"请输入收件邮箱！"}]}],expression:"['to',{rules: [ {type: 'email',message: '请输入正确的邮箱!'},{required: true, message: '请输入收件邮箱！'}]}]"}],attrs:{placeholder:"请输入收件邮箱"}})],1),a("a-form-item",{attrs:{label:"邮件标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入邮件标题！"}]}],expression:"['title', {rules: [{required: true, message: '请输入邮件标题！'}]}]"}],attrs:{placeholder:"请输入邮件标题"}})],1),a("a-form-item",{attrs:{label:"邮件内容"}},[a("antd-editor",{attrs:{uploadConfig:e.editorUploadConfig},on:{onchange:e.changeEditor,oninit:e.getEditor},model:{value:e.editorContent,callback:function(t){e.editorContent=t},expression:"editorContent"}})],1),a("a-form-item",{staticClass:"subForm-item"},[a("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleSubmit2}},[e._v("发送")])],1)],1)],1):e._e()],1)],1)],1)},o=[],i=(a("159b"),a("d3b7"),a("b775"));function s(e){return Object(i["b"])({url:"/email/sendEmail",method:"post",data:e})}function n(e){return Object(i["b"])({url:"/email/sendEmailHtml",method:"post",data:e})}var m=a("2af9"),d=a("6597"),l={components:{AntdEditor:m["a"]},data:function(){return{editorContentText:"",editorUploadConfig:{method:"http",callback:this.editorUploadImage},confirmLoading:!1,editorContent:"",form1:this.$form.createForm(this),form2:this.$form.createForm(this)}},methods:{tabsCallback:function(e){"1"===e&&(this.$form.createForm(this),this.form2.resetFields(),this.editor.txt.clear()),"2"===e&&(this.$form.createForm(this),this.form1.resetFields())},editorUploadImage:function(e,t){var a=this,r=new FormData;e.forEach((function(e){r.append("file",e)})),Object(d["e"])(r).then((function(e){e.success?t("http://182.40.103.156:5573//sysFileInfo/preview?id="+e.data):a.$message.error("编辑器上传图片失败："+e.message)}))},getEditor:function(e){this.editor=e},changeEditor:function(e,t){this.editorContent=e,this.editorContentText=t.text()},handleSubmit1:function(){var e=this,t=this.form1.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:s(a).then((function(t){t.success?(e.$message.success("发送成功"),e.confirmLoading=!1,e.form1.resetFields()):e.$message.error("发送失败："+t.message)})).finally((function(t){e.confirmLoading=!1}))}))},handleSubmit2:function(){var e=this,t=this.form2.validateFields;""!=this.editorContent?(this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:(a.content=e.editorContent,n(a).then((function(t){t.success?(e.$message.success("发送成功"),e.confirmLoading=!1,e.editor.txt.clear(),e.form2.resetFields()):e.$message.error("发送失败："+t.message)})).finally((function(t){e.confirmLoading=!1})))}))):this.$message.error("请填写邮件内容")}}},c=l,u=(a("cd2b"),a("0c7c")),f=Object(u["a"])(c,r,o,!1,null,null,null);t["default"]=f.exports},cd2b:function(e,t,a){"use strict";a("08ee")}}]);