(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a14f094"],{b823:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"设计表单:"+e.name,width:1200,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.formLoading}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}]})],1),n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"['content']"}]})],1),n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contentData"],expression:"['contentData']"}]})],1),n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contentParse"],expression:"['contentParse']"}]})],1),n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fields"],expression:"['fields']"}]})],1),n("a-form-item",[n("k-form-design",{ref:"kfd",staticStyle:{"background-color":"white"},attrs:{showHead:!1,toolbars:["reset","importJson","exportJson","preview","exportCode"]}})],1)],1)],1)],1)},i=[],o=(n("b0c0"),n("159b"),n("a15b"),n("d3b7"),n("d3bc4"),n("f8e7")),r={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,confirmLoading:!1,formLoading:!0,name:null,form:this.$form.createForm(this)}},methods:{edit:function(e){var t=this;this.visible=!0,this.formLoading=!1,this.name=e.name,setTimeout((function(){t.form.setFieldsValue({id:e.id,name:e.name,content:e.content,contentParse:e.contentParse,contentData:e.contentData,fields:e.fields}),t.importData(e.content)}),100)},importData:function(e){e&&this.$refs.kfd.handleSetData(JSON.parse(e))},getDesignData:function(){var e=this.$refs.kfd,t=e.getFieldSchema(),n=[],a=[];t.forEach((function(e){var t={};t.id=e.key,t.name=e.label,a.push(t),n.push(e.key)})),this.content=n.length>0?JSON.stringify(e.getValue()):null,this.contentData=n.length>0?n.join(","):null,this.contentParse=a.length>0?JSON.stringify(a):null,this.fields=t.length,this.form.setFieldsValue({content:this.content,contentData:this.contentData,contentParse:this.contentParse,fields:this.fields})},handleSubmit:function(){var e=this;this.confirmLoading=!0,this.getDesignData();var t=this.form.validateFields;t((function(t,n){t?e.confirmLoading=!1:Object(o["c"])(n).then((function(t){t.success?(e.$message.success("设计成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",n),e.form.resetFields()):e.$message.error("设计失败："+t.message)})).finally((function(t){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},s=r,c=n("0c7c"),m=Object(c["a"])(s,a,i,!1,null,null,null);t["default"]=m.exports},f8e7:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c}));var a=n("b775");function i(e){return Object(a["b"])({url:"/flcForm/list",method:"get",params:e})}function o(e){return Object(a["b"])({url:"/flcForm/page",method:"get",params:e})}function r(e){return Object(a["b"])({url:"/flcForm/add",method:"post",data:e})}function s(e){return Object(a["b"])({url:"/flcForm/edit",method:"post",data:e})}function c(e){return Object(a["b"])({url:"/flcForm/delete",method:"post",data:e})}}}]);