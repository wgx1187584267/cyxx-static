(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26bcea4f","chunk-13fb39c2","chunk-2d0ae566"],{"09c3":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-drawer",{attrs:{title:t.title,placement:"right",closable:!0,visible:t.visible,width:t.width,footer:null,bodyStyle:{padding:0},destroyOnClose:!0},on:{close:t.handleCancel}},[n("a-card",{attrs:{bordered:!1}},[n("s-table",{ref:"table",attrs:{columns:t.columns,scroll:{x:1100,y:550},bordered:"",data:t.loadData,showPagination:!1,isShowSerialNumber:!1,alert:!1,rowKey:function(t){return t.class_id}},scopedSlots:t._u([{key:"evaluation_number",fn:function(e,a){return n("span",{},[n("a",{staticClass:"detailText",on:{click:function(e){return t.$refs.detailStudent.show(t.queryParam,a,1)}}},[t._v(t._s(a.evaluation_number))])])}},{key:"not_evaluation_number",fn:function(e,a){return n("span",{},[n("a",{staticClass:"detailText",on:{click:function(e){return t.$refs.detailStudent.show(t.queryParam,a,2)}}},[t._v(t._s(a.not_evaluation_number))])])}},{key:"number_a",fn:function(e,a){return n("span",{},[n("a",{staticClass:"detailText",on:{click:function(e){return t.$refs.detailStudent.show(t.queryParam,a,3)}}},[t._v(t._s(a.number_a))])])}},{key:"number_b",fn:function(e,a){return n("span",{},[n("a",{staticClass:"detailText",on:{click:function(e){return t.$refs.detailStudent.show(t.queryParam,a,4)}}},[t._v(t._s(a.number_b))])])}},{key:"number_excellent",fn:function(e,a){return n("span",{},[n("a",{staticClass:"detailText",on:{click:function(e){return t.$refs.detailStudent.show(t.queryParam,a,7)}}},[t._v(t._s(a.number_excellent))])])}},{key:"number_c",fn:function(e,a){return n("span",{},[n("a",{staticClass:"detailText",on:{click:function(e){return t.$refs.detailStudent.show(t.queryParam,a,5)}}},[t._v(t._s(a.number_c))])])}},{key:"number_d",fn:function(e,a){return n("span",{},[n("a",{staticClass:"detailText",on:{click:function(e){return t.$refs.detailStudent.show(t.queryParam,a,6)}}},[t._v(t._s(a.number_d))])])}}])},[n("div",{staticClass:"table-operator",attrs:{slot:"operator"},slot:"operator"},[n("a-space",[n("a-button",{attrs:{icon:"down-circle"},on:{click:t.exportFile}},[t._v("导出")])],1)],1)])],1),n("detailStudent",{ref:"detailStudent"})],1)},r=[],i=n("f3f3"),s=(n("159b"),n("2af9")),c=n("16d2"),l=n("0a43"),u=n("9bfe"),o=n("ca00"),d={components:{BarStacking:l["default"],STable:s["r"],detailStudent:u["default"]},data:function(){var t=this;return{width:1165,title:"详细",visible:!1,loading:!1,queryParam:{},columns:[{title:"级部",align:"center",width:100,fixed:"left",dataIndex:"grade_name",customRender:function(e,n,a){for(var r={children:e+"级",attrs:{}},i=0;i<t.gradeList.length;i++)if(0===a){if(n.class_len)return r.attrs.rowSpan=n.class_len,r}else{if(0===i&&0!==a&&a+1<=t.gradeList[i].allNum)return r.attrs.rowSpan=0,r;if(0!==i&&0!==a&&a===t.gradeList[i-1].allNum)return r.attrs.rowSpan=n.class_len,r;if(0!==i&&0!==a&&a+1>t.gradeList[i-1].allNum&&a+1<=t.gradeList[i].allNum)return r.attrs.rowSpan=0,r}},scopedSlots:{customRender:"grade_name"}},{title:"班级",align:"center",width:100,fixed:"left",dataIndex:"class_name"},{title:"参加测评学生数",align:"center",width:100,fixed:"left",dataIndex:"evaluation_number",scopedSlots:{customRender:"evaluation_number"}},{title:"未参加测评学生数",align:"center",width:100,fixed:"left",dataIndex:"not_evaluation_number",scopedSlots:{customRender:"not_evaluation_number"}},{title:"优秀(A)",align:"center",children:[{title:"学生数",width:70,align:"center",dataIndex:"number_a",scopedSlots:{customRender:"number_a"}},{title:"比例(%)",width:70,align:"center",dataIndex:"number_a_rate"}]},{title:"良好(B)",align:"center",children:[{title:"学生数",width:70,align:"center",dataIndex:"number_b",scopedSlots:{customRender:"number_b"}},{title:"比例(%)",width:70,align:"center",dataIndex:"number_b_rate"}]},{title:"优良率",align:"center",children:[{title:"学生数",width:70,align:"center",dataIndex:"number_excellent",scopedSlots:{customRender:"number_excellent"}},{title:"比例(%)",width:70,align:"center",dataIndex:"number_excellent_rate"}]},{title:"及格(C)",align:"center",children:[{title:"学生数",width:70,align:"center",dataIndex:"number_c",scopedSlots:{customRender:"number_c"}},{title:"比例(%)",width:70,align:"center",dataIndex:"number_c_rate"}]},{title:"不及格(D)",align:"center",children:[{title:"学生数",width:70,align:"center",dataIndex:"number_d",scopedSlots:{customRender:"number_d"}},{title:"比例(%)",width:70,align:"center",dataIndex:"number_d_rate"}]}],gradeList:[],loadData:function(e){return Object(c["h"])(t.queryParam).then((function(e){for(var n=e.data,a=0,r=0;r<n.length;r++)a+=n[r].class_items.length,t.gradeList.push(Object(i["a"])({allNum:a},n[r]));var s={rows:[]},c=e.data;return c.forEach((function(t){t.class_items.forEach((function(e){s.rows.push(Object(i["a"])({grade_id:t.grade_id,grade_name:t.grade_name,class_len:t.class_items.length},e))}))})),s}))}}},methods:{show:function(t,e,n){window.innerWidth-230<1165&&(this.width=window.innerWidth-230),this.title=n+"详细",this.queryParam.school_year=t.school_year,this.queryParam.semester=t.semester,this.queryParam.subject_id=e,t.classSelData&&t.classSelData.length?this.queryParam.grade_id=t.classSelData[0]:delete this.queryParam.grade_id,this.visible=!0},handleCancel:function(){this.visible=!1},exportFile:function(){var t=this,e=Object.assign({},this.queryParam);Object(c["c"])(e).then((function(t){Object(o["b"])(t)})).catch((function(){t.$message.error("下载错误：获取文件流错误")}))}}},m=d,f=(n("ed84"),n("0c7c")),h=Object(f["a"])(m,a,r,!1,null,"11b4c42d",null);e["default"]=h.exports},"0a43":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{padding:"0 0 32px 32px"}},[n("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:t.idName}})])},r=[],i=(n("d81d"),n("b0c0"),{props:{idName:{type:String,default:"barStacking"},title:{type:String,default:""},dataSource:{type:Array,required:!0},color:{type:Array,required:!0},barTitle:{type:String,default:""}},data:function(){return{}},mounted:function(){this.initEcharts()},methods:{initEcharts:function(){var t=this.$echarts.init(document.getElementById(this.idName));t.clear();var e=this.color,n=[];n=-1!==this.title.indexOf("BMI")?["正常","低体重","超重","肥胖"]:["A","B","C","D"];var a=[];if(a[0]=this.dataSource.map((function(t){return{value:t.valueA,percent:t.percentA}})),a[1]=this.dataSource.map((function(t){return{value:t.valueB,percent:t.percentB}})),a[2]=this.dataSource.map((function(t){return{value:t.valueC,percent:t.percentC}})),a[3]=this.dataSource.map((function(t){return{value:t.valueD,percent:t.percentD}})),this.dataSource&&this.dataSource.length>0)var r=this.dataSource.map((function(t){return t.name}));for(var i=[],s=0;s<n.length;s++)i.push({name:n[s],type:"bar",stack:"总量",label:{show:!1,formatter:function(t){return t.value+"("+t.data.percent+"%)"}},data:a[s]});var c={title:{text:this.barTitle,textStyle:{fontSize:18}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){for(var e="<div>"+t[0].name+"</div>",n=0;n<t.length;n++)e+='<p><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+t[n].color+'"></span><span style="margin-right:5px">'+t[n].seriesName+":</span>"+t[n].data.value+"("+t[n].data.percent+"%)</p>";return e}},color:e,legend:{itemGap:30,itemWidth:40,itemHeight:20,textStyle:{fontSize:18,padding:[3,0,0,0]},data:n},grid:{left:"3%",right:"4%",bottom:"13%",containLabel:!0},xAxis:{type:"category",data:r,axisLabel:{fontSize:14,interval:0,formatter:function(t){var e="",n=t.length,a=3;return e=n>a?t.substring(0,a)+"\n"+t.substring(3,n):t,e}},axisTick:{show:!0}},yAxis:{type:"value",name:"人数",boundaryGap:["0","20%"],splitLine:{show:!0}},series:i};c&&t.setOption(c,!0),this.$nextTick((function(){t.resize()}))}}}),s=i,c=n("0c7c"),l=Object(c["a"])(s,a,r,!1,null,null,null);e["default"]=l.exports},"16d2":function(t,e,n){"use strict";n.d(e,"o",(function(){return r})),n.d(e,"l",(function(){return i})),n.d(e,"m",(function(){return s})),n.d(e,"n",(function(){return c})),n.d(e,"p",(function(){return l})),n.d(e,"g",(function(){return u})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return d})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return f})),n.d(e,"h",(function(){return h})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return S})),n.d(e,"b",(function(){return _})),n.d(e,"k",(function(){return g})),n.d(e,"q",(function(){return y}));var a=n("b775");function r(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/Get",method:"get",params:t})}function i(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetSubjectStatistics",method:"get",params:t})}function s(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/Detail",method:"get",params:t})}function c(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/Export",method:"post",data:t,responseType:"blob"})}function l(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetStudent",method:"get",params:t})}function u(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetGradeStatistics",method:"get",params:t})}function o(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetGradeProjectStatistics",method:"get",params:t})}function d(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetProjectStudent",method:"get",params:t})}function m(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetGradeSubjectStatistics",method:"get",params:t})}function f(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetGradeSubjectStatisticsMultiple",method:"get",params:t})}function h(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetGradeSubjectDetailStatistics",method:"get",params:t})}function b(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/ExportGradeSubjectStatistics",method:"post",data:t,responseType:"blob"})}function p(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetClassStatistics",method:"get",params:t})}function S(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetClassSubjectStatisticsDetail",method:"get",params:t})}function _(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/ExportClassSubjectStatistics",method:"post",data:t,responseType:"blob"})}function g(t){return Object(a["b"])({url:"/MiddleSchoolStatistics/GetPersonalStatistics",method:"get",params:t})}function y(t){return Object(a["b"])({url:"/ParentAPPService/Get",method:"get",params:t})}},"6c82":function(t,e,n){},7147:function(t,e,n){},"9bfe":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",[n("a-modal",{attrs:{title:"详细",footer:null,width:800,destroyOnClose:!0},on:{cancel:function(e){t.visible=!1}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("a-card",{attrs:{bordered:!1}},[n("s-table",{ref:"table",attrs:{columns:t.columns,data:t.loadData,scroll:{y:550},alert:!1,rowKey:function(t){return t.student_id}},scopedSlots:t._u([{key:"grade_name",fn:function(e,a){return n("span",{},[t._v(" "+t._s(t._f("userDictType")("grade_name",a.grade_name))+" ")])}}],null,!1,1822882623)})],1)],1)],1):t._e()},r=[],i=(n("a434"),n("2af9")),s=n("16d2"),c=n("c1df"),l=n.n(c),u={components:{STable:i["r"],XCard:i["w"]},data:function(){var t=this;return{visible:!1,queryParam:{id:null,type:null},tstyle:{"padding-bottom":"0px","margin-bottom":"10px"},loadData:function(e){return Object(s["p"])(Object.assign(e,t.switchingDate())).then((function(t){return t.data}))}}},computed:{columns:function(){var t=[{title:"年级",align:"center",dataIndex:"grade_name",scopedSlots:{customRender:"grade_name"}},{title:"班级",align:"center",dataIndex:"class_name"},{title:"学生",align:"center",dataIndex:"student_name"}];if(2!==this.queryParam.type){var e={title:"总分",align:"center",dataIndex:"total_score"};t.splice(3,0,e)}return t}},methods:{moment:l.a,show:function(t,e,n){this.queryParam.school_year=t.school_year,this.queryParam.semester=t.semester,this.queryParam.subject_id=t.subject_id,this.queryParam.grade_id=e.grade_id,this.queryParam.class_id=e.class_id,this.queryParam.type=n,this.visible=!0},switchingDate:function(){var t=JSON.parse(JSON.stringify(this.queryParam));return t}}},o=u,d=(n("b6a2"),n("0c7c")),m=Object(d["a"])(o,a,r,!1,null,null,null);e["default"]=m.exports},b6a2:function(t,e,n){"use strict";n("6c82")},ed84:function(t,e,n){"use strict";n("7147")}}]);